{"version":3,"file":"js/222.cf25e12d.js","mappings":"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","sources":["webpack://logtool-frontend/./src/views/LogDetail.vue","webpack://logtool-frontend/./src/views/LogDetail.vue?58d3"],"sourcesContent":["<template>\r\n  <div class=\"log-detail-container\">\r\n    <!-- 加载进度条 -->\r\n    <el-card v-if=\"loading\" class=\"loading-card\">\r\n      <div class=\"loading-content\">\r\n        <el-progress \r\n          :percentage=\"loadingProgress\" \r\n          :status=\"loadingProgress >= 100 ? 'success' : ''\"\r\n          :stroke-width=\"8\"\r\n        />\r\n        <p class=\"loading-text\">正在加载日志内容... {{ loadingProgress }}%</p>\r\n      </div>\r\n    </el-card>\r\n\r\n    <el-card class=\"detail-card\">\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <div class=\"header-left\">\r\n            <el-button @click=\"goBack\" icon=\"ArrowLeft\" size=\"small\">\r\n              返回\r\n            </el-button>\r\n            <span class=\"title\">日志详情</span>\r\n          </div>\r\n          <div class=\"header-right\">\r\n            <el-tag :type=\"getStatusType(logInfo.status)\" size=\"small\">\r\n              {{ getStatusText(logInfo.status) }}\r\n            </el-tag>\r\n          </div>\r\n        </div>\r\n      </template>\r\n\r\n      <!-- 日志基本信息 -->\r\n      <div class=\"log-info\">\r\n        <el-descriptions :column=\"3\" border>\r\n          <el-descriptions-item label=\"文件名\">{{ logInfo.original_name }}</el-descriptions-item>\r\n          <el-descriptions-item label=\"设备编号\">{{ logInfo.device_id }}</el-descriptions-item>\r\n          <el-descriptions-item label=\"文件大小\">{{ formatFileSize(logInfo.size) }}</el-descriptions-item>\r\n          <el-descriptions-item label=\"上传时间\">{{ formatDate(logInfo.upload_time) }}</el-descriptions-item>\r\n          <el-descriptions-item label=\"解析时间\">{{ formatDate(logInfo.parse_time) }}</el-descriptions-item>\r\n          <el-descriptions-item label=\"上传用户ID\">{{ logInfo.uploader_id }}</el-descriptions-item>\r\n        </el-descriptions>\r\n      </div>\r\n\r\n      <!-- 日志条目表格 -->\r\n      <div class=\"entries-section\">\r\n        <div class=\"section-header\">\r\n          <h3>日志条目 ({{ logEntries.length }})</h3>\r\n          <div class=\"header-actions\">\r\n            <el-input\r\n              v-model=\"searchKeyword\"\r\n              placeholder=\"搜索释义内容或故障码\"\r\n              style=\"width: 300px; margin-right: 10px;\"\r\n              clearable\r\n              @input=\"filterEntries\"\r\n            >\r\n              <template #prefix>\r\n                <el-icon><Search /></el-icon>\r\n              </template>\r\n            </el-input>\r\n            <el-button @click=\"exportToCSV\" type=\"success\" size=\"small\">\r\n              <el-icon><Download /></el-icon>\r\n              导出CSV\r\n            </el-button>\r\n            <el-button @click=\"goToSurgeryAnalysis\" type=\"primary\" size=\"small\" style=\"margin-left: 10px;\">\r\n              <el-icon><DataAnalysis /></el-icon>\r\n              手术统计\r\n            </el-button>\r\n          </div>\r\n        </div>\r\n\r\n        <el-table \r\n          :data=\"paginatedEntries\" \r\n          style=\"width: 100%\"\r\n          v-loading=\"loading\"\r\n          height=\"600\"\r\n          stripe\r\n        >\r\n          <el-table-column prop=\"timestamp\" label=\"时间戳\" width=\"180\" sortable>\r\n            <template #default=\"{ row }\">\r\n              {{ formatTimestamp(row.timestamp) }}\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"error_code\" label=\"故障码\" width=\"120\" sortable />\r\n          <el-table-column prop=\"param1\" label=\"参数1\" width=\"100\" />\r\n          <el-table-column prop=\"param2\" label=\"参数2\" width=\"100\" />\r\n          <el-table-column prop=\"param3\" label=\"参数3\" width=\"100\" />\r\n          <el-table-column prop=\"param4\" label=\"参数4\" width=\"100\" />\r\n          <el-table-column prop=\"explanation\" label=\"释义\" min-width=\"300\" show-overflow-tooltip />\r\n        </el-table>\r\n\r\n        <!-- 分页 -->\r\n        <div class=\"pagination-wrapper\">\r\n          <el-pagination\r\n            :current-page=\"currentPage\"\r\n            :page-size=\"pageSize\"\r\n            :page-sizes=\"[50, 100, 200, 500]\"\r\n            :total=\"filteredEntries.length\"\r\n            layout=\"total, sizes, prev, pager, next, jumper\"\r\n            @size-change=\"handleSizeChange\"\r\n            @current-change=\"handleCurrentChange\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed, onMounted } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { ElMessage } from 'element-plus'\r\nimport { Search, Download, ArrowLeft, DataAnalysis } from '@element-plus/icons-vue'\r\n\r\nexport default {\r\n  name: 'LogDetail',\r\n  components: {\r\n    Search,\r\n    Download,\r\n    ArrowLeft,\r\n    DataAnalysis\r\n  },\r\n  setup() {\r\n    const store = useStore()\r\n    const route = useRoute()\r\n    const router = useRouter()\r\n    \r\n    const logId = route.params.id\r\n    const loading = ref(false)\r\n    const loadingProgress = ref(0)\r\n    const logInfo = ref({})\r\n    const logEntries = ref([])\r\n    const searchKeyword = ref('')\r\n    const currentPage = ref(1)\r\n    const pageSize = ref(100)\r\n\r\n    // 过滤后的条目\r\n    const filteredEntries = computed(() => {\r\n      if (!searchKeyword.value) {\r\n        return logEntries.value\r\n      }\r\n      return logEntries.value.filter(entry => \r\n        entry.explanation.toLowerCase().includes(searchKeyword.value.toLowerCase()) ||\r\n        entry.error_code.toLowerCase().includes(searchKeyword.value.toLowerCase())\r\n      )\r\n    })\r\n\r\n    // 分页后的条目\r\n    const paginatedEntries = computed(() => {\r\n      const start = (currentPage.value - 1) * pageSize.value\r\n      const end = start + pageSize.value\r\n      return filteredEntries.value.slice(start, end)\r\n    })\r\n\r\n    // 加载日志信息\r\n    const loadLogInfo = async () => {\r\n      try {\r\n        loading.value = true\r\n        const response = await store.dispatch('logs/fetchLogs', { page: 1, limit: 1000 })\r\n        const log = response.data.logs.find(l => l.id == logId)\r\n        if (log) {\r\n          logInfo.value = log\r\n        } else {\r\n          ElMessage.error('日志不存在')\r\n          goBack()\r\n        }\r\n      } catch (error) {\r\n        ElMessage.error('加载日志信息失败')\r\n      } finally {\r\n        loading.value = false\r\n      }\r\n    }\r\n\r\n    // 加载日志条目\r\n    const loadLogEntries = async () => {\r\n      try {\r\n        loading.value = true\r\n        loadingProgress.value = 0\r\n        \r\n        // 模拟加载进度\r\n        const progressInterval = setInterval(() => {\r\n          if (loadingProgress.value < 90) {\r\n            loadingProgress.value += 10\r\n          }\r\n        }, 100)\r\n        \r\n        const response = await store.dispatch('logs/fetchLogEntries', logId)\r\n        logEntries.value = response.data?.entries || response.entries || []\r\n        \r\n        // 完成加载\r\n        clearInterval(progressInterval)\r\n        loadingProgress.value = 100\r\n        \r\n        // 延迟隐藏进度条\r\n        setTimeout(() => {\r\n          loading.value = false\r\n          loadingProgress.value = 0\r\n        }, 500)\r\n        \r\n      } catch (error) {\r\n        ElMessage.error('加载日志条目失败')\r\n        loading.value = false\r\n        loadingProgress.value = 0\r\n      }\r\n    }\r\n\r\n    // 过滤条目\r\n    const filterEntries = () => {\r\n      currentPage.value = 1\r\n    }\r\n\r\n    // 导出CSV\r\n    const exportToCSV = () => {\r\n      const headers = ['时间戳', '故障码', '参数1', '参数2', '参数3', '参数4', '释义']\r\n      const csvContent = [\r\n        headers.join(','),\r\n        ...filteredEntries.value.map(entry => [\r\n          formatTimestamp(entry.timestamp),\r\n          entry.error_code,\r\n          entry.param1,\r\n          entry.param2,\r\n          entry.param3,\r\n          entry.param4,\r\n          `\"${entry.explanation.replace(/\"/g, '\"\"')}\"`\r\n        ].join(','))\r\n      ].join('\\n')\r\n\r\n      const blob = new Blob(['\\ufeff' + csvContent], { type: 'text/csv;charset=utf-8;' })\r\n      const link = document.createElement('a')\r\n      link.href = URL.createObjectURL(blob)\r\n      link.download = `${logInfo.value.original_name}_entries.csv`\r\n      link.click()\r\n      URL.revokeObjectURL(link.href)\r\n      \r\n      ElMessage.success('CSV文件导出成功')\r\n    }\r\n\r\n    // 分页处理\r\n    const handleSizeChange = (size) => {\r\n      pageSize.value = size\r\n      currentPage.value = 1\r\n    }\r\n\r\n    const handleCurrentChange = (page) => {\r\n      currentPage.value = page\r\n    }\r\n\r\n    // 返回上一页\r\n    const goBack = () => {\r\n      router.go(-1)\r\n    }\r\n\r\n    // 跳转到手术统计页面\r\nconst goToSurgeryAnalysis = () => {\r\n  // 准备日志条目数据\r\n  const entriesData = {\r\n    logId: logId,\r\n    logName: logInfo.value.original_name,\r\n    entries: logEntries.value,\r\n    totalCount: logEntries.value.length,\r\n    timeRange: {\r\n      start: logEntries.value.length > 0 ? logEntries.value[0].timestamp : null,\r\n      end: logEntries.value.length > 0 ? logEntries.value[logEntries.value.length - 1].timestamp : null\r\n    }\r\n  }\r\n  \r\n  // 压缩数据以减少传输大小\r\n  const compressedData = compressLogEntries(entriesData.entries)\r\n  \r\n  // 存储到sessionStorage\r\n  sessionStorage.setItem('surgeryAnalysisData', JSON.stringify({\r\n    ...entriesData,\r\n    entries: compressedData,\r\n    compressed: true,\r\n    timestamp: Date.now()\r\n  }))\r\n  \r\n  // 设置自动分析标志\r\n  sessionStorage.setItem('autoAnalyze', 'true')\r\n  \r\n  // 跳转到手术统计页面\r\n  router.push('/surgery-statistics')\r\n}\r\n\r\n// 压缩日志条目数据\r\nconst compressLogEntries = (entries) => {\r\n  return entries.map(entry => ({\r\n    t: entry.timestamp,\r\n    e: entry.error_code,\r\n    p1: entry.param1,\r\n    p2: entry.param2,\r\n    p3: entry.param3,\r\n    p4: entry.param4,\r\n    exp: entry.explanation,\r\n    ln: entry.log_name || logInfo.value.original_name\r\n  }))\r\n}\r\n\r\n// 解压缩日志条目数据\r\nconst decompressLogEntries = (compressedEntries) => {\r\n  return compressedEntries.map(entry => ({\r\n    timestamp: entry.t,\r\n    error_code: entry.e,\r\n    param1: entry.p1,\r\n    param2: entry.p2,\r\n    param3: entry.p3,\r\n    param4: entry.p4,\r\n    explanation: entry.exp,\r\n    log_name: entry.ln\r\n  }))\r\n}\r\n\r\n    // 格式化函数\r\n    const formatFileSize = (bytes) => {\r\n      if (bytes === 0) return '0 B'\r\n      const k = 1024\r\n      const sizes = ['B', 'KB', 'MB', 'GB']\r\n      const i = Math.floor(Math.log(bytes) / Math.log(k))\r\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\r\n    }\r\n\r\n    const formatDate = (dateString) => {\r\n      if (!dateString) return '-'\r\n      return new Date(dateString).toLocaleString('zh-CN')\r\n    }\r\n\r\n    const formatTimestamp = (timestamp) => {\r\n      if (!timestamp) return '-'\r\n      // 将时间戳格式化为 YYYY-MM-DD HH:mm:ss 格式\r\n      const date = new Date(timestamp)\r\n      const year = date.getFullYear()\r\n      const month = String(date.getMonth() + 1).padStart(2, '0')\r\n      const day = String(date.getDate()).padStart(2, '0')\r\n      const hours = String(date.getHours()).padStart(2, '0')\r\n      const minutes = String(date.getMinutes()).padStart(2, '0')\r\n      const seconds = String(date.getSeconds()).padStart(2, '0')\r\n      return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`\r\n    }\r\n\r\n    const getStatusType = (status) => {\r\n      const typeMap = {\r\n        uploaded: 'warning',\r\n        parsed: 'success',\r\n        failed: 'danger'\r\n      }\r\n      return typeMap[status] || 'info'\r\n    }\r\n\r\n    const getStatusText = (status) => {\r\n      const textMap = {\r\n        uploaded: '已上传',\r\n        parsed: '已解析',\r\n        failed: '解析失败'\r\n      }\r\n      return textMap[status] || '未知'\r\n    }\r\n\r\n    onMounted(() => {\r\n      loadLogInfo()\r\n      loadLogEntries()\r\n    })\r\n\r\n    return {\r\n      loading,\r\n      loadingProgress,\r\n      logInfo,\r\n      logEntries,\r\n      searchKeyword,\r\n      currentPage,\r\n      pageSize,\r\n      filteredEntries,\r\n      paginatedEntries,\r\n      loadLogInfo,\r\n      loadLogEntries,\r\n      filterEntries,\r\n      exportToCSV,\r\n      handleSizeChange,\r\n      handleCurrentChange,\r\n      goBack,\r\n      goToSurgeryAnalysis,\r\n      formatFileSize,\r\n      formatDate,\r\n      formatTimestamp,\r\n      getStatusType,\r\n      getStatusText\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.log-detail-container {\r\n  padding: 20px;\r\n  height: 100vh;\r\n  overflow: hidden;\r\n}\r\n\r\n.loading-card {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.loading-content {\r\n  text-align: center;\r\n  padding: 20px;\r\n}\r\n\r\n.loading-text {\r\n  margin-top: 10px;\r\n  color: #606266;\r\n  font-size: 14px;\r\n}\r\n\r\n.detail-card {\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.header-left {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 15px;\r\n}\r\n\r\n.title {\r\n  font-size: 18px;\r\n  font-weight: bold;\r\n}\r\n\r\n.log-info {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.entries-section {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n}\r\n\r\n.section-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 15px;\r\n}\r\n\r\n.section-header h3 {\r\n  margin: 0;\r\n  color: #303133;\r\n}\r\n\r\n.header-actions {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.pagination-wrapper {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 20px;\r\n  padding: 10px 0;\r\n}\r\n</style> ","import { render } from \"./LogDetail.vue?vue&type=template&id=da49d4b8&scoped=true\"\nimport script from \"./LogDetail.vue?vue&type=script&lang=js\"\nexport * from \"./LogDetail.vue?vue&type=script&lang=js\"\n\nimport \"./LogDetail.vue?vue&type=style&index=0&id=da49d4b8&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-da49d4b8\"]])\n\nexport default __exports__"],"names":["class","percentage","loadingProgress","status","header","goBack","icon","size","type","getStatusType","logInfo","getStatusText","column","border","label","original_name","device_id","formatFileSize","formatDate","upload_time","parse_time","uploader_id","logEntries","length","searchKeyword","placeholder","style","clearable","filterEntries","prefix","exportToCSV","goToSurgeryAnalysis","data","paginatedEntries","height","stripe","prop","width","sortable","default","row","formatTimestamp","timestamp","loading","currentPage","pageSize","total","filteredEntries","layout","handleSizeChange","handleCurrentChange","name","components","Search","Download","ArrowLeft","DataAnalysis","setup","store","route","router","logId","params","id","value","filter","entry","explanation","toLowerCase","includes","error_code","start","end","slice","loadLogInfo","async","response","dispatch","page","limit","log","logs","find","l","error","loadLogEntries","progressInterval","setInterval","entries","clearInterval","setTimeout","headers","csvContent","join","map","param1","param2","param3","param4","replace","blob","Blob","link","document","createElement","href","URL","createObjectURL","download","click","revokeObjectURL","success","go","entriesData","logName","totalCount","timeRange","compressedData","compressLogEntries","sessionStorage","setItem","JSON","stringify","compressed","Date","now","push","t","e","p1","p2","p3","p4","exp","ln","log_name","bytes","k","sizes","i","Math","floor","parseFloat","pow","toFixed","dateString","toLocaleString","date","year","getFullYear","month","String","getMonth","padStart","day","getDate","hours","getHours","minutes","getMinutes","seconds","getSeconds","typeMap","uploaded","parsed","failed","textMap","__exports__","render"],"sourceRoot":""}