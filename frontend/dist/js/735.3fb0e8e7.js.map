{"version":3,"file":"js/735.3fb0e8e7.js","mappings":"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","sources":["webpack://logtool-frontend/./src/views/Analysis.vue","webpack://logtool-frontend/./src/views/Analysis.vue?6759"],"sourcesContent":["<template>\r\n  <div class=\"analysis-container\">\r\n    <el-card class=\"analysis-card\">\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <div class=\"header-left\">\r\n            <span class=\"title\">日志分析</span>\r\n            <el-tag v-if=\"logInfo.original_name\" type=\"info\" size=\"small\">\r\n              {{ logInfo.original_name }}\r\n            </el-tag>\r\n          </div>\r\n          <div class=\"header-right\">\r\n            <el-button @click=\"exportToCSV\" type=\"success\" size=\"small\">\r\n              <el-icon><Download /></el-icon>\r\n              导出CSV\r\n            </el-button>\r\n          </div>\r\n        </div>\r\n      </template>\r\n\r\n      <!-- 日志基本信息 -->\r\n      <div class=\"log-info\" v-if=\"logInfo.id\">\r\n        <el-descriptions :column=\"3\" border size=\"small\">\r\n          <el-descriptions-item label=\"文件名\">{{ logInfo.original_name }}</el-descriptions-item>\r\n          <el-descriptions-item label=\"设备编号\">{{ logInfo.device_id }}</el-descriptions-item>\r\n          <el-descriptions-item label=\"文件大小\">{{ formatFileSize(logInfo.size) }}</el-descriptions-item>\r\n          <el-descriptions-item label=\"上传时间\">{{ formatDate(logInfo.upload_time) }}</el-descriptions-item>\r\n          <el-descriptions-item label=\"解析时间\">{{ formatDate(logInfo.parse_time) }}</el-descriptions-item>\r\n          <el-descriptions-item label=\"上传用户ID\">{{ logInfo.uploader_id }}</el-descriptions-item>\r\n        </el-descriptions>\r\n      </div>\r\n\r\n      <!-- 搜索和筛选 -->\r\n      <div class=\"search-section\">\r\n        <el-input\r\n          v-model=\"searchKeyword\"\r\n          placeholder=\"搜索释义内容或故障码\"\r\n          style=\"width: 250px; margin-right: 15px;\"\r\n          clearable\r\n          @input=\"handleSearch\"\r\n        >\r\n          <template #prefix>\r\n            <el-icon><Search /></el-icon>\r\n          </template>\r\n        </el-input>\r\n        \r\n        <el-date-picker\r\n          v-model=\"timeRange\"\r\n          type=\"datetimerange\"\r\n          range-separator=\"至\"\r\n          start-placeholder=\"开始时间\"\r\n          end-placeholder=\"结束时间\"\r\n          format=\"YYYY-MM-DD HH:mm:ss\"\r\n          value-format=\"YYYY-MM-DD HH:mm:ss\"\r\n          style=\"width: 300px; margin-right: 15px;\"\r\n          @change=\"handleTimeRangeChange\"\r\n        />\r\n        <el-tag v-if=\"timeRangeLimit\" type=\"info\" size=\"small\" style=\"margin-left: 10px;\">\r\n          可选范围: {{ formatTimestamp(timeRangeLimit[0]) }} 至 {{ formatTimestamp(timeRangeLimit[1]) }}\r\n        </el-tag>\r\n        \r\n        <el-button \r\n          v-if=\"timeRangeLimit\" \r\n          @click=\"setFullTimeRange\" \r\n          type=\"primary\" \r\n          size=\"small\"\r\n          style=\"margin-left: 10px;\"\r\n        >\r\n          选择全部时间\r\n        </el-button>\r\n        \r\n        <el-button @click=\"clearFilters\" type=\"info\" size=\"small\">\r\n          清除筛选\r\n        </el-button>\r\n      </div>\r\n\r\n      <!-- 日志条目表格 -->\r\n      <div class=\"entries-section\">\r\n        <div class=\"section-header\">\r\n          <h3>日志条目 ({{ filteredEntries.length }})</h3>\r\n        </div>\r\n\r\n        <!-- 加载状态 -->\r\n        <div v-if=\"loading\" class=\"loading-section\">\r\n          <el-empty description=\"正在加载日志数据...\" />\r\n        </div>\r\n\r\n        <!-- 错误状态 -->\r\n        <div v-else-if=\"logEntries.length === 0\" class=\"error-section\">\r\n          <el-empty description=\"未找到日志条目\" />\r\n        </div>\r\n\r\n        <!-- 数据表格 -->\r\n        <div v-else class=\"table-container\">\r\n          <el-table \r\n            :data=\"paginatedEntries\" \r\n            style=\"width: 100%\"\r\n            v-loading=\"loading\"\r\n            height=\"calc(100vh - 350px)\"\r\n            stripe\r\n          >\r\n            <el-table-column prop=\"timestamp\" label=\"时间戳\" width=\"180\" sortable>\r\n              <template #default=\"{ row }\">\r\n                {{ formatTimestamp(row.timestamp) }}\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column prop=\"error_code\" label=\"故障码\" width=\"120\" sortable />\r\n            <el-table-column prop=\"param1\" label=\"参数1\" width=\"100\" />\r\n            <el-table-column prop=\"param2\" label=\"参数2\" width=\"100\" />\r\n            <el-table-column prop=\"param3\" label=\"参数3\" width=\"100\" />\r\n            <el-table-column prop=\"param4\" label=\"参数4\" width=\"100\" />\r\n            <el-table-column prop=\"explanation\" label=\"释义\" min-width=\"300\" show-overflow-tooltip />\r\n          </el-table>\r\n        </div>\r\n\r\n        <!-- 分页 -->\r\n        <div class=\"pagination-wrapper\" v-if=\"filteredEntries.length > 0\">\r\n          <el-pagination\r\n            :current-page=\"currentPage\"\r\n            :page-size=\"pageSize\"\r\n            :page-sizes=\"[50, 100, 200, 500]\"\r\n            :total=\"filteredEntries.length\"\r\n            layout=\"total, sizes, prev, pager, next, jumper\"\r\n            @size-change=\"handleSizeChange\"\r\n            @current-change=\"handleCurrentChange\"\r\n          />\r\n        </div>\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed, onMounted } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { ElMessage } from 'element-plus'\r\nimport { Search, Download, ArrowLeft } from '@element-plus/icons-vue'\r\n\r\nexport default {\r\n  name: 'Analysis',\r\n  components: {\r\n    Search,\r\n    Download,\r\n    ArrowLeft\r\n  },\r\n  setup() {\r\n    const store = useStore()\r\n    const route = useRoute()\r\n    const router = useRouter()\r\n    \r\n    const logId = route.params.id\r\n    const loading = ref(false)\r\n    const logInfo = ref({})\r\n    const logEntries = ref([])\r\n    const searchKeyword = ref('')\r\n    const timeRange = ref(null)\r\n    const currentPage = ref(1)\r\n    const pageSize = ref(100)\r\n\r\n    // 获取时间范围限制\r\n    const timeRangeLimit = computed(() => {\r\n      if (logEntries.value.length === 0) return null\r\n      \r\n      const timestamps = logEntries.value.map(entry => new Date(entry.timestamp))\r\n      const minTime = new Date(Math.min(...timestamps))\r\n      const maxTime = new Date(Math.max(...timestamps))\r\n      \r\n      console.log('时间范围限制:', {\r\n        minTime: minTime.toISOString(),\r\n        maxTime: maxTime.toISOString(),\r\n        entriesCount: logEntries.value.length\r\n      })\r\n      \r\n      return [minTime, maxTime]\r\n    })\r\n\r\n    // 过滤后的条目\r\n    const filteredEntries = computed(() => {\r\n      let entries = logEntries.value\r\n      \r\n      // 搜索过滤\r\n      if (searchKeyword.value) {\r\n        entries = entries.filter(entry => \r\n          entry.explanation.toLowerCase().includes(searchKeyword.value.toLowerCase()) ||\r\n          entry.error_code.toLowerCase().includes(searchKeyword.value.toLowerCase())\r\n        )\r\n      }\r\n      \r\n      // 时间范围过滤\r\n      if (timeRange.value && timeRange.value.length === 2) {\r\n        const [startTime, endTime] = timeRange.value\r\n        entries = entries.filter(entry => {\r\n          const entryTime = new Date(entry.timestamp)\r\n          const start = new Date(startTime)\r\n          const end = new Date(endTime)\r\n          return entryTime >= start && entryTime <= end\r\n        })\r\n      }\r\n      \r\n      return entries\r\n    })\r\n\r\n    // 分页后的条目\r\n    const paginatedEntries = computed(() => {\r\n      const start = (currentPage.value - 1) * pageSize.value\r\n      const end = start + pageSize.value\r\n      return filteredEntries.value.slice(start, end)\r\n    })\r\n\r\n    // 加载日志信息\r\n    const loadLogInfo = async () => {\r\n      try {\r\n        loading.value = true\r\n        const response = await store.dispatch('logs/fetchLogs', { page: 1, limit: 1000 })\r\n        const log = response.data.logs.find(l => l.id == logId)\r\n        if (log) {\r\n          logInfo.value = log\r\n        } else {\r\n          ElMessage.error('日志不存在')\r\n          router.go(-1)\r\n        }\r\n      } catch (error) {\r\n        ElMessage.error('加载日志信息失败')\r\n      } finally {\r\n        loading.value = false\r\n      }\r\n    }\r\n\r\n    // 加载日志条目\r\n    const loadLogEntries = async () => {\r\n      try {\r\n        loading.value = true\r\n        const response = await store.dispatch('logs/fetchLogEntries', logId)\r\n        logEntries.value = response.data?.entries || response.entries || []\r\n      } catch (error) {\r\n        ElMessage.error('加载日志条目失败')\r\n      } finally {\r\n        loading.value = false\r\n      }\r\n    }\r\n\r\n    // 搜索处理\r\n    const handleSearch = () => {\r\n      currentPage.value = 1\r\n    }\r\n\r\n    // 时间范围变化处理\r\n    const handleTimeRangeChange = () => {\r\n      currentPage.value = 1\r\n    }\r\n\r\n    // 清除筛选\r\n    const clearFilters = () => {\r\n      searchKeyword.value = ''\r\n      timeRange.value = null\r\n      currentPage.value = 1\r\n    }\r\n\r\n    // 导出CSV\r\n    const exportToCSV = () => {\r\n      const headers = ['时间戳', '故障码', '参数1', '参数2', '参数3', '参数4', '释义']\r\n      const csvContent = [\r\n        headers.join(','),\r\n        ...filteredEntries.value.map(entry => [\r\n          formatTimestamp(entry.timestamp),\r\n          entry.error_code,\r\n          entry.param1,\r\n          entry.param2,\r\n          entry.param3,\r\n          entry.param4,\r\n          `\"${entry.explanation.replace(/\"/g, '\"\"')}\"`\r\n        ].join(','))\r\n      ].join('\\n')\r\n\r\n      const blob = new Blob(['\\ufeff' + csvContent], { type: 'text/csv;charset=utf-8;' })\r\n      const link = document.createElement('a')\r\n      link.href = URL.createObjectURL(blob)\r\n      link.download = `${logInfo.value.original_name}_analysis.csv`\r\n      link.click()\r\n      URL.revokeObjectURL(link.href)\r\n      \r\n      ElMessage.success('CSV文件导出成功')\r\n    }\r\n\r\n    // 分页处理\r\n    const handleSizeChange = (size) => {\r\n      pageSize.value = size\r\n      currentPage.value = 1\r\n    }\r\n\r\n    const handleCurrentChange = (page) => {\r\n      currentPage.value = page\r\n    }\r\n\r\n    // 格式化函数\r\n    const formatFileSize = (bytes) => {\r\n      if (bytes === 0) return '0 B'\r\n      const k = 1024\r\n      const sizes = ['B', 'KB', 'MB', 'GB']\r\n      const i = Math.floor(Math.log(bytes) / Math.log(k))\r\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\r\n    }\r\n\r\n    const formatDate = (dateString) => {\r\n      if (!dateString) return '-'\r\n      return new Date(dateString).toLocaleString('zh-CN')\r\n    }\r\n\r\n    const formatTimestamp = (timestamp) => {\r\n      if (!timestamp) return '-'\r\n      const date = new Date(timestamp)\r\n      const year = date.getFullYear()\r\n      const month = String(date.getMonth() + 1).padStart(2, '0')\r\n      const day = String(date.getDate()).padStart(2, '0')\r\n      const hours = String(date.getHours()).padStart(2, '0')\r\n      const minutes = String(date.getMinutes()).padStart(2, '0')\r\n      const seconds = String(date.getSeconds()).padStart(2, '0')\r\n      return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`\r\n    }\r\n\r\n    // 设置时间范围为全部\r\n    const setFullTimeRange = () => {\r\n      if (timeRangeLimit.value) {\r\n        timeRange.value = [timeRangeLimit.value[0], timeRangeLimit.value[1]]\r\n      }\r\n    }\r\n\r\n    onMounted(() => {\r\n      loadLogInfo()\r\n      loadLogEntries()\r\n    })\r\n\r\n    return {\r\n      loading,\r\n      logInfo,\r\n      logEntries,\r\n      searchKeyword,\r\n      timeRange,\r\n      currentPage,\r\n      pageSize,\r\n      filteredEntries,\r\n      paginatedEntries,\r\n      loadLogInfo,\r\n      loadLogEntries,\r\n      handleSearch,\r\n      handleTimeRangeChange,\r\n      clearFilters,\r\n      exportToCSV,\r\n      handleSizeChange,\r\n      handleCurrentChange,\r\n      formatFileSize,\r\n      formatDate,\r\n      formatTimestamp,\r\n      timeRangeLimit,\r\n      setFullTimeRange\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.analysis-container {\r\n  padding: 0;\r\n  height: 100vh;\r\n  overflow: hidden;\r\n  background-color: #f5f7fa;\r\n}\r\n\r\n.analysis-card {\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  border-radius: 0;\r\n  border: none;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 12px 20px;\r\n  background-color: white;\r\n  border-bottom: 1px solid #e6e6e6;\r\n}\r\n\r\n.header-left {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 12px;\r\n}\r\n\r\n.title {\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n}\r\n\r\n.log-info {\r\n  margin: 10px 20px;\r\n}\r\n\r\n.log-info .el-descriptions {\r\n  font-size: 12px;\r\n}\r\n\r\n.log-info .el-descriptions__label {\r\n  font-size: 11px;\r\n  font-weight: 600;\r\n}\r\n\r\n.search-section {\r\n  display: flex;\r\n  align-items: center;\r\n  margin: 0 20px 10px 20px;\r\n  padding: 10px 12px;\r\n  background-color: white;\r\n  border-radius: 6px;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n}\r\n\r\n.entries-section {\r\n  flex: 1;\r\n  display: flex;\r\n  flex-direction: column;\r\n  overflow: hidden;\r\n  margin: 0 20px 10px 20px;\r\n  background-color: white;\r\n  border-radius: 6px;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n}\r\n\r\n.table-container {\r\n  flex: 1;\r\n  overflow: hidden;\r\n  padding: 0 20px;\r\n}\r\n\r\n.section-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 10px;\r\n  padding: 15px 20px 0 20px;\r\n}\r\n\r\n.section-header h3 {\r\n  margin: 0;\r\n  color: #303133;\r\n  font-size: 14px;\r\n}\r\n\r\n.loading-section,\r\n.error-section {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 400px;\r\n  background-color: #fafafa;\r\n  border-radius: 6px;\r\n  margin: 20px;\r\n}\r\n\r\n.pagination-wrapper {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin: 10px 20px;\r\n  padding: 8px 0;\r\n  background-color: white;\r\n  border-radius: 6px;\r\n  box-shadow: 0 2px 4px rgba(0,0,0,0.1);\r\n}\r\n</style> ","import { render } from \"./Analysis.vue?vue&type=template&id=418d4a57&scoped=true\"\nimport script from \"./Analysis.vue?vue&type=script&lang=js\"\nexport * from \"./Analysis.vue?vue&type=script&lang=js\"\n\nimport \"./Analysis.vue?vue&type=style&index=0&id=418d4a57&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-418d4a57\"]])\n\nexport default __exports__"],"names":["class","header","logInfo","type","size","original_name","exportToCSV","column","border","label","device_id","formatFileSize","formatDate","upload_time","parse_time","uploader_id","searchKeyword","placeholder","style","clearable","handleSearch","prefix","timeRange","format","handleTimeRangeChange","formatTimestamp","timeRangeLimit","setFullTimeRange","clearFilters","filteredEntries","length","description","logEntries","data","paginatedEntries","height","stripe","prop","width","sortable","default","row","timestamp","loading","currentPage","pageSize","total","layout","handleSizeChange","handleCurrentChange","name","components","Search","Download","ArrowLeft","setup","store","route","router","logId","params","id","value","timestamps","map","entry","Date","minTime","Math","min","maxTime","max","console","log","toISOString","entriesCount","entries","filter","explanation","toLowerCase","includes","error_code","startTime","endTime","entryTime","start","end","slice","loadLogInfo","async","response","dispatch","page","limit","logs","find","l","error","go","loadLogEntries","headers","csvContent","join","param1","param2","param3","param4","replace","blob","Blob","link","document","createElement","href","URL","createObjectURL","download","click","revokeObjectURL","success","bytes","k","sizes","i","floor","parseFloat","pow","toFixed","dateString","toLocaleString","date","year","getFullYear","month","String","getMonth","padStart","day","getDate","hours","getHours","minutes","getMinutes","seconds","getSeconds","__exports__","render"],"sourceRoot":""}