{"version":3,"file":"js/95.9f4868db.js","mappings":"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","sources":["webpack://logtool-frontend/./src/views/Feedback.vue","webpack://logtool-frontend/./src/views/Feedback.vue?613e","webpack://logtool-frontend/./src/views/FeedbackDetail.vue","webpack://logtool-frontend/./src/views/FeedbackDetail.vue?b6de","webpack://logtool-frontend/./src/views/FeedbackList.vue","webpack://logtool-frontend/./src/views/FeedbackList.vue?f863"],"sourcesContent":["<template>\r\n  <div class=\"card\">\r\n    <div class=\"card-title\">缺陷提交</div>\r\n    <el-form :model=\"form\" :rules=\"rules\" ref=\"formRef\" label-width=\"90px\">\r\n      <el-form-item label=\"标题\" prop=\"title\">\r\n        <el-input\r\n          v-model=\"form.title\"\r\n          type=\"text\"\r\n          placeholder=\"请填写问题标题（100字以内）\"\r\n          maxlength=\"100\"\r\n          show-word-limit\r\n        />\r\n      </el-form-item>\r\n      <el-form-item label=\"描述\" prop=\"description\">\r\n        <el-input\r\n          v-model=\"form.description\"\r\n          type=\"textarea\"\r\n          :rows=\"5\"\r\n          placeholder=\"请描述遇到的问题（500字以内）\"\r\n          maxlength=\"500\"\r\n          show-word-limit\r\n          @input=\"onDescInput\"\r\n        />\r\n      </el-form-item>\r\n      <el-form-item label=\"图片\" prop=\"images\">\r\n        <div class=\"uploader\">\r\n          <el-upload\r\n            :class=\"['upload', { 'no-trigger': fileList.length >= 3 }]\"\r\n            action=\"#\"\r\n            :auto-upload=\"false\"\r\n            :limit=\"3\"\r\n            :on-exceed=\"onExceed\"\r\n            :before-upload=\"beforeUpload\"\r\n            :http-request=\"noop\"\r\n            list-type=\"picture-card\"\r\n            :file-list=\"fileList\"\r\n            :on-remove=\"handleRemove\"\r\n            :on-change=\"handleChange\"\r\n          >\r\n            <el-icon v-if=\"fileList.length < 3\"><Plus /></el-icon>\r\n          </el-upload>\r\n          <div class=\"tips\">支持 JPG/PNG/WebP，单张≤2MB，最多3张</div>\r\n        </div>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" :loading=\"submitting\" @click=\"submit\">提交</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n  <div class=\"card\" style=\"margin-top: 24px;\">\r\n    <div class=\"card-title\">反馈列表</div>\r\n    <FeedbackList @view=\"openDetail\" />\r\n  </div>\r\n  <el-dialog v-model=\"dialogImageVisible\">\r\n    <img :src=\"dialogImageUrl\" alt=\"预览\" style=\"width: 100%\" />\r\n  </el-dialog>\r\n  <el-dialog v-model=\"detailDialogVisible\" title=\"反馈详情\" width=\"60%\">\r\n    <FeedbackDetail v-if=\"selectedId\" :id=\"selectedId\" />\r\n  </el-dialog>\r\n </template>\r\n\r\n<script>\r\nimport api from '../api'\r\nimport { Plus } from '@element-plus/icons-vue'\r\nimport { ref, reactive } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\nimport FeedbackList from './FeedbackList.vue'\r\nimport FeedbackDetail from './FeedbackDetail.vue'\r\n\r\nexport default {\r\n  name: 'Feedback',\r\n  components: { Plus, FeedbackList, FeedbackDetail },\r\n  setup() {\r\n    const form = reactive({ title: '', description: '' })\r\n    const rules = {\r\n      title: [\r\n        { required: true, message: '请填写标题', trigger: 'blur' },\r\n        { min: 1, max: 100, message: '标题需在100字以内', trigger: 'change' }\r\n      ],\r\n      description: [\r\n        { required: true, message: '请填写描述', trigger: 'blur' },\r\n        { min: 1, max: 500, message: '描述需在500字以内', trigger: 'change' }\r\n      ]\r\n    }\r\n    const formRef = ref(null)\r\n    const fileList = ref([])\r\n    const submitting = ref(false)\r\n    const dialogImageVisible = ref(false)\r\n    const dialogImageUrl = ref('')\r\n    const detailDialogVisible = ref(false)\r\n    const selectedId = ref(null)\r\n\r\n    const onDescInput = (val) => {\r\n      if (val && val.length > 500) form.description = val.slice(0, 500)\r\n    }\r\n\r\n    const beforeUpload = (file) => {\r\n      const okType = ['image/jpeg', 'image/png', 'image/webp'].includes(file.type)\r\n      if (!okType) {\r\n        ElMessage.error('仅支持 JPG/PNG/WebP 图片')\r\n        return false\r\n      }\r\n      const okSize = file.size <= 2 * 1024 * 1024\r\n      if (!okSize) {\r\n        ElMessage.error('图片大小不能超过 2MB')\r\n        return false\r\n      }\r\n      return true\r\n    }\r\n\r\n    const handleChange = (file, files) => {\r\n      fileList.value = files.slice(0, 3)\r\n    }\r\n\r\n    const handleRemove = (file, files) => {\r\n      fileList.value = files\r\n    }\r\n\r\n    const noop = () => {}\r\n\r\n    const onExceed = () => ElMessage.error('最多上传3张图片')\r\n\r\n    const submit = async () => {\r\n      if (submitting.value) return\r\n      await formRef.value.validate()\r\n      const fd = new FormData()\r\n      fd.append('title', form.title.trim())\r\n      fd.append('description', form.description.trim())\r\n      fileList.value.forEach(f => fd.append('images', f.raw))\r\n      submitting.value = true\r\n      try {\r\n        await api.feedback.create(fd)\r\n        ElMessage.success('提交成功，感谢反馈！')\r\n        form.title = ''\r\n        form.description = ''\r\n        fileList.value = []\r\n      } catch (e) {\r\n        // 错误统一由拦截器处理\r\n      } finally {\r\n        submitting.value = false\r\n      }\r\n    }\r\n\r\n    const openDetail = (id) => { selectedId.value = id; detailDialogVisible.value = true }\r\n\r\n    return { form, rules, formRef, fileList, submitting, submit, beforeUpload, handleRemove, handleChange, onDescInput, dialogImageVisible, dialogImageUrl, noop, onExceed, detailDialogVisible, selectedId, openDetail }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.card { background: #fff; padding: 20px; border-radius: 8px; }\r\n.card-title { font-weight: 600; margin-bottom: 12px; }\r\n.uploader { display: flex; flex-direction: column; gap: 8px; }\r\n.tips { color: #888; font-size: 12px; }\r\n.no-trigger :deep(.el-upload--picture-card) { display: none; }\r\n</style>\r\n\r\n\r\n","import { render } from \"./Feedback.vue?vue&type=template&id=71a2c4b9&scoped=true\"\nimport script from \"./Feedback.vue?vue&type=script&lang=js\"\nexport * from \"./Feedback.vue?vue&type=script&lang=js\"\n\nimport \"./Feedback.vue?vue&type=style&index=0&id=71a2c4b9&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-71a2c4b9\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"card\" v-if=\"detail\">\r\n    <div class=\"header\">\r\n      <h3>{{ detail.title }}</h3>\r\n      <el-tag :type=\"statusType(detail.status)\">{{ statusText(detail.status) }}</el-tag>\r\n    </div>\r\n    <div class=\"meta\">提交时间：{{ formatTime(detail.created_at) }}</div>\r\n    <div class=\"desc\" v-text=\"detail.description\"></div>\r\n    <div class=\"images\" v-if=\"detail.images && detail.images.length\">\r\n      <el-image v-for=\"img in detail.images\" :key=\"img.id\" :src=\"toAbs(img.url)\" :preview-src-list=\"detail.images.map(i=>toAbs(i.url))\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '../api'\r\nimport { ref, onMounted, watch } from 'vue'\r\n\r\nexport default {\r\n  name: 'FeedbackDetail',\r\n  props: { id: { type: Number, required: true } },\r\n  setup(props) {\r\n    const detail = ref(null)\r\n    const fetchDetail = async () => {\r\n      const { data } = await api.feedback.getDetail(props.id)\r\n      detail.value = data\r\n    }\r\n    const statusText = (s) => ({ open: '待处理', in_progress: '处理中', resolved: '已解决' }[s] || s)\r\n    const statusType = (s) => ({ open: 'danger', in_progress: 'warning', resolved: 'success' }[s] || 'info')\r\n    const formatTime = (t) => new Date(t).toLocaleString()\r\n    const toAbs = (u) => {\r\n      if (!u) return ''\r\n      if (u.startsWith('http')) return u\r\n      const backend = window.location.origin.replace(':8080', ':3000')\r\n      return u.startsWith('/') ? backend + u : backend + '/' + u\r\n    }\r\n    onMounted(fetchDetail)\r\n    watch(() => props.id, fetchDetail)\r\n    return { detail, statusText, statusType, formatTime, toAbs }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.card { background: #fff; padding: 20px; border-radius: 8px; }\r\n.header { display: flex; align-items: flex-start; gap: 12px; margin-bottom: 8px; }\r\n.header h3 { margin: 0; }\r\n.meta { color: #888; margin-bottom: 12px; }\r\n.desc { white-space: pre-wrap; margin-bottom: 12px; }\r\n.images { display: flex; gap: 12px; flex-wrap: wrap; }\r\n.images .el-image { width: 160px; height: 160px; object-fit: cover; }\r\n</style>\r\n\r\n\r\n","import { render } from \"./FeedbackDetail.vue?vue&type=template&id=4eb79019&scoped=true\"\nimport script from \"./FeedbackDetail.vue?vue&type=script&lang=js\"\nexport * from \"./FeedbackDetail.vue?vue&type=script&lang=js\"\n\nimport \"./FeedbackDetail.vue?vue&type=style&index=0&id=4eb79019&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4eb79019\"]])\n\nexport default __exports__","<template>\r\n  <div class=\"card\">\r\n    <div class=\"toolbar\">\r\n      <el-select v-model=\"status\" placeholder=\"全部状态\" clearable style=\"width: 180px\" @change=\"fetchData(1)\">\r\n        <el-option label=\"全部\" :value=\"''\" />\r\n        <el-option label=\"待处理\" value=\"open\" />\r\n        <el-option label=\"已解决\" value=\"resolved\" />\r\n      </el-select>\r\n    </div>\r\n    <el-table :data=\"items\" style=\"width: 100%\" :fit=\"false\">\r\n      <el-table-column prop=\"title\" label=\"问题标题\" min-width=\"450\">\r\n        <template #default=\"{ row }\">\r\n          <el-tooltip \r\n            :content=\"row.title\" \r\n            placement=\"top\" \r\n            effect=\"dark\" \r\n            popper-class=\"explanation-tooltip dark\" \r\n            :show-after=\"120\" \r\n            :teleported=\"true\"\r\n          >\r\n            <span class=\"explanation-ellipsis\">{{ row.title }}</span>\r\n          </el-tooltip>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"状态标签\" width=\"120\">\r\n        <template #default=\"{ row }\">\r\n          <el-tag :type=\"statusType(row.status)\">{{ statusText(row.status) }}</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"created_at\" label=\"提交时间\" width=\"180\">\r\n        <template #default=\"{ row }\">{{ formatTime(row.created_at) }}</template>\r\n      </el-table-column>\r\n      <el-table-column label=\"查看详情\" width=\"120\">\r\n        <template #default=\"{ row }\">\r\n          <el-button link type=\"primary\" @click=\"viewDetail(row.id)\">查看详情</el-button>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"状态修改\" width=\"160\">\r\n        <template #default=\"{ row }\">\r\n          <el-select :model-value=\"row.status\" size=\"small\" style=\"width: 120px\" @change=\"val => changeStatus(row.id, val)\">\r\n            <el-option label=\"待处理\" value=\"open\" />\r\n            <el-option label=\"已解决\" value=\"resolved\" />\r\n          </el-select>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <div class=\"pager\">\r\n      <el-pagination\r\n        background\r\n        layout=\"prev, pager, next, jumper\"\r\n        :total=\"total\"\r\n        :page-size=\"pageSize\"\r\n        :current-page=\"page\"\r\n        @current-change=\"fetchData\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '../api'\r\nimport { ref, onMounted } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\n\r\nexport default {\r\n  name: 'FeedbackList',\r\n  emits: ['view'],\r\n  setup(_, { emit }) {\r\n    const items = ref([])\r\n    const total = ref(0)\r\n    const page = ref(1)\r\n    const pageSize = ref(10)\r\n    const status = ref('')\r\n\r\n    const fetchData = async (p = page.value) => {\r\n      page.value = p\r\n      try {\r\n        const { data } = await api.feedback.getList({ page: page.value, pageSize: pageSize.value, status: status.value })\r\n        items.value = data.items\r\n        total.value = data.total\r\n      } catch (e) {}\r\n    }\r\n\r\n    const statusText = (s) => ({ open: '待处理', in_progress: '处理中', resolved: '已解决' }[s] || s)\r\n    const statusType = (s) => ({ open: 'danger', in_progress: 'warning', resolved: 'success' }[s] || 'info')\r\n    const formatTime = (t) => new Date(t).toLocaleString()\r\n\r\n    const viewDetail = (id) => {\r\n      emit('view', id)\r\n    }\r\n\r\n    const changeStatus = async (id, s) => {\r\n      try {\r\n        await api.feedback.updateStatus(id, s)\r\n        ElMessage.success('状态已更新')\r\n        fetchData()\r\n      } catch (e) {}\r\n    }\r\n\r\n    onMounted(() => fetchData(1))\r\n\r\n    return { items, total, page, pageSize, status, fetchData, statusText, statusType, formatTime, viewDetail, changeStatus }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.card { background: #fff; padding: 20px; border-radius: 8px; }\r\n.toolbar { margin-bottom: 12px; display: flex; gap: 8px; }\r\n.explanation-ellipsis { display:inline-block; width:100%; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }\r\n.explanation-tooltip { max-width: 60vw; white-space: normal; z-index: 3000; }\r\n.el-popper.explanation-tooltip { overflow: visible; }\r\n.explanation-tooltip.dark { background: rgba(0,0,0,0.85); color: #fff; }\r\n.thumbs { display: flex; gap: 8px; }\r\n.thumbs .el-image { width: 60px; height: 60px; border-radius: 4px; }\r\n.pager { margin-top: 12px; display: flex; justify-content: flex-end; }\r\n</style>\r\n\r\n\r\n","import { render } from \"./FeedbackList.vue?vue&type=template&id=b4a45354&scoped=true\"\nimport script from \"./FeedbackList.vue?vue&type=script&lang=js\"\nexport * from \"./FeedbackList.vue?vue&type=script&lang=js\"\n\nimport \"./FeedbackList.vue?vue&type=style&index=0&id=b4a45354&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b4a45354\"]])\n\nexport default __exports__"],"names":["class","style","model","form","rules","ref","label","prop","title","type","placeholder","maxlength","description","rows","onDescInput","fileList","length","action","limit","onExceed","beforeUpload","noop","handleRemove","handleChange","loading","submitting","submit","openDetail","dialogImageVisible","src","dialogImageUrl","alt","detailDialogVisible","width","id","selectedId","name","components","Plus","FeedbackList","FeedbackDetail","setup","required","message","trigger","min","max","formRef","val","slice","file","okType","includes","error","okSize","size","files","value","async","validate","fd","FormData","append","trim","forEach","f","raw","api","feedback","create","success","e","__exports__","render","detail","statusType","status","statusText","formatTime","created_at","images","img","key","toAbs","url","map","i","props","Number","fetchDetail","data","getDetail","s","open","in_progress","resolved","t","Date","toLocaleString","u","startsWith","backend","window","location","origin","replace","clearable","fetchData","items","fit","default","row","content","placement","effect","teleported","link","viewDetail","changeStatus","background","layout","total","pageSize","page","emits","_","emit","p","getList","updateStatus"],"sourceRoot":""}