{"version":3,"file":"js/783.5cb2c24c.js","mappings":"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","sources":["webpack://logtool-frontend/./src/views/FeedbackList.vue","webpack://logtool-frontend/./src/views/FeedbackList.vue?f863"],"sourcesContent":["<template>\r\n  <div class=\"card\">\r\n    <div class=\"toolbar\">\r\n      <el-select v-model=\"status\" placeholder=\"全部状态\" clearable style=\"width: 180px\" @change=\"fetchData(1)\">\r\n        <el-option label=\"全部\" :value=\"''\" />\r\n        <el-option label=\"待处理\" value=\"open\" />\r\n        <el-option label=\"已解决\" value=\"resolved\" />\r\n      </el-select>\r\n    </div>\r\n    <el-table :data=\"items\" style=\"width: 100%\" :fit=\"false\">\r\n      <el-table-column prop=\"title\" label=\"问题标题\" min-width=\"450\">\r\n        <template #default=\"{ row }\">\r\n          <el-tooltip \r\n            :content=\"row.title\" \r\n            placement=\"top\" \r\n            effect=\"dark\" \r\n            popper-class=\"explanation-tooltip dark\" \r\n            :show-after=\"120\" \r\n            :teleported=\"true\"\r\n          >\r\n            <span class=\"explanation-ellipsis\">{{ row.title }}</span>\r\n          </el-tooltip>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"状态标签\" width=\"120\">\r\n        <template #default=\"{ row }\">\r\n          <el-tag :type=\"statusType(row.status)\">{{ statusText(row.status) }}</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"created_at\" label=\"提交时间\" width=\"180\">\r\n        <template #default=\"{ row }\">{{ formatTime(row.created_at) }}</template>\r\n      </el-table-column>\r\n      <el-table-column label=\"查看详情\" width=\"120\">\r\n        <template #default=\"{ row }\">\r\n          <el-button link type=\"primary\" @click=\"viewDetail(row.id)\">查看详情</el-button>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"状态修改\" width=\"160\">\r\n        <template #default=\"{ row }\">\r\n          <el-select :model-value=\"row.status\" size=\"small\" style=\"width: 120px\" @change=\"val => changeStatus(row.id, val)\">\r\n            <el-option label=\"待处理\" value=\"open\" />\r\n            <el-option label=\"已解决\" value=\"resolved\" />\r\n          </el-select>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <div class=\"pager\">\r\n      <el-pagination\r\n        background\r\n        layout=\"prev, pager, next, jumper\"\r\n        :total=\"total\"\r\n        :page-size=\"pageSize\"\r\n        :current-page=\"page\"\r\n        @current-change=\"fetchData\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from '../api'\r\nimport { ref, onMounted } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\n\r\nexport default {\r\n  name: 'FeedbackList',\r\n  emits: ['view'],\r\n  setup(_, { emit }) {\r\n    const items = ref([])\r\n    const total = ref(0)\r\n    const page = ref(1)\r\n    const pageSize = ref(10)\r\n    const status = ref('')\r\n\r\n    const fetchData = async (p = page.value) => {\r\n      page.value = p\r\n      try {\r\n        const { data } = await api.feedback.getList({ page: page.value, pageSize: pageSize.value, status: status.value })\r\n        items.value = data.items\r\n        total.value = data.total\r\n      } catch (e) {}\r\n    }\r\n\r\n    const statusText = (s) => ({ open: '待处理', in_progress: '处理中', resolved: '已解决' }[s] || s)\r\n    const statusType = (s) => ({ open: 'danger', in_progress: 'warning', resolved: 'success' }[s] || 'info')\r\n    const formatTime = (t) => new Date(t).toLocaleString()\r\n\r\n    const viewDetail = (id) => {\r\n      emit('view', id)\r\n    }\r\n\r\n    const changeStatus = async (id, s) => {\r\n      try {\r\n        await api.feedback.updateStatus(id, s)\r\n        ElMessage.success('状态已更新')\r\n        fetchData()\r\n      } catch (e) {}\r\n    }\r\n\r\n    onMounted(() => fetchData(1))\r\n\r\n    return { items, total, page, pageSize, status, fetchData, statusText, statusType, formatTime, viewDetail, changeStatus }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.card { background: #fff; padding: 20px; border-radius: 8px; }\r\n.toolbar { margin-bottom: 12px; display: flex; gap: 8px; }\r\n.explanation-ellipsis { display:inline-block; width:100%; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }\r\n.explanation-tooltip { max-width: 60vw; white-space: normal; z-index: 3000; }\r\n.el-popper.explanation-tooltip { overflow: visible; }\r\n.explanation-tooltip.dark { background: rgba(0,0,0,0.85); color: #fff; }\r\n.thumbs { display: flex; gap: 8px; }\r\n.thumbs .el-image { width: 60px; height: 60px; border-radius: 4px; }\r\n.pager { margin-top: 12px; display: flex; justify-content: flex-end; }\r\n</style>\r\n\r\n\r\n","import { render } from \"./FeedbackList.vue?vue&type=template&id=b4a45354&scoped=true\"\nimport script from \"./FeedbackList.vue?vue&type=script&lang=js\"\nexport * from \"./FeedbackList.vue?vue&type=script&lang=js\"\n\nimport \"./FeedbackList.vue?vue&type=style&index=0&id=b4a45354&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b4a45354\"]])\n\nexport default __exports__"],"names":["class","status","placeholder","clearable","style","fetchData","label","value","data","items","fit","prop","default","row","content","title","placement","effect","teleported","width","type","statusType","statusText","formatTime","created_at","link","viewDetail","id","size","val","changeStatus","background","layout","total","pageSize","page","name","emits","setup","_","emit","async","p","api","feedback","getList","e","s","open","in_progress","resolved","t","Date","toLocaleString","updateStatus","success","__exports__","render"],"sourceRoot":""}