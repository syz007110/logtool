"use strict";(self["webpackChunklogtool_frontend"]=self["webpackChunklogtool_frontend"]||[]).push([[783],{8783:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var l=a(641),s=a(33);const o={class:"card"},n={class:"toolbar"},u={class:"explanation-ellipsis"},i={class:"pager"};function r(e,t,a,r,d,p){const c=(0,l.g2)("el-option"),b=(0,l.g2)("el-select"),g=(0,l.g2)("el-tooltip"),v=(0,l.g2)("el-table-column"),f=(0,l.g2)("el-tag"),k=(0,l.g2)("el-button"),h=(0,l.g2)("el-table"),w=(0,l.g2)("el-pagination");return(0,l.uX)(),(0,l.CE)("div",o,[(0,l.Lk)("div",n,[(0,l.bF)(b,{modelValue:r.status,"onUpdate:modelValue":t[0]||(t[0]=e=>r.status=e),placeholder:"全部状态",clearable:"",style:{width:"180px"},onChange:t[1]||(t[1]=e=>r.fetchData(1))},{default:(0,l.k6)(()=>[(0,l.bF)(c,{label:"全部",value:""}),(0,l.bF)(c,{label:"待处理",value:"open"}),(0,l.bF)(c,{label:"已解决",value:"resolved"})]),_:1},8,["modelValue"])]),(0,l.bF)(h,{data:r.items,style:{width:"100%"},fit:!1},{default:(0,l.k6)(()=>[(0,l.bF)(v,{prop:"title",label:"问题标题","min-width":"450"},{default:(0,l.k6)(({row:e})=>[(0,l.bF)(g,{content:e.title,placement:"top",effect:"dark","popper-class":"explanation-tooltip dark","show-after":120,teleported:!0},{default:(0,l.k6)(()=>[(0,l.Lk)("span",u,(0,s.v_)(e.title),1)]),_:2},1032,["content"])]),_:1}),(0,l.bF)(v,{label:"状态标签",width:"120"},{default:(0,l.k6)(({row:e})=>[(0,l.bF)(f,{type:r.statusType(e.status)},{default:(0,l.k6)(()=>[(0,l.eW)((0,s.v_)(r.statusText(e.status)),1)]),_:2},1032,["type"])]),_:1}),(0,l.bF)(v,{prop:"created_at",label:"提交时间",width:"180"},{default:(0,l.k6)(({row:e})=>[(0,l.eW)((0,s.v_)(r.formatTime(e.created_at)),1)]),_:1}),(0,l.bF)(v,{label:"查看详情",width:"120"},{default:(0,l.k6)(({row:e})=>[(0,l.bF)(k,{link:"",type:"primary",onClick:t=>r.viewDetail(e.id)},{default:(0,l.k6)(()=>t[2]||(t[2]=[(0,l.eW)("查看详情")])),_:2,__:[2]},1032,["onClick"])]),_:1}),(0,l.bF)(v,{label:"状态修改",width:"160"},{default:(0,l.k6)(({row:e})=>[(0,l.bF)(b,{"model-value":e.status,size:"small",style:{width:"120px"},onChange:t=>r.changeStatus(e.id,t)},{default:(0,l.k6)(()=>[(0,l.bF)(c,{label:"待处理",value:"open"}),(0,l.bF)(c,{label:"已解决",value:"resolved"})]),_:2},1032,["model-value","onChange"])]),_:1})]),_:1},8,["data"]),(0,l.Lk)("div",i,[(0,l.bF)(w,{background:"",layout:"prev, pager, next, jumper",total:r.total,"page-size":r.pageSize,"current-page":r.page,onCurrentChange:r.fetchData},null,8,["total","page-size","current-page","onCurrentChange"])])])}var d=a(5495),p=a(953),c=a(163),b={name:"FeedbackList",emits:["view"],setup(e,{emit:t}){const a=(0,p.KR)([]),s=(0,p.KR)(0),o=(0,p.KR)(1),n=(0,p.KR)(10),u=(0,p.KR)(""),i=async(e=o.value)=>{o.value=e;try{const{data:e}=await d.A.feedback.getList({page:o.value,pageSize:n.value,status:u.value});a.value=e.items,s.value=e.total}catch(t){}},r=e=>({open:"待处理",in_progress:"处理中",resolved:"已解决"}[e]||e),b=e=>({open:"danger",in_progress:"warning",resolved:"success"}[e]||"info"),g=e=>new Date(e).toLocaleString(),v=e=>{t("view",e)},f=async(e,t)=>{try{await d.A.feedback.updateStatus(e,t),c.nk.success("状态已更新"),i()}catch(a){}};return(0,l.sV)(()=>i(1)),{items:a,total:s,page:o,pageSize:n,status:u,fetchData:i,statusText:r,statusType:b,formatTime:g,viewDetail:v,changeStatus:f}}},g=a(6262);const v=(0,g.A)(b,[["render",r],["__scopeId","data-v-b4a45354"]]);var f=v}}]);
//# sourceMappingURL=783.5cb2c24c.js.map