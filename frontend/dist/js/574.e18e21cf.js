"use strict";(self["webpackChunklogtool_frontend"]=self["webpackChunklogtool_frontend"]||[]).push([[574],{6574:function(e,r,l){l.r(r),l.d(r,{default:function(){return k}});var a=l(641),o=l(33);const t={class:"error-codes-container"},d={class:"action-bar"},u={class:"search-section"},s={class:"action-section"},n={class:"pagination-wrapper"},p={class:"dialog-footer"};function i(e,r,l,i,m,b){const _=(0,a.g2)("Search"),F=(0,a.g2)("el-icon"),g=(0,a.g2)("el-input"),c=(0,a.g2)("Plus"),h=(0,a.g2)("el-button"),f=(0,a.g2)("el-table-column"),k=(0,a.g2)("el-table"),C=(0,a.g2)("el-pagination"),v=(0,a.g2)("el-card"),V=(0,a.g2)("el-option"),w=(0,a.g2)("el-select"),y=(0,a.g2)("el-form-item"),U=(0,a.g2)("el-col"),x=(0,a.g2)("el-row"),E=(0,a.g2)("el-radio"),W=(0,a.g2)("el-radio-group"),A=(0,a.g2)("el-form"),R=(0,a.g2)("el-dialog"),S=(0,a.gN)("loading");return(0,a.uX)(),(0,a.CE)("div",t,[(0,a.Lk)("div",d,[(0,a.Lk)("div",u,[(0,a.bF)(g,{modelValue:i.searchQuery,"onUpdate:modelValue":r[0]||(r[0]=e=>i.searchQuery=e),placeholder:"搜索故障码...",style:{width:"300px"},clearable:"",onInput:i.handleSearch},{prefix:(0,a.k6)(()=>[(0,a.bF)(F,null,{default:(0,a.k6)(()=>[(0,a.bF)(_)]),_:1})]),_:1},8,["modelValue","onInput"])]),(0,a.Lk)("div",s,[i.canCreate?((0,a.uX)(),(0,a.Wv)(h,{key:0,type:"primary",onClick:r[1]||(r[1]=e=>i.showAddDialog=!0)},{default:(0,a.k6)(()=>[(0,a.bF)(F,null,{default:(0,a.k6)(()=>[(0,a.bF)(c)]),_:1}),r[28]||(r[28]=(0,a.eW)(" 添加故障码 "))]),_:1,__:[28]})):(0,a.Q3)("",!0)])]),(0,a.bF)(v,{class:"list-card"},{default:(0,a.k6)(()=>[(0,a.bo)(((0,a.uX)(),(0,a.Wv)(k,{data:i.errorCodes,loading:i.loading,style:{width:"100%"}},{default:(0,a.k6)(()=>[(0,a.bF)(f,{prop:"subsystem",label:"子系统",width:"80","show-overflow-tooltip":""}),(0,a.bF)(f,{prop:"code",label:"故障码",width:"120","show-overflow-tooltip":""}),(0,a.bF)(f,{label:"提示信息","show-overflow-tooltip":""},{default:(0,a.k6)(({row:e})=>[(0,a.eW)((0,o.v_)([e.user_hint,e.operation].filter(Boolean).join(", ")),1)]),_:1}),(0,a.bF)(f,{prop:"param1",label:"参数1","show-overflow-tooltip":""}),(0,a.bF)(f,{prop:"param2",label:"参数2","show-overflow-tooltip":""}),(0,a.bF)(f,{prop:"param3",label:"参数3","show-overflow-tooltip":""}),(0,a.bF)(f,{prop:"param4",label:"参数4","show-overflow-tooltip":""}),(0,a.bF)(f,{prop:"category",label:"分类",width:"100","show-overflow-tooltip":""}),i.canUpdate||i.canDelete?((0,a.uX)(),(0,a.Wv)(f,{key:0,label:"操作",width:"180"},{default:(0,a.k6)(({row:e})=>[i.canUpdate?((0,a.uX)(),(0,a.Wv)(h,{key:0,type:"primary",size:"small",onClick:r=>i.handleEdit(e)},{default:(0,a.k6)(()=>r[29]||(r[29]=[(0,a.eW)(" 编辑 ")])),_:2,__:[29]},1032,["onClick"])):(0,a.Q3)("",!0),i.canDelete?((0,a.uX)(),(0,a.Wv)(h,{key:1,type:"danger",size:"small",onClick:r=>i.handleDelete(e)},{default:(0,a.k6)(()=>r[30]||(r[30]=[(0,a.eW)(" 删除 ")])),_:2,__:[30]},1032,["onClick"])):(0,a.Q3)("",!0)]),_:1})):(0,a.Q3)("",!0)]),_:1},8,["data","loading"])),[[S,i.loading]]),(0,a.Lk)("div",n,[(0,a.bF)(C,{"current-page":i.currentPage,"page-size":i.pageSize,"page-sizes":[10,20,50,100],total:i.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:i.handleSizeChange,onCurrentChange:i.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1}),(0,a.bF)(R,{modelValue:i.showAddDialog,"onUpdate:modelValue":r[27]||(r[27]=e=>i.showAddDialog=e),title:i.editingErrorCode?"编辑故障码":"添加故障码",width:"800px","close-on-click-modal":!1},{footer:(0,a.k6)(()=>[(0,a.Lk)("span",p,[(0,a.bF)(h,{onClick:r[26]||(r[26]=e=>i.showAddDialog=!1)},{default:(0,a.k6)(()=>r[41]||(r[41]=[(0,a.eW)("取消")])),_:1,__:[41]}),(0,a.bF)(h,{type:"primary",onClick:i.handleSave,loading:i.saving},{default:(0,a.k6)(()=>[(0,a.eW)((0,o.v_)(i.editingErrorCode?"更新":"创建"),1)]),_:1},8,["onClick","loading"])])]),default:(0,a.k6)(()=>[(0,a.bF)(A,{ref:"errorCodeFormRef",model:i.errorCodeForm,rules:i.rules,"label-width":"140px",class:"error-code-form"},{default:(0,a.k6)(()=>[(0,a.bF)(x,{gutter:20},{default:(0,a.k6)(()=>[(0,a.bF)(U,{span:12},{default:(0,a.k6)(()=>[(0,a.bF)(y,{label:"子系统",prop:"subsystem"},{default:(0,a.k6)(()=>[(0,a.bF)(w,{modelValue:i.errorCodeForm.subsystem,"onUpdate:modelValue":r[2]||(r[2]=e=>i.errorCodeForm.subsystem=e),placeholder:"请选择子系统"},{default:(0,a.k6)(()=>[(0,a.bF)(V,{label:"01：运动控制软件",value:"1"}),(0,a.bF)(V,{label:"02：人机交互软件",value:"2"}),(0,a.bF)(V,{label:"03：医生控制台软件",value:"3"}),(0,a.bF)(V,{label:"04：手术台车软件",value:"4"}),(0,a.bF)(V,{label:"05：驱动器软件",value:"5"}),(0,a.bF)(V,{label:"06：图像软件",value:"6"}),(0,a.bF)(V,{label:"07：工具工厂软件",value:"7"}),(0,a.bF)(V,{label:"08：远程运动控制软件",value:"8"}),(0,a.bF)(V,{label:"09：远程医生控制台软件",value:"9"}),(0,a.bF)(V,{label:"0A：远程驱动器软件",value:"A"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,a.bF)(U,{span:12},{default:(0,a.k6)(()=>[(0,a.bF)(y,{label:"故障码",prop:"code"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{modelValue:i.errorCodeForm.code,"onUpdate:modelValue":r[3]||(r[3]=e=>i.errorCodeForm.code=e),placeholder:"格式：0X010A",onInput:i.handleCodeChange},null,8,["modelValue","onInput"])]),_:1})]),_:1})]),_:1}),(0,a.bF)(x,{gutter:20},{default:(0,a.k6)(()=>[(0,a.bF)(U,{span:12},{default:(0,a.k6)(()=>[(0,a.bF)(y,{label:"是否轴错误",prop:"is_axis_error"},{default:(0,a.k6)(()=>[(0,a.bF)(W,{modelValue:i.errorCodeForm.is_axis_error,"onUpdate:modelValue":r[4]||(r[4]=e=>i.errorCodeForm.is_axis_error=e)},{default:(0,a.k6)(()=>[(0,a.bF)(E,{label:!0},{default:(0,a.k6)(()=>r[31]||(r[31]=[(0,a.eW)("TRUE")])),_:1,__:[31]}),(0,a.bF)(E,{label:!1},{default:(0,a.k6)(()=>r[32]||(r[32]=[(0,a.eW)("FALSE")])),_:1,__:[32]})]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,a.bF)(U,{span:12},{default:(0,a.k6)(()=>[(0,a.bF)(y,{label:"是否臂错误",prop:"is_arm_error"},{default:(0,a.k6)(()=>[(0,a.bF)(W,{modelValue:i.errorCodeForm.is_arm_error,"onUpdate:modelValue":r[5]||(r[5]=e=>i.errorCodeForm.is_arm_error=e)},{default:(0,a.k6)(()=>[(0,a.bF)(E,{label:!0},{default:(0,a.k6)(()=>r[33]||(r[33]=[(0,a.eW)("TRUE")])),_:1,__:[33]}),(0,a.bF)(E,{label:!1},{default:(0,a.k6)(()=>r[34]||(r[34]=[(0,a.eW)("FALSE")])),_:1,__:[34]})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,a.bF)(y,{label:"精简提示信息(中文)",prop:"short_message"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{modelValue:i.errorCodeForm.short_message,"onUpdate:modelValue":r[6]||(r[6]=e=>i.errorCodeForm.short_message=e),type:"textarea",rows:2},null,8,["modelValue"])]),_:1}),(0,a.bF)(y,{label:"精简提示信息(英文)",prop:"short_message_en"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{modelValue:i.errorCodeForm.short_message_en,"onUpdate:modelValue":r[7]||(r[7]=e=>i.errorCodeForm.short_message_en=e),type:"textarea",rows:2},null,8,["modelValue"])]),_:1}),(0,a.bF)(y,{label:"给用户的提示信息(中文)",prop:"user_hint"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{modelValue:i.errorCodeForm.user_hint,"onUpdate:modelValue":r[8]||(r[8]=e=>i.errorCodeForm.user_hint=e),type:"textarea",rows:2},null,8,["modelValue"])]),_:1}),(0,a.bF)(y,{label:"给用户的提示信息(英文)",prop:"user_hint_en"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{modelValue:i.errorCodeForm.user_hint_en,"onUpdate:modelValue":r[9]||(r[9]=e=>i.errorCodeForm.user_hint_en=e),type:"textarea",rows:2},null,8,["modelValue"])]),_:1}),(0,a.bF)(y,{label:"操作信息(中文)",prop:"operation"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{modelValue:i.errorCodeForm.operation,"onUpdate:modelValue":r[10]||(r[10]=e=>i.errorCodeForm.operation=e),type:"textarea",rows:2},null,8,["modelValue"])]),_:1}),(0,a.bF)(y,{label:"操作信息(英文)",prop:"operation_en"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{modelValue:i.errorCodeForm.operation_en,"onUpdate:modelValue":r[11]||(r[11]=e=>i.errorCodeForm.operation_en=e),type:"textarea",rows:2},null,8,["modelValue"])]),_:1}),(0,a.bF)(y,{label:"详细信息",prop:"detail"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{modelValue:i.errorCodeForm.detail,"onUpdate:modelValue":r[12]||(r[12]=e=>i.errorCodeForm.detail=e),type:"textarea",rows:3},null,8,["modelValue"])]),_:1}),(0,a.bF)(y,{label:"检测方法",prop:"method"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{modelValue:i.errorCodeForm.method,"onUpdate:modelValue":r[13]||(r[13]=e=>i.errorCodeForm.method=e),type:"textarea",rows:3},null,8,["modelValue"])]),_:1}),(0,a.bF)(x,{gutter:20},{default:(0,a.k6)(()=>[(0,a.bF)(U,{span:12},{default:(0,a.k6)(()=>[(0,a.bF)(y,{label:"参数1",prop:"param1"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{modelValue:i.errorCodeForm.param1,"onUpdate:modelValue":r[14]||(r[14]=e=>i.errorCodeForm.param1=e)},null,8,["modelValue"])]),_:1})]),_:1}),(0,a.bF)(U,{span:12},{default:(0,a.k6)(()=>[(0,a.bF)(y,{label:"参数2",prop:"param2"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{modelValue:i.errorCodeForm.param2,"onUpdate:modelValue":r[15]||(r[15]=e=>i.errorCodeForm.param2=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,a.bF)(x,{gutter:20},{default:(0,a.k6)(()=>[(0,a.bF)(U,{span:12},{default:(0,a.k6)(()=>[(0,a.bF)(y,{label:"参数3",prop:"param3"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{modelValue:i.errorCodeForm.param3,"onUpdate:modelValue":r[16]||(r[16]=e=>i.errorCodeForm.param3=e)},null,8,["modelValue"])]),_:1})]),_:1}),(0,a.bF)(U,{span:12},{default:(0,a.k6)(()=>[(0,a.bF)(y,{label:"参数4",prop:"param4"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{modelValue:i.errorCodeForm.param4,"onUpdate:modelValue":r[17]||(r[17]=e=>i.errorCodeForm.param4=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,a.bF)(x,{gutter:20},{default:(0,a.k6)(()=>[(0,a.bF)(U,{span:12},{default:(0,a.k6)(()=>[(0,a.bF)(y,{label:"故障分类",prop:"category"},{default:(0,a.k6)(()=>[(0,a.bF)(w,{modelValue:i.errorCodeForm.category,"onUpdate:modelValue":r[18]||(r[18]=e=>i.errorCodeForm.category=e),placeholder:"请选择分类"},{default:(0,a.k6)(()=>[(0,a.bF)(V,{label:"软件",value:"软件"}),(0,a.bF)(V,{label:"硬件",value:"硬件"}),(0,a.bF)(V,{label:"日志记录",value:"日志记录"}),(0,a.bF)(V,{label:"操作提示",value:"操作提示"}),(0,a.bF)(V,{label:"安全保护",value:"安全保护"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,a.bF)(U,{span:12},{default:(0,a.k6)(()=>[(0,a.bF)(y,{label:"故障等级",prop:"level"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{modelValue:i.errorCodeForm.level,"onUpdate:modelValue":r[19]||(r[19]=e=>i.errorCodeForm.level=e),readonly:"",placeholder:"根据故障码自动判断"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,a.bF)(x,{gutter:20},{default:(0,a.k6)(()=>[(0,a.bF)(U,{span:12},{default:(0,a.k6)(()=>[(0,a.bF)(y,{label:"处理措施",prop:"solution"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{value:i.getSolutionDisplay(i.errorCodeForm.solution),readonly:"",placeholder:"根据故障码自动判断"},null,8,["value"])]),_:1})]),_:1}),(0,a.bF)(U,{span:12},{default:(0,a.k6)(()=>[(0,a.bF)(y,{label:"技术排查方案",prop:"tech_solution"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{modelValue:i.errorCodeForm.tech_solution,"onUpdate:modelValue":r[20]||(r[20]=e=>i.errorCodeForm.tech_solution=e),type:"textarea",rows:2},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,a.bF)(y,{label:"解释",prop:"explanation"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{modelValue:i.errorCodeForm.explanation,"onUpdate:modelValue":r[21]||(r[21]=e=>i.errorCodeForm.explanation=e),type:"textarea",rows:3},null,8,["modelValue"])]),_:1}),(0,a.bF)(x,{gutter:20},{default:(0,a.k6)(()=>[(0,a.bF)(U,{span:8},{default:(0,a.k6)(()=>[(0,a.bF)(y,{label:"专家模式",prop:"for_expert"},{default:(0,a.k6)(()=>[(0,a.bF)(W,{modelValue:i.errorCodeForm.for_expert,"onUpdate:modelValue":r[22]||(r[22]=e=>i.errorCodeForm.for_expert=e)},{default:(0,a.k6)(()=>[(0,a.bF)(E,{label:!0},{default:(0,a.k6)(()=>r[35]||(r[35]=[(0,a.eW)("TRUE")])),_:1,__:[35]}),(0,a.bF)(E,{label:!1},{default:(0,a.k6)(()=>r[36]||(r[36]=[(0,a.eW)("FALSE")])),_:1,__:[36]})]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,a.bF)(U,{span:8},{default:(0,a.k6)(()=>[(0,a.bF)(y,{label:"初学者模式",prop:"for_novice"},{default:(0,a.k6)(()=>[(0,a.bF)(W,{modelValue:i.errorCodeForm.for_novice,"onUpdate:modelValue":r[23]||(r[23]=e=>i.errorCodeForm.for_novice=e)},{default:(0,a.k6)(()=>[(0,a.bF)(E,{label:!0},{default:(0,a.k6)(()=>r[37]||(r[37]=[(0,a.eW)("TRUE")])),_:1,__:[37]}),(0,a.bF)(E,{label:!1},{default:(0,a.k6)(()=>r[38]||(r[38]=[(0,a.eW)("FALSE")])),_:1,__:[38]})]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,a.bF)(U,{span:8},{default:(0,a.k6)(()=>[(0,a.bF)(y,{label:"相关日志",prop:"related_log"},{default:(0,a.k6)(()=>[(0,a.bF)(W,{modelValue:i.errorCodeForm.related_log,"onUpdate:modelValue":r[24]||(r[24]=e=>i.errorCodeForm.related_log=e)},{default:(0,a.k6)(()=>[(0,a.bF)(E,{label:!0},{default:(0,a.k6)(()=>r[39]||(r[39]=[(0,a.eW)("TRUE")])),_:1,__:[39]}),(0,a.bF)(E,{label:!1},{default:(0,a.k6)(()=>r[40]||(r[40]=[(0,a.eW)("FALSE")])),_:1,__:[40]})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,a.bF)(y,{label:"停止上报方法",prop:"stop_report"},{default:(0,a.k6)(()=>[(0,a.bF)(g,{modelValue:i.errorCodeForm.stop_report,"onUpdate:modelValue":r[25]||(r[25]=e=>i.errorCodeForm.stop_report=e)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}var m=l(953),b=l(6278),_=l(163),F=l(7918),g=l(8548),c=(l(5495),{name:"ErrorCodes",components:{Search:g.Search,Plus:g.Plus},setup(){const e=(0,b.Pj)(),r=(0,m.KR)(!1),l=(0,m.KR)(!1),o=(0,m.KR)(!1),t=(0,m.KR)(null),d=(0,m.KR)(""),u=(0,m.KR)(1),s=(0,m.KR)(10),n=(0,m.KR)(null),p=(0,m.Kh)({subsystem:"",code:"",is_axis_error:!1,is_arm_error:!1,short_message:"",short_message_en:"",user_hint:"",user_hint_en:"",operation:"",operation_en:"",detail:"",method:"",param1:"",param2:"",param3:"",param4:"",solution:"",for_expert:!0,for_novice:!0,related_log:!1,stop_report:"",level:"",tech_solution:"",explanation:"",category:""}),i=(0,a.EW)(()=>{const e={subsystem:[{required:!0,message:"请选择子系统",trigger:"change"}],code:[{required:!0,message:"请输入故障码",trigger:"blur"},{pattern:/^0X[0-9A-F]{3}[ABCDE]$/,message:"故障码格式不正确，必须以0X开头+16进制的故障码（最后一位表示等级分类）",trigger:"blur"}],detail:[{required:!0,message:"请输入详细信息",trigger:"blur"}],method:[{required:!0,message:"请输入检测方法",trigger:"blur"}],param1:[{required:!0,message:"请输入参数1",trigger:"blur"}],param2:[{required:!0,message:"请输入参数2",trigger:"blur"}],param3:[{required:!0,message:"请输入参数3",trigger:"blur"}],param4:[{required:!0,message:"请输入参数4",trigger:"blur"}],category:[{required:!0,message:"请选择故障分类",trigger:"change"}]},r=p.operation&&""!==p.operation.trim();e.short_message=[{required:!r,message:"精简提示信息和操作信息不能都为空",trigger:"blur"}],e.user_hint=[{required:!r,message:"用户提示信息和操作信息不能都为空",trigger:"blur"}],e.operation=[{required:!(p.short_message&&""!==p.short_message.trim())&&!(p.user_hint&&""!==p.user_hint.trim()),message:"精简提示信息、用户提示信息和操作信息至少需要填写两项",trigger:"blur"}];const l=p.operation_en&&""!==p.operation_en.trim();return e.short_message_en=[{required:!l,message:"英文精简提示信息和英文操作信息不能都为空",trigger:"blur"}],e.user_hint_en=[{required:!l,message:"英文用户提示信息和英文操作信息不能都为空",trigger:"blur"}],e.operation_en=[{required:!(p.short_message_en&&""!==p.short_message_en.trim())&&!(p.user_hint_en&&""!==p.user_hint_en.trim()),message:"英文精简提示信息、英文用户提示信息和英文操作信息至少需要填写两项",trigger:"blur"}],e}),g=e=>{if(!e)return{level:"无",solution:"tips"};const r=e.match(/^0X([0-9A-F]{3})([ABCDE])$/);if(!r)return{level:"无",solution:"tips"};const[,l,a]=r;let o="无";switch(a){case"A":o="高级";break;case"B":o="中级";break;case"C":o="低级";break;default:o="无";break}let t="tips";switch(a){case"A":t="recoverable";break;case"B":t="recoverable";break;case"C":t="ignorable";break;case"D":t="tips";break;case"E":t="log";break}return{level:o,solution:t}},c=()=>{const{level:e,solution:r}=g(p.code);p.level=e,p.solution=r},h=e=>{const r={recoverable:"可恢复故障",unrecoverable:"不可恢复故障",ignorable:"可忽略故障",tips:"提示信息",log:"日志记录"};return r[e]||e},f=(0,a.EW)(()=>e.getters["errorCodes/errorCodesList"]),k=(0,a.EW)(()=>e.getters["errorCodes/totalCount"]),C=(0,a.EW)(()=>"admin"===e.getters["auth/userRole"]||"expert"===e.getters["auth/userRole"]),v=(0,a.EW)(()=>"admin"===e.getters["auth/userRole"]||"expert"===e.getters["auth/userRole"]),V=(0,a.EW)(()=>"admin"===e.getters["auth/userRole"]||"expert"===e.getters["auth/userRole"]),w=async()=>{try{r.value=!0,await e.dispatch("errorCodes/fetchErrorCodes",{page:u.value,limit:s.value,keyword:d.value})}catch(l){_.nk.error("加载故障码失败")}finally{r.value=!1}},y=()=>{u.value=1,w()},U=e=>{s.value=e,u.value=1,w()},x=e=>{u.value=e,w()},E=()=>{Object.keys(p).forEach(e=>{"boolean"===typeof p[e]?p[e]="for_expert"===e||"for_novice"===e:p[e]=""}),t.value=null,n.value&&n.value.clearValidate()},W=()=>{E(),o.value=!0},A=e=>{t.value=e,Object.keys(p).forEach(r=>{void 0!==e[r]&&(p[r]=e[r])}),o.value=!0},R=async r=>{try{await F.s.confirm(`确定要删除故障码 "${r.code}" 吗？`,"删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await e.dispatch("errorCodes/deleteErrorCode",r.id),_.nk.success("删除成功"),w()}catch(l){"cancel"!==l&&_.nk.error("删除失败")}},S=async()=>{try{await n.value.validate(),l.value=!0,t.value?(await e.dispatch("errorCodes/updateErrorCode",{id:t.value.id,data:p}),_.nk.success("更新成功")):(await e.dispatch("errorCodes/createErrorCode",p),_.nk.success("创建成功")),o.value=!1,E(),w()}catch(r){r.response&&r.response.data&&r.response.data.errors?_.nk.error(r.response.data.errors.join(", ")):_.nk.error("保存失败")}finally{l.value=!1}};return(0,a.wB)([()=>p.short_message,()=>p.user_hint,()=>p.operation,()=>p.short_message_en,()=>p.user_hint_en,()=>p.operation_en],()=>{n.value&&n.value.clearValidate(["short_message","user_hint","operation","short_message_en","user_hint_en","operation_en"])}),(0,a.sV)(()=>{w()}),{loading:r,saving:l,showAddDialog:o,editingErrorCode:t,searchQuery:d,currentPage:u,pageSize:s,errorCodeFormRef:n,errorCodeForm:p,rules:i,errorCodes:f,total:k,canCreate:C,canUpdate:v,canDelete:V,handleSearch:y,handleSizeChange:U,handleCurrentChange:x,handleAdd:W,handleEdit:A,handleDelete:R,handleSave:S,handleCodeChange:c,getSolutionDisplay:h}}}),h=l(6262);const f=(0,h.A)(c,[["render",i],["__scopeId","data-v-8950c888"]]);var k=f}}]);
//# sourceMappingURL=574.e18e21cf.js.map