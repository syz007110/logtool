{"version":3,"file":"js/970.a10a02b2.js","mappings":"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","sources":["webpack://logtool-frontend/./src/views/Account.vue","webpack://logtool-frontend/./src/views/Account.vue?727f"],"sourcesContent":["<template>\r\n  <div class=\"account-container\">\r\n    <el-row :gutter=\"20\">\r\n      <!-- 个人信息 -->\r\n      <el-col :span=\"12\">\r\n        <el-card class=\"profile-card\">\r\n          <template #header>\r\n            <div class=\"card-header\">\r\n              <span>个人信息</span>\r\n            </div>\r\n          </template>\r\n          \r\n          <el-form\r\n            ref=\"profileForm\"\r\n            :model=\"profileForm\"\r\n            :rules=\"profileRules\"\r\n            label-width=\"100px\"\r\n          >\r\n            <el-form-item label=\"用户名\" prop=\"username\">\r\n              <el-input v-model=\"profileForm.username\" disabled />\r\n            </el-form-item>\r\n            \r\n            <el-form-item label=\"邮箱\" prop=\"email\">\r\n              <el-input v-model=\"profileForm.email\" />\r\n            </el-form-item>\r\n            \r\n            <el-form-item label=\"角色\">\r\n              <el-tag :type=\"getRoleType(profileForm.role)\">\r\n                {{ getRoleText(profileForm.role) }}\r\n              </el-tag>\r\n            </el-form-item>\r\n            \r\n            <el-form-item label=\"注册时间\">\r\n              <span>{{ formatDate(profileForm.createdAt) }}</span>\r\n            </el-form-item>\r\n            \r\n            <el-form-item>\r\n              <el-button \r\n                type=\"primary\" \r\n                @click=\"handleUpdateProfile\"\r\n                :loading=\"updatingProfile\"\r\n              >\r\n                更新信息\r\n              </el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n        </el-card>\r\n      </el-col>\r\n      \r\n      <!-- 修改密码 -->\r\n      <el-col :span=\"12\">\r\n        <el-card class=\"password-card\">\r\n          <template #header>\r\n            <div class=\"card-header\">\r\n              <span>修改密码</span>\r\n            </div>\r\n          </template>\r\n          \r\n          <el-form\r\n            ref=\"passwordForm\"\r\n            :model=\"passwordForm\"\r\n            :rules=\"passwordRules\"\r\n            label-width=\"100px\"\r\n          >\r\n            <el-form-item label=\"原密码\" prop=\"oldPassword\">\r\n              <el-input\r\n                v-model=\"passwordForm.oldPassword\"\r\n                type=\"password\"\r\n                show-password\r\n              />\r\n            </el-form-item>\r\n            \r\n            <el-form-item label=\"新密码\" prop=\"newPassword\">\r\n              <el-input\r\n                v-model=\"passwordForm.newPassword\"\r\n                type=\"password\"\r\n                show-password\r\n              />\r\n            </el-form-item>\r\n            \r\n            <el-form-item label=\"确认密码\" prop=\"confirmPassword\">\r\n              <el-input\r\n                v-model=\"passwordForm.confirmPassword\"\r\n                type=\"password\"\r\n                show-password\r\n              />\r\n            </el-form-item>\r\n            \r\n            <el-form-item>\r\n              <el-button \r\n                type=\"primary\" \r\n                @click=\"handleChangePassword\"\r\n                :loading=\"changingPassword\"\r\n              >\r\n                修改密码\r\n              </el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n        </el-card>\r\n      </el-col>\r\n    </el-row>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, reactive, computed, onMounted } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { ElMessage } from 'element-plus'\r\n\r\nexport default {\r\n  name: 'Account',\r\n  setup() {\r\n    const store = useStore()\r\n    \r\n    // 响应式数据\r\n    const updatingProfile = ref(false)\r\n    const changingPassword = ref(false)\r\n    const profileForm = ref(null)\r\n    const passwordForm = ref(null)\r\n    \r\n    const profileData = reactive({\r\n      username: '',\r\n      email: '',\r\n      role: '',\r\n      createdAt: ''\r\n    })\r\n    \r\n    const passwordData = reactive({\r\n      oldPassword: '',\r\n      newPassword: '',\r\n      confirmPassword: ''\r\n    })\r\n    \r\n    // 表单验证规则\r\n    const profileRules = {\r\n      email: [\r\n        { required: true, message: '请输入邮箱', trigger: 'blur' },\r\n        { type: 'email', message: '请输入正确的邮箱格式', trigger: 'blur' }\r\n      ]\r\n    }\r\n    \r\n    const validateConfirmPassword = (rule, value, callback) => {\r\n      if (value !== passwordData.newPassword) {\r\n        callback(new Error('两次输入的密码不一致'))\r\n      } else {\r\n        callback()\r\n      }\r\n    }\r\n    \r\n    const passwordRules = {\r\n      oldPassword: [\r\n        { required: true, message: '请输入原密码', trigger: 'blur' }\r\n      ],\r\n      newPassword: [\r\n        { required: true, message: '请输入新密码', trigger: 'blur' },\r\n        { min: 6, message: '密码长度不能少于 6 个字符', trigger: 'blur' }\r\n      ],\r\n      confirmPassword: [\r\n        { required: true, message: '请确认密码', trigger: 'blur' },\r\n        { validator: validateConfirmPassword, trigger: 'blur' }\r\n      ]\r\n    }\r\n    \r\n    // 计算属性\r\n    const currentUser = computed(() => store.getters.currentUser)\r\n    \r\n    // 方法\r\n    const loadUserProfile = () => {\r\n      if (currentUser.value) {\r\n        Object.assign(profileData, {\r\n          username: currentUser.value.username,\r\n          email: currentUser.value.email,\r\n          role: currentUser.value.role,\r\n          createdAt: currentUser.value.createdAt\r\n        })\r\n      }\r\n    }\r\n    \r\n    const handleUpdateProfile = async () => {\r\n      try {\r\n        await profileForm.value.validate()\r\n        updatingProfile.value = true\r\n        \r\n        // 这里需要调用更新用户信息的API\r\n        // await store.dispatch('users/updateUser', {\r\n        //   id: currentUser.value.id,\r\n        //   data: { email: profileData.email }\r\n        // })\r\n        \r\n        ElMessage.success('更新成功')\r\n      } catch (error) {\r\n        ElMessage.error('更新失败')\r\n      } finally {\r\n        updatingProfile.value = false\r\n      }\r\n    }\r\n    \r\n    const handleChangePassword = async () => {\r\n      try {\r\n        await passwordForm.value.validate()\r\n        changingPassword.value = true\r\n        \r\n        // 这里需要调用修改密码的API\r\n        // await store.dispatch('auth/changePassword', {\r\n        //   oldPassword: passwordData.oldPassword,\r\n        //   newPassword: passwordData.newPassword\r\n        // })\r\n        \r\n        ElMessage.success('密码修改成功')\r\n        \r\n        // 清空表单\r\n        Object.assign(passwordData, {\r\n          oldPassword: '',\r\n          newPassword: '',\r\n          confirmPassword: ''\r\n        })\r\n        passwordForm.value.resetFields()\r\n      } catch (error) {\r\n        ElMessage.error('密码修改失败')\r\n      } finally {\r\n        changingPassword.value = false\r\n      }\r\n    }\r\n    \r\n    const getRoleType = (role) => {\r\n      const typeMap = {\r\n        admin: 'danger',\r\n        expert: 'warning',\r\n        user: 'info'\r\n      }\r\n      return typeMap[role] || 'info'\r\n    }\r\n    \r\n    const getRoleText = (role) => {\r\n      const textMap = {\r\n        admin: '管理员',\r\n        expert: '专家用户',\r\n        user: '普通用户'\r\n      }\r\n      return textMap[role] || role\r\n    }\r\n    \r\n    const formatDate = (dateString) => {\r\n      if (!dateString) return '-'\r\n      return new Date(dateString).toLocaleString('zh-CN')\r\n    }\r\n    \r\n    // 生命周期\r\n    onMounted(() => {\r\n      loadUserProfile()\r\n    })\r\n    \r\n    return {\r\n      updatingProfile,\r\n      changingPassword,\r\n      profileForm,\r\n      passwordForm,\r\n      profileData,\r\n      passwordData,\r\n      profileRules,\r\n      passwordRules,\r\n      handleUpdateProfile,\r\n      handleChangePassword,\r\n      getRoleType,\r\n      getRoleText,\r\n      formatDate\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.account-container {\r\n  height: 100%;\r\n}\r\n\r\n.profile-card,\r\n.password-card {\r\n  height: 100%;\r\n}\r\n\r\n.card-header {\r\n  font-weight: 600;\r\n}\r\n\r\n.el-form-item:last-child {\r\n  margin-bottom: 0;\r\n}\r\n</style> ","import { render } from \"./Account.vue?vue&type=template&id=2278badf&scoped=true\"\nimport script from \"./Account.vue?vue&type=script&lang=js\"\nexport * from \"./Account.vue?vue&type=script&lang=js\"\n\nimport \"./Account.vue?vue&type=style&index=0&id=2278badf&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-2278badf\"]])\n\nexport default __exports__"],"names":["class","gutter","span","header","ref","model","profileForm","rules","profileRules","label","prop","username","disabled","email","type","getRoleType","role","getRoleText","formatDate","createdAt","handleUpdateProfile","loading","updatingProfile","passwordForm","passwordRules","oldPassword","newPassword","confirmPassword","handleChangePassword","changingPassword","name","setup","store","profileData","passwordData","required","message","trigger","validateConfirmPassword","rule","value","callback","Error","min","validator","currentUser","getters","loadUserProfile","Object","assign","async","validate","success","error","resetFields","typeMap","admin","expert","user","textMap","dateString","Date","toLocaleString","__exports__","render"],"sourceRoot":""}