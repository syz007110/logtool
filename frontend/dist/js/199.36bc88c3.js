"use strict";(self["webpackChunklogtool_frontend"]=self["webpackChunklogtool_frontend"]||[]).push([[199],{4199:function(e,a,l){l.r(a),l.d(a,{default:function(){return k}});var r=l(641),o=l(33);const t={class:"error-codes-container"},d={class:"action-bar"},u={class:"search-section"},s={class:"action-section"},n={class:"pagination-wrapper"},i={class:"dialog-footer"};function p(e,a,l,p,m,b){const _=(0,r.g2)("Search"),c=(0,r.g2)("el-icon"),g=(0,r.g2)("el-input"),F=(0,r.g2)("Plus"),h=(0,r.g2)("el-button"),f=(0,r.g2)("el-table-column"),k=(0,r.g2)("ExplanationCell"),v=(0,r.g2)("el-table"),C=(0,r.g2)("el-pagination"),y=(0,r.g2)("el-card"),V=(0,r.g2)("el-option"),w=(0,r.g2)("el-select"),x=(0,r.g2)("el-form-item"),E=(0,r.g2)("el-col"),S=(0,r.g2)("el-row"),U=(0,r.g2)("el-checkbox"),W=(0,r.g2)("el-radio"),R=(0,r.g2)("el-radio-group"),A=(0,r.g2)("el-form"),L=(0,r.g2)("el-dialog"),T=(0,r.gN)("loading");return(0,r.uX)(),(0,r.CE)("div",t,[(0,r.Lk)("div",d,[(0,r.Lk)("div",u,[(0,r.bF)(g,{modelValue:p.searchQuery,"onUpdate:modelValue":a[0]||(a[0]=e=>p.searchQuery=e),placeholder:"搜索故障码...",style:{width:"300px"},clearable:"",onInput:p.handleSearch},{prefix:(0,r.k6)(()=>[(0,r.bF)(c,null,{default:(0,r.k6)(()=>[(0,r.bF)(_)]),_:1})]),_:1},8,["modelValue","onInput"])]),(0,r.Lk)("div",s,[p.canCreate?((0,r.uX)(),(0,r.Wv)(h,{key:0,type:"primary",onClick:p.handleAdd},{default:(0,r.k6)(()=>[(0,r.bF)(c,null,{default:(0,r.k6)(()=>[(0,r.bF)(F)]),_:1}),a[29]||(a[29]=(0,r.eW)(" 添加故障码 "))]),_:1,__:[29]},8,["onClick"])):(0,r.Q3)("",!0)])]),(0,r.bF)(y,{class:"list-card"},{default:(0,r.k6)(()=>[(0,r.bo)(((0,r.uX)(),(0,r.Wv)(v,{data:p.errorCodes,loading:p.loading,style:{width:"100%"}},{default:(0,r.k6)(()=>[(0,r.bF)(f,{prop:"subsystem",label:"子系统",width:"80"}),(0,r.bF)(f,{prop:"code",label:"故障码",width:"120"}),(0,r.bF)(f,{label:"提示信息","min-width":"140"},{default:(0,r.k6)(({row:e})=>[(0,r.bF)(k,{text:[e.user_hint,e.operation].filter(Boolean).join(", ")},null,8,["text"])]),_:1}),(0,r.bF)(f,{prop:"param1",label:"参数1","min-width":"100"},{default:(0,r.k6)(({row:e})=>[(0,r.bF)(k,{text:String(e.param1??""),always:!0},null,8,["text"])]),_:1}),(0,r.bF)(f,{prop:"param2",label:"参数2","min-width":"100"},{default:(0,r.k6)(({row:e})=>[(0,r.bF)(k,{text:String(e.param2??""),always:!0},null,8,["text"])]),_:1}),(0,r.bF)(f,{prop:"param3",label:"参数3","min-width":"100"},{default:(0,r.k6)(({row:e})=>[(0,r.bF)(k,{text:String(e.param3??""),always:!0},null,8,["text"])]),_:1}),(0,r.bF)(f,{prop:"param4",label:"参数4","min-width":"100"},{default:(0,r.k6)(({row:e})=>[(0,r.bF)(k,{text:String(e.param4??""),always:!0},null,8,["text"])]),_:1}),(0,r.bF)(f,{prop:"category",label:"分类",width:"100"}),p.canUpdate||p.canDelete?((0,r.uX)(),(0,r.Wv)(f,{key:0,label:"操作",width:"180"},{default:(0,r.k6)(({row:e})=>[p.canUpdate?((0,r.uX)(),(0,r.Wv)(h,{key:0,type:"primary",size:"small",onClick:a=>p.handleEdit(e)},{default:(0,r.k6)(()=>a[30]||(a[30]=[(0,r.eW)(" 编辑 ")])),_:2,__:[30]},1032,["onClick"])):(0,r.Q3)("",!0),p.canDelete?((0,r.uX)(),(0,r.Wv)(h,{key:1,type:"danger",size:"small",onClick:a=>p.handleDelete(e)},{default:(0,r.k6)(()=>a[31]||(a[31]=[(0,r.eW)(" 删除 ")])),_:2,__:[31]},1032,["onClick"])):(0,r.Q3)("",!0)]),_:1})):(0,r.Q3)("",!0)]),_:1},8,["data","loading"])),[[T,p.loading]]),(0,r.Lk)("div",n,[(0,r.bF)(C,{"current-page":p.currentPage,"page-size":p.pageSize,"page-sizes":[10,20,50,100],total:p.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:p.handleSizeChange,onCurrentChange:p.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1}),(0,r.bF)(L,{modelValue:p.showAddDialog,"onUpdate:modelValue":a[28]||(a[28]=e=>p.showAddDialog=e),title:p.getDialogTitle(),width:"1000px","close-on-click-modal":!1},{footer:(0,r.k6)(()=>[(0,r.Lk)("span",i,[(0,r.bF)(h,{onClick:a[27]||(a[27]=e=>p.showAddDialog=!1)},{default:(0,r.k6)(()=>a[42]||(a[42]=[(0,r.eW)("取消")])),_:1,__:[42]}),(0,r.bF)(h,{type:"primary",onClick:p.handleSave,loading:p.saving},{default:(0,r.k6)(()=>[(0,r.eW)((0,o.v_)(p.getSaveButtonText()),1)]),_:1},8,["onClick","loading"])])]),default:(0,r.k6)(()=>[(0,r.bF)(A,{ref:"errorCodeFormRef",model:p.errorCodeForm,rules:p.rules,"label-width":"140px",class:"error-code-form"},{default:(0,r.k6)(()=>[(0,r.bF)(S,{gutter:20},{default:(0,r.k6)(()=>[(0,r.bF)(E,{span:12},{default:(0,r.k6)(()=>[(0,r.bF)(x,{label:"子系统",prop:"subsystem"},{default:(0,r.k6)(()=>[(0,r.bF)(w,{modelValue:p.errorCodeForm.subsystem,"onUpdate:modelValue":a[1]||(a[1]=e=>p.errorCodeForm.subsystem=e),placeholder:"请选择子系统",onChange:p.handleSubsystemChange},{default:(0,r.k6)(()=>[(0,r.bF)(V,{label:"01：运动控制软件",value:"1"}),(0,r.bF)(V,{label:"02：人机交互软件",value:"2"}),(0,r.bF)(V,{label:"03：医生控制台软件",value:"3"}),(0,r.bF)(V,{label:"04：手术台车软件",value:"4"}),(0,r.bF)(V,{label:"05：驱动器软件",value:"5"}),(0,r.bF)(V,{label:"06：图像软件",value:"6"}),(0,r.bF)(V,{label:"07：工具工厂软件",value:"7"}),(0,r.bF)(V,{label:"08：远程运动控制软件",value:"8"}),(0,r.bF)(V,{label:"09：远程医生控制台软件",value:"9"}),(0,r.bF)(V,{label:"0A：远程驱动器软件",value:"A"})]),_:1},8,["modelValue","onChange"])]),_:1})]),_:1}),(0,r.bF)(E,{span:12},{default:(0,r.k6)(()=>[(0,r.bF)(x,{label:"故障码",prop:"code"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:p.errorCodeForm.code,"onUpdate:modelValue":a[2]||(a[2]=e=>p.errorCodeForm.code=e),placeholder:"格式：0X010A",onInput:p.handleCodeChange},null,8,["modelValue","onInput"])]),_:1})]),_:1})]),_:1}),p.showSyncOption?((0,r.uX)(),(0,r.Wv)(S,{key:0},{default:(0,r.k6)(()=>[(0,r.bF)(E,{span:24},{default:(0,r.k6)(()=>[(0,r.bF)(x,{label:"同步选项"},{default:(0,r.k6)(()=>[p.isLocalSubsystem?((0,r.uX)(),(0,r.Wv)(U,{key:0,modelValue:p.syncToRemote,"onUpdate:modelValue":a[3]||(a[3]=e=>p.syncToRemote=e)},{default:(0,r.k6)(()=>[(0,r.eW)(" 同步到远程端 ("+(0,o.v_)(p.getRemoteSubsystemLabel())+") ",1)]),_:1},8,["modelValue"])):(0,r.Q3)("",!0),p.isRemoteSubsystem?((0,r.uX)(),(0,r.Wv)(U,{key:1,modelValue:p.syncToLocal,"onUpdate:modelValue":a[4]||(a[4]=e=>p.syncToLocal=e)},{default:(0,r.k6)(()=>[(0,r.eW)(" 同步到本地端 ("+(0,o.v_)(p.getLocalSubsystemLabel())+") ",1)]),_:1},8,["modelValue"])):(0,r.Q3)("",!0)]),_:1})]),_:1})]),_:1})):(0,r.Q3)("",!0),(0,r.bF)(S,{gutter:20},{default:(0,r.k6)(()=>[(0,r.bF)(E,{span:12},{default:(0,r.k6)(()=>[(0,r.bF)(x,{label:"是否轴错误",prop:"is_axis_error"},{default:(0,r.k6)(()=>[(0,r.bF)(R,{modelValue:p.errorCodeForm.is_axis_error,"onUpdate:modelValue":a[5]||(a[5]=e=>p.errorCodeForm.is_axis_error=e)},{default:(0,r.k6)(()=>[(0,r.bF)(W,{label:!0},{default:(0,r.k6)(()=>a[32]||(a[32]=[(0,r.eW)("TRUE")])),_:1,__:[32]}),(0,r.bF)(W,{label:!1},{default:(0,r.k6)(()=>a[33]||(a[33]=[(0,r.eW)("FALSE")])),_:1,__:[33]})]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,r.bF)(E,{span:12},{default:(0,r.k6)(()=>[(0,r.bF)(x,{label:"是否臂错误",prop:"is_arm_error"},{default:(0,r.k6)(()=>[(0,r.bF)(R,{modelValue:p.errorCodeForm.is_arm_error,"onUpdate:modelValue":a[6]||(a[6]=e=>p.errorCodeForm.is_arm_error=e)},{default:(0,r.k6)(()=>[(0,r.bF)(W,{label:!0},{default:(0,r.k6)(()=>a[34]||(a[34]=[(0,r.eW)("TRUE")])),_:1,__:[34]}),(0,r.bF)(W,{label:!1},{default:(0,r.k6)(()=>a[35]||(a[35]=[(0,r.eW)("FALSE")])),_:1,__:[35]})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,r.bF)(x,{label:"精简提示信息(中文)",prop:"short_message"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:p.errorCodeForm.short_message,"onUpdate:modelValue":a[7]||(a[7]=e=>p.errorCodeForm.short_message=e),type:"textarea",rows:2},null,8,["modelValue"])]),_:1}),(0,r.bF)(x,{label:"精简提示信息(英文)",prop:"short_message_en"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:p.errorCodeForm.short_message_en,"onUpdate:modelValue":a[8]||(a[8]=e=>p.errorCodeForm.short_message_en=e),type:"textarea",rows:2},null,8,["modelValue"])]),_:1}),(0,r.bF)(x,{label:"给用户的提示信息(中文)",prop:"user_hint"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:p.errorCodeForm.user_hint,"onUpdate:modelValue":a[9]||(a[9]=e=>p.errorCodeForm.user_hint=e),type:"textarea",rows:2},null,8,["modelValue"])]),_:1}),(0,r.bF)(x,{label:"给用户的提示信息(英文)",prop:"user_hint_en"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:p.errorCodeForm.user_hint_en,"onUpdate:modelValue":a[10]||(a[10]=e=>p.errorCodeForm.user_hint_en=e),type:"textarea",rows:2},null,8,["modelValue"])]),_:1}),(0,r.bF)(x,{label:"操作信息(中文)",prop:"operation"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:p.errorCodeForm.operation,"onUpdate:modelValue":a[11]||(a[11]=e=>p.errorCodeForm.operation=e),type:"textarea",rows:2},null,8,["modelValue"])]),_:1}),(0,r.bF)(x,{label:"操作信息(英文)",prop:"operation_en"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:p.errorCodeForm.operation_en,"onUpdate:modelValue":a[12]||(a[12]=e=>p.errorCodeForm.operation_en=e),type:"textarea",rows:2},null,8,["modelValue"])]),_:1}),(0,r.bF)(x,{label:"详细信息",prop:"detail"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:p.errorCodeForm.detail,"onUpdate:modelValue":a[13]||(a[13]=e=>p.errorCodeForm.detail=e),type:"textarea",rows:3},null,8,["modelValue"])]),_:1}),(0,r.bF)(x,{label:"检测方法",prop:"method"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:p.errorCodeForm.method,"onUpdate:modelValue":a[14]||(a[14]=e=>p.errorCodeForm.method=e),type:"textarea",rows:3},null,8,["modelValue"])]),_:1}),(0,r.bF)(S,{gutter:20},{default:(0,r.k6)(()=>[(0,r.bF)(E,{span:12},{default:(0,r.k6)(()=>[(0,r.bF)(x,{label:"参数1",prop:"param1"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:p.errorCodeForm.param1,"onUpdate:modelValue":a[15]||(a[15]=e=>p.errorCodeForm.param1=e)},null,8,["modelValue"])]),_:1})]),_:1}),(0,r.bF)(E,{span:12},{default:(0,r.k6)(()=>[(0,r.bF)(x,{label:"参数2",prop:"param2"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:p.errorCodeForm.param2,"onUpdate:modelValue":a[16]||(a[16]=e=>p.errorCodeForm.param2=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,r.bF)(S,{gutter:20},{default:(0,r.k6)(()=>[(0,r.bF)(E,{span:12},{default:(0,r.k6)(()=>[(0,r.bF)(x,{label:"参数3",prop:"param3"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:p.errorCodeForm.param3,"onUpdate:modelValue":a[17]||(a[17]=e=>p.errorCodeForm.param3=e)},null,8,["modelValue"])]),_:1})]),_:1}),(0,r.bF)(E,{span:12},{default:(0,r.k6)(()=>[(0,r.bF)(x,{label:"参数4",prop:"param4"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:p.errorCodeForm.param4,"onUpdate:modelValue":a[18]||(a[18]=e=>p.errorCodeForm.param4=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,r.bF)(S,{gutter:20},{default:(0,r.k6)(()=>[(0,r.bF)(E,{span:12},{default:(0,r.k6)(()=>[(0,r.bF)(x,{label:"故障分类",prop:"category"},{default:(0,r.k6)(()=>[(0,r.bF)(w,{modelValue:p.errorCodeForm.category,"onUpdate:modelValue":a[19]||(a[19]=e=>p.errorCodeForm.category=e),placeholder:"请选择分类"},{default:(0,r.k6)(()=>[(0,r.bF)(V,{label:"软件",value:"软件"}),(0,r.bF)(V,{label:"硬件",value:"硬件"}),(0,r.bF)(V,{label:"日志记录",value:"日志记录"}),(0,r.bF)(V,{label:"操作提示",value:"操作提示"}),(0,r.bF)(V,{label:"安全保护",value:"安全保护"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,r.bF)(E,{span:12},{default:(0,r.k6)(()=>[(0,r.bF)(x,{label:"故障等级",prop:"level"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:p.errorCodeForm.level,"onUpdate:modelValue":a[20]||(a[20]=e=>p.errorCodeForm.level=e),readonly:"",placeholder:"根据故障码自动判断"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,r.bF)(S,{gutter:20},{default:(0,r.k6)(()=>[(0,r.bF)(E,{span:12},{default:(0,r.k6)(()=>[(0,r.bF)(x,{label:"处理措施",prop:"solution"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{value:p.getSolutionDisplay(p.errorCodeForm.solution),readonly:"",placeholder:"根据故障码自动判断"},null,8,["value"])]),_:1})]),_:1}),(0,r.bF)(E,{span:12},{default:(0,r.k6)(()=>[(0,r.bF)(x,{label:"技术排查方案",prop:"tech_solution"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:p.errorCodeForm.tech_solution,"onUpdate:modelValue":a[21]||(a[21]=e=>p.errorCodeForm.tech_solution=e),type:"textarea",rows:2},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,r.bF)(x,{label:"解释",prop:"explanation"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:p.errorCodeForm.explanation,"onUpdate:modelValue":a[22]||(a[22]=e=>p.errorCodeForm.explanation=e),type:"textarea",rows:3},null,8,["modelValue"])]),_:1}),(0,r.bF)(S,{gutter:20},{default:(0,r.k6)(()=>[(0,r.bF)(E,{span:8},{default:(0,r.k6)(()=>[(0,r.bF)(x,{label:"专家模式",prop:"for_expert"},{default:(0,r.k6)(()=>[(0,r.bF)(R,{modelValue:p.errorCodeForm.for_expert,"onUpdate:modelValue":a[23]||(a[23]=e=>p.errorCodeForm.for_expert=e)},{default:(0,r.k6)(()=>[(0,r.bF)(W,{label:!0},{default:(0,r.k6)(()=>a[36]||(a[36]=[(0,r.eW)("TRUE")])),_:1,__:[36]}),(0,r.bF)(W,{label:!1},{default:(0,r.k6)(()=>a[37]||(a[37]=[(0,r.eW)("FALSE")])),_:1,__:[37]})]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,r.bF)(E,{span:8},{default:(0,r.k6)(()=>[(0,r.bF)(x,{label:"初学者模式",prop:"for_novice"},{default:(0,r.k6)(()=>[(0,r.bF)(R,{modelValue:p.errorCodeForm.for_novice,"onUpdate:modelValue":a[24]||(a[24]=e=>p.errorCodeForm.for_novice=e)},{default:(0,r.k6)(()=>[(0,r.bF)(W,{label:!0},{default:(0,r.k6)(()=>a[38]||(a[38]=[(0,r.eW)("TRUE")])),_:1,__:[38]}),(0,r.bF)(W,{label:!1},{default:(0,r.k6)(()=>a[39]||(a[39]=[(0,r.eW)("FALSE")])),_:1,__:[39]})]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,r.bF)(E,{span:8},{default:(0,r.k6)(()=>[(0,r.bF)(x,{label:"相关日志",prop:"related_log"},{default:(0,r.k6)(()=>[(0,r.bF)(R,{modelValue:p.errorCodeForm.related_log,"onUpdate:modelValue":a[25]||(a[25]=e=>p.errorCodeForm.related_log=e)},{default:(0,r.k6)(()=>[(0,r.bF)(W,{label:!0},{default:(0,r.k6)(()=>a[40]||(a[40]=[(0,r.eW)("TRUE")])),_:1,__:[40]}),(0,r.bF)(W,{label:!1},{default:(0,r.k6)(()=>a[41]||(a[41]=[(0,r.eW)("FALSE")])),_:1,__:[41]})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,r.bF)(x,{label:"停止上报方法",prop:"stop_report"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:p.errorCodeForm.stop_report,"onUpdate:modelValue":a[26]||(a[26]=e=>p.errorCodeForm.stop_report=e)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}var m=l(953),b=l(6278),_=l(163),c=l(7918),g=l(8548),F=(l(5495),{name:"ErrorCodes",components:{Search:g.Search,Plus:g.Plus,ExplanationCell:{name:"ExplanationCell",props:{text:{type:String,default:""},always:{type:Boolean,default:!1}},setup(e){const a=(0,m.KR)(null),l=(0,m.KR)(!1);let o=null;const t=()=>{const e=a.value;e&&(l.value=e.scrollWidth-e.clientWidth>1)},d=()=>{t()};return(0,r.sV)(()=>{t(),"ResizeObserver"in window?(o=new ResizeObserver(()=>t()),a.value&&o.observe(a.value)):window.addEventListener("resize",t)}),(0,r.xo)(()=>{o&&a.value&&o.unobserve(a.value),o&&o.disconnect(),o=null,window.removeEventListener("resize",t)}),()=>(0,r.h)((0,r.g2)("el-tooltip"),{content:e.text,placement:"top",effect:"dark",popperClass:"explanation-tooltip dark",teleported:!0,showAfter:120,disabled:""===(e.text??"")||!e.always&&!l.value},{default:()=>(0,r.h)("span",{ref:a,class:"explanation-ellipsis",style:"display:inline-block;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;",onMouseenter:d},e.text)})}}},setup(){const e=(0,b.Pj)(),a=(0,m.KR)(!1),l=(0,m.KR)(!1),o=(0,m.KR)(!1),t=(0,m.KR)(null),d=(0,m.KR)(""),u=(0,m.KR)(1),s=(0,m.KR)(10),n=(0,m.KR)(null),i=(0,m.KR)(!1),p=(0,m.KR)(!1),g=(0,m.Kh)({subsystem:"",code:"",is_axis_error:!1,is_arm_error:!1,short_message:"",short_message_en:"",user_hint:"",user_hint_en:"",operation:"",operation_en:"",detail:"",method:"",param1:"",param2:"",param3:"",param4:"",solution:"",for_expert:!0,for_novice:!0,related_log:!1,stop_report:"",level:"",tech_solution:"",explanation:"",category:""}),F=(0,r.EW)(()=>{const e={subsystem:[{required:!0,message:"请选择子系统",trigger:"change"}],code:[{required:!0,message:"请输入故障码",trigger:"blur"},{pattern:/^0X[0-9A-F]{3}[ABCDE]$/,message:"故障码格式不正确，必须以0X开头+16进制的故障码（最后一位表示等级分类）",trigger:"blur"}],detail:[{required:!0,message:"请输入详细信息",trigger:"blur"}],method:[{required:!0,message:"请输入检测方法",trigger:"blur"}],param1:[{required:!0,message:"请输入参数1",trigger:"blur"}],param2:[{required:!0,message:"请输入参数2",trigger:"blur"}],param3:[{required:!0,message:"请输入参数3",trigger:"blur"}],param4:[{required:!0,message:"请输入参数4",trigger:"blur"}],category:[{required:!0,message:"请选择故障分类",trigger:"change"}]},a=g.operation&&""!==g.operation.trim();e.short_message=[{required:!a,message:"精简提示信息和操作信息不能都为空",trigger:"blur"}],e.user_hint=[{required:!a,message:"用户提示信息和操作信息不能都为空",trigger:"blur"}],e.operation=[{required:!(g.short_message&&""!==g.short_message.trim())&&!(g.user_hint&&""!==g.user_hint.trim()),message:"精简提示信息、用户提示信息和操作信息至少需要填写两项",trigger:"blur"}];const l=g.operation_en&&""!==g.operation_en.trim();return e.short_message_en=[{required:!l,message:"英文精简提示信息和英文操作信息不能都为空",trigger:"blur"}],e.user_hint_en=[{required:!l,message:"英文用户提示信息和英文操作信息不能都为空",trigger:"blur"}],e.operation_en=[{required:!(g.short_message_en&&""!==g.short_message_en.trim())&&!(g.user_hint_en&&""!==g.user_hint_en.trim()),message:"英文精简提示信息、英文用户提示信息和英文操作信息至少需要填写两项",trigger:"blur"}],e}),h=e=>{if(!e)return{level:"无",solution:"tips"};const a=e.match(/^0X([0-9A-F]{3})([ABCDE])$/);if(!a)return{level:"无",solution:"tips"};const[,l,r]=a;let o="无";switch(r){case"A":o="高级";break;case"B":o="中级";break;case"C":o="低级";break;default:o="无";break}let t="tips";switch(r){case"A":t="recoverable";break;case"B":t="recoverable";break;case"C":t="ignorable";break;case"D":t="tips";break;case"E":t="log";break}return{level:o,solution:t}},f=()=>{const{level:e,solution:a}=h(g.code);g.level=e,g.solution=a},k=e=>{const a={recoverable:"可恢复故障",unrecoverable:"不可恢复故障",ignorable:"可忽略故障",tips:"提示信息",log:"日志记录"};return a[e]||e},v=(0,r.EW)(()=>e.getters["errorCodes/errorCodesList"]),C=(0,r.EW)(()=>e.getters["errorCodes/totalCount"]),y=(0,r.EW)(()=>"admin"===e.getters["auth/userRole"]||"expert"===e.getters["auth/userRole"]),V=(0,r.EW)(()=>"admin"===e.getters["auth/userRole"]||"expert"===e.getters["auth/userRole"]),w=(0,r.EW)(()=>"admin"===e.getters["auth/userRole"]||"expert"===e.getters["auth/userRole"]),x=(0,r.EW)(()=>{const e=g.subsystem;return"1"===e||"8"===e||"3"===e||"9"===e||"5"===e||"A"===e}),E=(0,r.EW)(()=>{const e=g.subsystem;return"1"===e||"3"===e||"5"===e}),S=(0,r.EW)(()=>{const e=g.subsystem;return"8"===e||"9"===e||"A"===e}),U=async()=>{try{a.value=!0,await e.dispatch("errorCodes/fetchErrorCodes",{page:u.value,limit:s.value,keyword:d.value})}catch(l){_.nk.error("加载故障码失败")}finally{a.value=!1}},W=()=>{u.value=1,U()},R=e=>{s.value=e,u.value=1,U()},A=e=>{u.value=e,U()},L=()=>{Object.keys(g).forEach(e=>{"boolean"===typeof g[e]?g[e]="for_expert"===e||"for_novice"===e:g[e]=""}),t.value=null,i.value=!1,p.value=!1,n.value&&n.value.clearValidate()},T=()=>{L(),o.value=!0},z=e=>{t.value=e,Object.keys(g).forEach(a=>{void 0!==e[a]&&(g[a]=e[a])}),i.value=!1,p.value=!1,o.value=!0},D=async a=>{try{await c.s.confirm(`确定要删除故障码 "${a.code}" 吗？`,"删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await e.dispatch("errorCodes/deleteErrorCode",a.id),_.nk.success("删除成功"),U()}catch(l){"cancel"!==l&&_.nk.error("删除失败")}},q=()=>t.value?E.value?"更新本地故障码":S.value?"更新远程故障码":"编辑故障码":E.value?"创建本地故障码":S.value?"创建远程故障码":"添加故障码",B=()=>{const e={1:"08：远程运动控制软件",3:"09：远程医生控制台软件",5:"0A：远程驱动器软件"};return e[g.subsystem]||""},K=()=>{const e={8:"01：运动控制软件",9:"03：医生控制台软件",A:"05：驱动器软件"};return e[g.subsystem]||""},X=()=>t.value?"更新":"创建",Q=()=>{i.value=!1,p.value=!1},P=e=>{const a={1:"8",8:"1",3:"9",9:"3",5:"A",A:"5"};return a[e]},j=async()=>{try{await n.value.validate(),l.value=!0;const a=[];if(t.value?a.push(e.dispatch("errorCodes/updateErrorCode",{id:t.value.id,data:g})):a.push(e.dispatch("errorCodes/createErrorCode",g)),i.value&&E.value){const l=P(g.subsystem),r={...g,subsystem:l};t.value?a.push(e.dispatch("errorCodes/updateErrorCodeByCode",{code:g.code,subsystem:l,data:r})):a.push(e.dispatch("errorCodes/createErrorCode",r))}if(p.value&&S.value){const l=P(g.subsystem),r={...g,subsystem:l};t.value?a.push(e.dispatch("errorCodes/updateErrorCodeByCode",{code:g.code,subsystem:l,data:r})):a.push(e.dispatch("errorCodes/createErrorCode",r))}await Promise.all(a);const r=t.value?"更新":"创建";_.nk.success(`${r}成功`),o.value=!1,L(),U()}catch(a){a.response&&a.response.data&&a.response.data.errors?_.nk.error(a.response.data.errors.join(", ")):_.nk.error("保存失败")}finally{l.value=!1}};return(0,r.wB)([()=>g.short_message,()=>g.user_hint,()=>g.operation,()=>g.short_message_en,()=>g.user_hint_en,()=>g.operation_en],()=>{n.value&&n.value.clearValidate(["short_message","user_hint","operation","short_message_en","user_hint_en","operation_en"])}),(0,r.sV)(()=>{U()}),{loading:a,saving:l,showAddDialog:o,editingErrorCode:t,searchQuery:d,currentPage:u,pageSize:s,errorCodeFormRef:n,errorCodeForm:g,rules:F,errorCodes:v,total:C,canCreate:y,canUpdate:V,canDelete:w,syncToRemote:i,syncToLocal:p,showSyncOption:x,isLocalSubsystem:E,isRemoteSubsystem:S,handleSearch:W,handleSizeChange:R,handleCurrentChange:A,handleAdd:T,handleEdit:z,handleDelete:D,handleSave:j,handleCodeChange:f,getSolutionDisplay:k,getDialogTitle:q,getRemoteSubsystemLabel:B,getLocalSubsystemLabel:K,handleSubsystemChange:Q,getSaveButtonText:X}}}),h=l(6262);const f=(0,h.A)(F,[["render",p],["__scopeId","data-v-731e4dcd"]]);var k=f}}]);
//# sourceMappingURL=199.36bc88c3.js.map