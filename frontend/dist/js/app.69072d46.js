(function(){var e={3439:function(e,t,r){"use strict";var o=r(3751),s=r(641);const a={id:"app"};function n(e,t,r,o,n,i){const c=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",a,[(0,s.bF)(c)])}var i={name:"App"},c=r(6262);const l=(0,c.A)(i,[["render",n]]);var d=l,u=r(5220),g=r(6278),m=r(4335),p=r(163);const f=m.A.create({baseURL:"/api",timeout:3e4});f.interceptors.request.use(e=>{const t=G.state.auth?.token;return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),f.interceptors.response.use(e=>e,e=>{if(e.response){const{status:t,data:r}=e.response;switch(t){case 401:p.nk.error("登录已过期，请重新登录"),G.dispatch("auth/logout"),z.push("/login");break;case 403:p.nk.error("权限不足");break;case 404:p.nk.error("请求的资源不存在");break;case 500:p.nk.error("服务器内部错误");break;default:p.nk.error(r.message||"请求失败")}}else p.nk.error("网络连接失败");return Promise.reject(e)});const h={login:e=>f.post("/auth/login",e),register:e=>f.post("/auth/register",e),forgotPassword:e=>f.post("/auth/forgot-password",{email:e})},w={getList:e=>f.get("/error-codes",{params:e}),create:e=>f.post("/error-codes",e),update:(e,t)=>f.put(`/error-codes/${e}`,t),delete:e=>f.delete(`/error-codes/${e}`),exportXML:e=>f.get("/xml-export",{params:e,responseType:"blob"})},b={getList:e=>f.get("/logs",{params:e}),upload:e=>f.post("/logs/upload",e,{headers:{"Content-Type":"multipart/form-data"}}),parse:e=>f.post(`/logs/${e}/parse`),download:e=>f.get(`/logs/${e}/download`,{responseType:"blob"}),delete:e=>f.delete(`/logs/${e}`)},y={getList:e=>f.get("/users",{params:e}),create:e=>f.post("/users",e),update:(e,t)=>f.put(`/users/${e}`,t),delete:e=>f.delete(`/users/${e}`),assignRole:(e,t)=>f.post(`/users/${e}/roles`,{roleId:t})},S={getList:()=>f.get("/roles"),create:e=>f.post("/roles",e),update:(e,t)=>f.put(`/roles/${e}`,t),delete:e=>f.delete(`/roles/${e}`)},E={getList:e=>f.get("/i18n",{params:e}),create:e=>f.post("/i18n",e),update:(e,t)=>f.put(`/i18n/${e}`,t),delete:e=>f.delete(`/i18n/${e}`)};var L={auth:h,errorCodes:w,logs:b,users:y,roles:S,i18n:E};const v={token:localStorage.getItem("token")||null,user:JSON.parse(localStorage.getItem("user"))||null,language:localStorage.getItem("language")||"zh-CN"},T={SET_TOKEN(e,t){e.token=t,t?localStorage.setItem("token",t):localStorage.removeItem("token")},SET_USER(e,t){e.user=t,t?localStorage.setItem("user",JSON.stringify(t)):localStorage.removeItem("user")},SET_LANGUAGE(e,t){e.language=t,localStorage.setItem("language",t)}},A={async login({commit:e},t){try{const r=await L.auth.login(t);return e("SET_TOKEN",r.data.token),e("SET_USER",r.data.user),r}catch(r){throw r}},async register({commit:e},t){try{const e=await L.auth.register(t);return e}catch(r){throw r}},async forgotPassword({commit:e},t){try{const e=await L.auth.forgotPassword(t);return e}catch(r){throw r}},logout({commit:e}){e("SET_TOKEN",null),e("SET_USER",null)},setLanguage({commit:e},t){e("SET_LANGUAGE",t)}},C={isAuthenticated:e=>!!e.token,userRole:e=>e.user?e.user.role:null,currentUser:e=>e.user,currentLanguage:e=>e.language};var P={namespaced:!0,state:v,mutations:T,actions:A,getters:C},k=r(7426),O=r.n(k);const R={logs:[],loading:!1,total:0},U={SET_LOGS(e,t){e.logs=t},SET_LOADING(e,t){e.loading=t},SET_TOTAL(e,t){e.total=t}},_={async fetchLogs({commit:e},t={}){e("SET_LOADING",!0);try{const r=await L.logs.getList(t);return e("SET_LOGS",r.data.logs),e("SET_TOTAL",r.data.total),r}catch(r){throw r}finally{e("SET_LOADING",!1)}},async uploadLog({commit:e},t){try{const e=await L.logs.upload(t);return e}catch(r){throw r}},async parseLog({commit:e},t){try{const e=await L.logs.parse(t);return e}catch(r){throw r}},async downloadLog({commit:e},t){try{const e=await L.logs.download(t);return e}catch(r){throw r}},async deleteLog({commit:e},t){try{const e=await L.logs.delete(t);return e}catch(r){throw r}}},N={logsList:e=>e.logs,isLoading:e=>e.loading,totalCount:e=>e.total};var I={namespaced:!0,state:R,mutations:U,actions:_,getters:N};const D={users:[],roles:[],loading:!1,total:0},x={SET_USERS(e,t){e.users=t},SET_ROLES(e,t){e.roles=t},SET_LOADING(e,t){e.loading=t},SET_TOTAL(e,t){e.total=t}},F={async fetchUsers({commit:e},t={}){e("SET_LOADING",!0);try{const r=await L.users.getList(t);return e("SET_USERS",r.data.users),e("SET_TOTAL",r.data.total),r}catch(r){throw r}finally{e("SET_LOADING",!1)}},async fetchRoles({commit:e}){try{const t=await L.roles.getList();return e("SET_ROLES",t.data.roles),t}catch(t){throw t}},async createUser({commit:e},t){try{const e=await L.users.create(t);return e}catch(r){throw r}},async updateUser({commit:e},{id:t,data:r}){try{const e=await L.users.update(t,r);return e}catch(o){throw o}},async deleteUser({commit:e},t){try{const e=await L.users.delete(t);return e}catch(r){throw r}},async assignUserRole({commit:e},{userId:t,roleId:r}){try{const e=await L.users.assignRole(t,r);return e}catch(o){throw o}}},j={usersList:e=>e.users,rolesList:e=>e.roles,isLoading:e=>e.loading,totalCount:e=>e.total};var $={namespaced:!0,state:D,mutations:x,actions:F,getters:j},G=(0,g.y$)({modules:{auth:P,errorCodes:O(),logs:I,users:$}});const M=[{path:"/",redirect:"/login"},{path:"/login",name:"Login",component:()=>r.e(505).then(r.bind(r,5505)),meta:{requiresAuth:!1}},{path:"/register",name:"Register",component:()=>r.e(525).then(r.bind(r,9525)),meta:{requiresAuth:!1}},{path:"/forgot-password",name:"ForgotPassword",component:()=>r.e(344).then(r.bind(r,8344)),meta:{requiresAuth:!1}},{path:"/dashboard",component:()=>r.e(908).then(r.bind(r,9908)),meta:{requiresAuth:!0},children:[{path:"",name:"Dashboard",redirect:"/dashboard/error-codes"},{path:"error-codes",name:"ErrorCodes",component:()=>r.e(917).then(r.bind(r,3917))},{path:"logs",name:"Logs",component:()=>r.e(631).then(r.bind(r,2631))},{path:"account",name:"Account",component:()=>r.e(970).then(r.bind(r,2970))},{path:"history",name:"History",component:()=>r.e(638).then(r.bind(r,6638))},{path:"users",name:"Users",component:()=>r.e(234).then(r.bind(r,8234)),meta:{requiresAdmin:!0}},{path:"roles",name:"Roles",component:()=>r.e(141).then(r.bind(r,1141)),meta:{requiresAdmin:!0}}]}],q=(0,u.aE)({history:(0,u.LA)(),routes:M});q.beforeEach((e,t,r)=>{const o=G.getters["auth/isAuthenticated"],s=G.getters["auth/userRole"];e.meta.requiresAuth&&!o?r("/login"):e.meta.requiresAdmin&&"admin"!==s||"/login"===e.path&&o?r("/dashboard"):r()});var z=q,B=r(6992);const X={"zh-CN":{common:{confirm:"确认",cancel:"取消",save:"保存",delete:"删除",edit:"编辑",add:"添加",search:"搜索",reset:"重置",export:"导出",import:"导入",loading:"加载中...",success:"操作成功",error:"操作失败",warning:"警告",info:"提示"},login:{title:"LogTool 故障码管理系统",username:"用户名",password:"密码",login:"登录",register:"注册",forgotPassword:"忘记密码？"},register:{title:"用户注册",username:"用户名",email:"邮箱",password:"密码",confirmPassword:"确认密码",register:"注册",backToLogin:"返回登录",registerSuccess:"注册成功",registerFailed:"注册失败"},forgotPassword:{title:"忘记密码",email:"邮箱",submit:"提交",backToLogin:"返回登录",submitSuccess:"重置邮件已发送",submitFailed:"提交失败"},nav:{dashboard:"首页",errorCodes:"故障码管理",logs:"日志解析",account:"账户管理",history:"历史记录",logout:"退出登录"},errorCodes:{title:"故障码管理",code:"故障码",name:"名称",description:"描述",solution:"解决方案",category:"分类",severity:"严重程度",addErrorCode:"添加故障码",editErrorCode:"编辑故障码",deleteErrorCode:"删除故障码",exportXML:"导出XML",searchPlaceholder:"搜索故障码..."},logs:{title:"日志解析",upload:"上传日志",parse:"解析日志",download:"下载日志",delete:"删除日志",filename:"文件名",size:"文件大小",status:"状态",uploadTime:"上传时间",parseTime:"解析时间",uploadSuccess:"上传成功",parseSuccess:"解析成功",downloadSuccess:"下载成功"},account:{title:"账户信息",profile:"个人信息",changePassword:"修改密码",oldPassword:"原密码",newPassword:"新密码",confirmPassword:"确认密码",updateSuccess:"更新成功",updateFailed:"更新失败"},history:{title:"历史记录",operation:"操作",time:"时间",user:"用户",details:"详情"},users:{title:"用户管理",username:"用户名",email:"邮箱",role:"角色",status:"状态",createTime:"创建时间",addUser:"添加用户",editUser:"编辑用户",deleteUser:"删除用户",assignRole:"分配角色"},roles:{title:"角色管理",name:"角色名称",description:"角色描述",permissions:"权限",addRole:"添加角色",editRole:"编辑角色",deleteRole:"删除角色"}},"en-US":{common:{confirm:"Confirm",cancel:"Cancel",save:"Save",delete:"Delete",edit:"Edit",add:"Add",search:"Search",reset:"Reset",export:"Export",import:"Import",loading:"Loading...",success:"Operation successful",error:"Operation failed",warning:"Warning",info:"Info"},login:{title:"LogTool Error Code Management System",username:"Username",password:"Password",login:"Login",register:"Register",forgotPassword:"Forgot password?"},register:{title:"User Registration",username:"Username",email:"Email",password:"Password",confirmPassword:"Confirm Password",register:"Register",backToLogin:"Back to Login",registerSuccess:"Registration successful",registerFailed:"Registration failed"},forgotPassword:{title:"Forgot Password",email:"Email",submit:"Submit",backToLogin:"Back to Login",submitSuccess:"Reset email sent",submitFailed:"Submit failed"},nav:{dashboard:"Dashboard",errorCodes:"Error Codes",logs:"Log Analysis",account:"Account",history:"History",logout:"Logout"},errorCodes:{title:"Error Code Management",code:"Error Code",name:"Name",description:"Description",solution:"Solution",category:"Category",severity:"Severity",addErrorCode:"Add Error Code",editErrorCode:"Edit Error Code",deleteErrorCode:"Delete Error Code",exportXML:"Export XML",searchPlaceholder:"Search error codes..."},logs:{title:"Log Analysis",upload:"Upload Log",parse:"Parse Log",download:"Download Log",delete:"Delete Log",filename:"Filename",size:"File Size",status:"Status",uploadTime:"Upload Time",parseTime:"Parse Time",uploadSuccess:"Upload successful",parseSuccess:"Parse successful",downloadSuccess:"Download successful"},account:{title:"Account Information",profile:"Profile",changePassword:"Change Password",oldPassword:"Old Password",newPassword:"New Password",confirmPassword:"Confirm Password",updateSuccess:"Update successful",updateFailed:"Update failed"},history:{title:"History",operation:"Operation",time:"Time",user:"User",details:"Details"},users:{title:"User Management",username:"Username",email:"Email",role:"Role",status:"Status",createTime:"Create Time",addUser:"Add User",editUser:"Edit User",deleteUser:"Delete User",assignRole:"Assign Role"},roles:{title:"Role Management",name:"Role Name",description:"Role Description",permissions:"Permissions",addRole:"Add Role",editRole:"Edit Role",deleteRole:"Delete Role"}}},H=(0,B.hU)({locale:localStorage.getItem("language")||"zh-CN",fallbackLocale:"zh-CN",messages:X});var K=H,J=r(8671),W=(r(4188),r(8548));const Q=(0,o.Ef)(d);for(const[V,Y]of Object.entries(W))Q.component(V,Y);Q.use(G),Q.use(z),Q.use(K),Q.use(J.A),Q.mount("#app")},7426:function(){}},t={};function r(o){var s=t[o];if(void 0!==s)return s.exports;var a=t[o]={exports:{}};return e[o].call(a.exports,a,a.exports,r),a.exports}r.m=e,function(){var e=[];r.O=function(t,o,s,a){if(!o){var n=1/0;for(d=0;d<e.length;d++){o=e[d][0],s=e[d][1],a=e[d][2];for(var i=!0,c=0;c<o.length;c++)(!1&a||n>=a)&&Object.keys(r.O).every(function(e){return r.O[e](o[c])})?o.splice(c--,1):(i=!1,a<n&&(n=a));if(i){e.splice(d--,1);var l=s();void 0!==l&&(t=l)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[o,s,a]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce(function(t,o){return r.f[o](e,t),t},[]))}}(),function(){r.u=function(e){return"js/"+e+"."+{141:"378470fe",234:"59299f8a",344:"389ab70e",505:"59c946be",525:"92d5b18c",631:"6d914dce",638:"b01dfc9c",908:"9eada367",917:"7b5c9c4d",970:"a10a02b2"}[e]+".js"}}(),function(){r.miniCssF=function(e){return"css/"+e+"."+{141:"ea2c50cc",234:"53f608e7",344:"218f9bba",505:"7601b12f",525:"8d2814d6",631:"01e11698",638:"3a665e18",908:"57c5ef66",917:"26fbeddd",970:"3e900d91"}[e]+".css"}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="logtool-frontend:";r.l=function(o,s,a,n){if(e[o])e[o].push(s);else{var i,c;if(void 0!==a)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var u=l[d];if(u.getAttribute("src")==o||u.getAttribute("data-webpack")==t+a){i=u;break}}i||(c=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,r.nc&&i.setAttribute("nonce",r.nc),i.setAttribute("data-webpack",t+a),i.src=o),e[o]=[s];var g=function(t,r){i.onerror=i.onload=null,clearTimeout(m);var s=e[o];if(delete e[o],i.parentNode&&i.parentNode.removeChild(i),s&&s.forEach(function(e){return e(r)}),t)return t(r)},m=setTimeout(g.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=g.bind(null,i.onerror),i.onload=g.bind(null,i.onload),c&&document.head.appendChild(i)}}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){r.p=""}(),function(){if("undefined"!==typeof document){var e=function(e,t,o,s,a){var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",r.nc&&(n.nonce=r.nc);var i=function(r){if(n.onerror=n.onload=null,"load"===r.type)s();else{var o=r&&r.type,i=r&&r.target&&r.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+o+": "+i+")");c.name="ChunkLoadError",c.code="CSS_CHUNK_LOAD_FAILED",c.type=o,c.request=i,n.parentNode&&n.parentNode.removeChild(n),a(c)}};return n.onerror=n.onload=i,n.href=t,o?o.parentNode.insertBefore(n,o.nextSibling):document.head.appendChild(n),n},t=function(e,t){for(var r=document.getElementsByTagName("link"),o=0;o<r.length;o++){var s=r[o],a=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(a===e||a===t))return s}var n=document.getElementsByTagName("style");for(o=0;o<n.length;o++){s=n[o],a=s.getAttribute("data-href");if(a===e||a===t)return s}},o=function(o){return new Promise(function(s,a){var n=r.miniCssF(o),i=r.p+n;if(t(n,i))return s();e(o,i,null,s,a)})},s={524:0};r.f.miniCss=function(e,t){var r={141:1,234:1,344:1,505:1,525:1,631:1,638:1,908:1,917:1,970:1};s[e]?t.push(s[e]):0!==s[e]&&r[e]&&t.push(s[e]=o(e).then(function(){s[e]=0},function(t){throw delete s[e],t}))}}}(),function(){var e={524:0};r.f.j=function(t,o){var s=r.o(e,t)?e[t]:void 0;if(0!==s)if(s)o.push(s[2]);else{var a=new Promise(function(r,o){s=e[t]=[r,o]});o.push(s[2]=a);var n=r.p+r.u(t),i=new Error,c=function(o){if(r.o(e,t)&&(s=e[t],0!==s&&(e[t]=void 0),s)){var a=o&&("load"===o.type?"missing":o.type),n=o&&o.target&&o.target.src;i.message="Loading chunk "+t+" failed.\n("+a+": "+n+")",i.name="ChunkLoadError",i.type=a,i.request=n,s[1](i)}};r.l(n,c,"chunk-"+t,t)}},r.O.j=function(t){return 0===e[t]};var t=function(t,o){var s,a,n=o[0],i=o[1],c=o[2],l=0;if(n.some(function(t){return 0!==e[t]})){for(s in i)r.o(i,s)&&(r.m[s]=i[s]);if(c)var d=c(r)}for(t&&t(o);l<n.length;l++)a=n[l],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(d)},o=self["webpackChunklogtool_frontend"]=self["webpackChunklogtool_frontend"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=r.O(void 0,[504],function(){return r(3439)});o=r.O(o)})();
//# sourceMappingURL=app.69072d46.js.map