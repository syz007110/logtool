"use strict";(self["webpackChunklogtool_frontend"]=self["webpackChunklogtool_frontend"]||[]).push([[762],{6762:function(e,l,a){a.r(l),a.d(l,{default:function(){return C}});var r=a(641),o=a(33);const t={class:"error-codes-container"},u={class:"action-bar"},d={class:"search-section"},n={class:"action-section"},s={class:"pagination-wrapper"},i={class:"dialog-footer"},p={class:"dialog-footer"};function m(e,l,a,m,b,c){const _=(0,r.g2)("Search"),F=(0,r.g2)("el-icon"),g=(0,r.g2)("el-input"),f=(0,r.g2)("el-button"),h=(0,r.g2)("Plus"),k=(0,r.g2)("el-table-column"),v=(0,r.g2)("ExplanationCell"),C=(0,r.g2)("el-table"),y=(0,r.g2)("el-pagination"),V=(0,r.g2)("el-card"),w=(0,r.g2)("el-option"),x=(0,r.g2)("el-select"),R=(0,r.g2)("el-form-item"),W=(0,r.g2)("el-col"),E=(0,r.g2)("el-row"),S=(0,r.g2)("el-checkbox"),A=(0,r.g2)("el-radio"),U=(0,r.g2)("el-radio-group"),L=(0,r.g2)("el-form"),q=(0,r.g2)("el-dialog"),D=(0,r.g2)("el-descriptions-item"),Q=(0,r.g2)("el-descriptions"),K=(0,r.g2)("el-divider"),X=(0,r.gN)("loading");return(0,r.uX)(),(0,r.CE)("div",t,[(0,r.Lk)("div",u,[(0,r.Lk)("div",d,[(0,r.bF)(g,{modelValue:m.searchQuery,"onUpdate:modelValue":l[0]||(l[0]=e=>m.searchQuery=e),placeholder:"搜索故障码...",style:{width:"300px"},clearable:"",onInput:m.handleSearch},{prefix:(0,r.k6)(()=>[(0,r.bF)(F,null,{default:(0,r.k6)(()=>[(0,r.bF)(_)]),_:1})]),_:1},8,["modelValue","onInput"])]),(0,r.Lk)("div",n,[(0,r.bF)(f,{type:"success",onClick:m.openQueryDialog},{default:(0,r.k6)(()=>[...l[32]||(l[32]=[(0,r.eW)(" 故障码查询 ",-1)])]),_:1},8,["onClick"]),m.canCreate?((0,r.uX)(),(0,r.Wv)(f,{key:0,type:"primary",onClick:m.handleAdd},{default:(0,r.k6)(()=>[(0,r.bF)(F,null,{default:(0,r.k6)(()=>[(0,r.bF)(h)]),_:1}),l[33]||(l[33]=(0,r.eW)(" 添加故障码 ",-1))]),_:1},8,["onClick"])):(0,r.Q3)("",!0)])]),(0,r.bF)(V,{class:"list-card"},{default:(0,r.k6)(()=>[(0,r.bo)(((0,r.uX)(),(0,r.Wv)(C,{data:m.errorCodes,loading:m.loading,style:{width:"100%"}},{default:(0,r.k6)(()=>[(0,r.bF)(k,{prop:"subsystem",label:"子系统",width:"80"}),(0,r.bF)(k,{prop:"code",label:"故障码",width:"120"}),(0,r.bF)(k,{label:"提示信息","min-width":"140"},{default:(0,r.k6)(({row:e})=>[(0,r.bF)(v,{text:[e.user_hint,e.operation].filter(Boolean).join(", ")},null,8,["text"])]),_:1}),(0,r.bF)(k,{prop:"param1",label:"参数1","min-width":"100"},{default:(0,r.k6)(({row:e})=>[(0,r.bF)(v,{text:String(e.param1??""),always:!0},null,8,["text"])]),_:1}),(0,r.bF)(k,{prop:"param2",label:"参数2","min-width":"100"},{default:(0,r.k6)(({row:e})=>[(0,r.bF)(v,{text:String(e.param2??""),always:!0},null,8,["text"])]),_:1}),(0,r.bF)(k,{prop:"param3",label:"参数3","min-width":"100"},{default:(0,r.k6)(({row:e})=>[(0,r.bF)(v,{text:String(e.param3??""),always:!0},null,8,["text"])]),_:1}),(0,r.bF)(k,{prop:"param4",label:"参数4","min-width":"100"},{default:(0,r.k6)(({row:e})=>[(0,r.bF)(v,{text:String(e.param4??""),always:!0},null,8,["text"])]),_:1}),(0,r.bF)(k,{prop:"category",label:"分类",width:"100"}),m.canUpdate||m.canDelete?((0,r.uX)(),(0,r.Wv)(k,{key:0,label:"操作",width:"180"},{default:(0,r.k6)(({row:e})=>[m.canUpdate?((0,r.uX)(),(0,r.Wv)(f,{key:0,type:"primary",size:"small",onClick:l=>m.handleEdit(e)},{default:(0,r.k6)(()=>[...l[34]||(l[34]=[(0,r.eW)(" 编辑 ",-1)])]),_:2},1032,["onClick"])):(0,r.Q3)("",!0),m.canDelete?((0,r.uX)(),(0,r.Wv)(f,{key:1,type:"danger",size:"small",onClick:l=>m.handleDelete(e)},{default:(0,r.k6)(()=>[...l[35]||(l[35]=[(0,r.eW)(" 删除 ",-1)])]),_:2},1032,["onClick"])):(0,r.Q3)("",!0)]),_:1})):(0,r.Q3)("",!0)]),_:1},8,["data","loading"])),[[X,m.loading]]),(0,r.Lk)("div",s,[(0,r.bF)(y,{"current-page":m.currentPage,"page-size":m.pageSize,"page-sizes":[10,20,50,100],total:m.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:m.handleSizeChange,onCurrentChange:m.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1}),(0,r.bF)(q,{modelValue:m.showAddDialog,"onUpdate:modelValue":l[28]||(l[28]=e=>m.showAddDialog=e),title:m.getDialogTitle(),width:"1000px","close-on-click-modal":!1},{footer:(0,r.k6)(()=>[(0,r.Lk)("span",i,[(0,r.bF)(f,{onClick:l[27]||(l[27]=e=>m.showAddDialog=!1)},{default:(0,r.k6)(()=>[...l[46]||(l[46]=[(0,r.eW)("取消",-1)])]),_:1}),(0,r.bF)(f,{type:"primary",onClick:m.handleSave,loading:m.saving},{default:(0,r.k6)(()=>[(0,r.eW)((0,o.v_)(m.getSaveButtonText()),1)]),_:1},8,["onClick","loading"])])]),default:(0,r.k6)(()=>[(0,r.bF)(L,{ref:"errorCodeFormRef",model:m.errorCodeForm,rules:m.rules,"label-width":"140px",class:"error-code-form"},{default:(0,r.k6)(()=>[(0,r.bF)(E,{gutter:20},{default:(0,r.k6)(()=>[(0,r.bF)(W,{span:12},{default:(0,r.k6)(()=>[(0,r.bF)(R,{label:"子系统",prop:"subsystem"},{default:(0,r.k6)(()=>[(0,r.bF)(x,{modelValue:m.errorCodeForm.subsystem,"onUpdate:modelValue":l[1]||(l[1]=e=>m.errorCodeForm.subsystem=e),placeholder:"请选择子系统",onChange:m.handleSubsystemChange},{default:(0,r.k6)(()=>[(0,r.bF)(w,{label:"01：运动控制软件",value:"1"}),(0,r.bF)(w,{label:"02：人机交互软件",value:"2"}),(0,r.bF)(w,{label:"03：医生控制台软件",value:"3"}),(0,r.bF)(w,{label:"04：手术台车软件",value:"4"}),(0,r.bF)(w,{label:"05：驱动器软件",value:"5"}),(0,r.bF)(w,{label:"06：图像软件",value:"6"}),(0,r.bF)(w,{label:"07：工具工厂软件",value:"7"}),(0,r.bF)(w,{label:"08：远程运动控制软件",value:"8"}),(0,r.bF)(w,{label:"09：远程医生控制台软件",value:"9"}),(0,r.bF)(w,{label:"0A：远程驱动器软件",value:"A"})]),_:1},8,["modelValue","onChange"])]),_:1})]),_:1}),(0,r.bF)(W,{span:12},{default:(0,r.k6)(()=>[(0,r.bF)(R,{label:"故障码",prop:"code"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:m.errorCodeForm.code,"onUpdate:modelValue":l[2]||(l[2]=e=>m.errorCodeForm.code=e),placeholder:"格式：0X010A",onInput:m.handleCodeChange},null,8,["modelValue","onInput"])]),_:1})]),_:1})]),_:1}),m.showSyncOption?((0,r.uX)(),(0,r.Wv)(E,{key:0},{default:(0,r.k6)(()=>[(0,r.bF)(W,{span:24},{default:(0,r.k6)(()=>[(0,r.bF)(R,{label:"同步选项"},{default:(0,r.k6)(()=>[m.isLocalSubsystem?((0,r.uX)(),(0,r.Wv)(S,{key:0,modelValue:m.syncToRemote,"onUpdate:modelValue":l[3]||(l[3]=e=>m.syncToRemote=e)},{default:(0,r.k6)(()=>[(0,r.eW)(" 同步到远程端 ("+(0,o.v_)(m.getRemoteSubsystemLabel())+") ",1)]),_:1},8,["modelValue"])):(0,r.Q3)("",!0),m.isRemoteSubsystem?((0,r.uX)(),(0,r.Wv)(S,{key:1,modelValue:m.syncToLocal,"onUpdate:modelValue":l[4]||(l[4]=e=>m.syncToLocal=e)},{default:(0,r.k6)(()=>[(0,r.eW)(" 同步到本地端 ("+(0,o.v_)(m.getLocalSubsystemLabel())+") ",1)]),_:1},8,["modelValue"])):(0,r.Q3)("",!0)]),_:1})]),_:1})]),_:1})):(0,r.Q3)("",!0),(0,r.bF)(E,{gutter:20},{default:(0,r.k6)(()=>[(0,r.bF)(W,{span:12},{default:(0,r.k6)(()=>[(0,r.bF)(R,{label:"是否轴错误",prop:"is_axis_error"},{default:(0,r.k6)(()=>[(0,r.bF)(U,{modelValue:m.errorCodeForm.is_axis_error,"onUpdate:modelValue":l[5]||(l[5]=e=>m.errorCodeForm.is_axis_error=e)},{default:(0,r.k6)(()=>[(0,r.bF)(A,{label:!0},{default:(0,r.k6)(()=>[...l[36]||(l[36]=[(0,r.eW)("TRUE",-1)])]),_:1}),(0,r.bF)(A,{label:!1},{default:(0,r.k6)(()=>[...l[37]||(l[37]=[(0,r.eW)("FALSE",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,r.bF)(W,{span:12},{default:(0,r.k6)(()=>[(0,r.bF)(R,{label:"是否臂错误",prop:"is_arm_error"},{default:(0,r.k6)(()=>[(0,r.bF)(U,{modelValue:m.errorCodeForm.is_arm_error,"onUpdate:modelValue":l[6]||(l[6]=e=>m.errorCodeForm.is_arm_error=e)},{default:(0,r.k6)(()=>[(0,r.bF)(A,{label:!0},{default:(0,r.k6)(()=>[...l[38]||(l[38]=[(0,r.eW)("TRUE",-1)])]),_:1}),(0,r.bF)(A,{label:!1},{default:(0,r.k6)(()=>[...l[39]||(l[39]=[(0,r.eW)("FALSE",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,r.bF)(R,{label:"精简提示信息(中文)",prop:"short_message"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:m.errorCodeForm.short_message,"onUpdate:modelValue":l[7]||(l[7]=e=>m.errorCodeForm.short_message=e),type:"textarea",rows:2},null,8,["modelValue"])]),_:1}),(0,r.bF)(R,{label:"精简提示信息(英文)",prop:"short_message_en"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:m.errorCodeForm.short_message_en,"onUpdate:modelValue":l[8]||(l[8]=e=>m.errorCodeForm.short_message_en=e),type:"textarea",rows:2},null,8,["modelValue"])]),_:1}),(0,r.bF)(R,{label:"给用户的提示信息(中文)",prop:"user_hint"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:m.errorCodeForm.user_hint,"onUpdate:modelValue":l[9]||(l[9]=e=>m.errorCodeForm.user_hint=e),type:"textarea",rows:2},null,8,["modelValue"])]),_:1}),(0,r.bF)(R,{label:"给用户的提示信息(英文)",prop:"user_hint_en"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:m.errorCodeForm.user_hint_en,"onUpdate:modelValue":l[10]||(l[10]=e=>m.errorCodeForm.user_hint_en=e),type:"textarea",rows:2},null,8,["modelValue"])]),_:1}),(0,r.bF)(R,{label:"操作信息(中文)",prop:"operation"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:m.errorCodeForm.operation,"onUpdate:modelValue":l[11]||(l[11]=e=>m.errorCodeForm.operation=e),type:"textarea",rows:2},null,8,["modelValue"])]),_:1}),(0,r.bF)(R,{label:"操作信息(英文)",prop:"operation_en"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:m.errorCodeForm.operation_en,"onUpdate:modelValue":l[12]||(l[12]=e=>m.errorCodeForm.operation_en=e),type:"textarea",rows:2},null,8,["modelValue"])]),_:1}),(0,r.bF)(R,{label:"详细信息",prop:"detail"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:m.errorCodeForm.detail,"onUpdate:modelValue":l[13]||(l[13]=e=>m.errorCodeForm.detail=e),type:"textarea",rows:3},null,8,["modelValue"])]),_:1}),(0,r.bF)(R,{label:"检测方法",prop:"method"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:m.errorCodeForm.method,"onUpdate:modelValue":l[14]||(l[14]=e=>m.errorCodeForm.method=e),type:"textarea",rows:3},null,8,["modelValue"])]),_:1}),(0,r.bF)(E,{gutter:20},{default:(0,r.k6)(()=>[(0,r.bF)(W,{span:12},{default:(0,r.k6)(()=>[(0,r.bF)(R,{label:"参数1",prop:"param1"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:m.errorCodeForm.param1,"onUpdate:modelValue":l[15]||(l[15]=e=>m.errorCodeForm.param1=e)},null,8,["modelValue"])]),_:1})]),_:1}),(0,r.bF)(W,{span:12},{default:(0,r.k6)(()=>[(0,r.bF)(R,{label:"参数2",prop:"param2"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:m.errorCodeForm.param2,"onUpdate:modelValue":l[16]||(l[16]=e=>m.errorCodeForm.param2=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,r.bF)(E,{gutter:20},{default:(0,r.k6)(()=>[(0,r.bF)(W,{span:12},{default:(0,r.k6)(()=>[(0,r.bF)(R,{label:"参数3",prop:"param3"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:m.errorCodeForm.param3,"onUpdate:modelValue":l[17]||(l[17]=e=>m.errorCodeForm.param3=e)},null,8,["modelValue"])]),_:1})]),_:1}),(0,r.bF)(W,{span:12},{default:(0,r.k6)(()=>[(0,r.bF)(R,{label:"参数4",prop:"param4"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:m.errorCodeForm.param4,"onUpdate:modelValue":l[18]||(l[18]=e=>m.errorCodeForm.param4=e)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,r.bF)(E,{gutter:20},{default:(0,r.k6)(()=>[(0,r.bF)(W,{span:12},{default:(0,r.k6)(()=>[(0,r.bF)(R,{label:"故障分类",prop:"category"},{default:(0,r.k6)(()=>[(0,r.bF)(x,{modelValue:m.errorCodeForm.category,"onUpdate:modelValue":l[19]||(l[19]=e=>m.errorCodeForm.category=e),placeholder:"请选择分类"},{default:(0,r.k6)(()=>[(0,r.bF)(w,{label:"软件",value:"软件"}),(0,r.bF)(w,{label:"硬件",value:"硬件"}),(0,r.bF)(w,{label:"日志记录",value:"日志记录"}),(0,r.bF)(w,{label:"操作提示",value:"操作提示"}),(0,r.bF)(w,{label:"安全保护",value:"安全保护"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,r.bF)(W,{span:12},{default:(0,r.k6)(()=>[(0,r.bF)(R,{label:"故障等级",prop:"level"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:m.errorCodeForm.level,"onUpdate:modelValue":l[20]||(l[20]=e=>m.errorCodeForm.level=e),readonly:"",placeholder:"根据故障码自动判断"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,r.bF)(E,{gutter:20},{default:(0,r.k6)(()=>[(0,r.bF)(W,{span:12},{default:(0,r.k6)(()=>[(0,r.bF)(R,{label:"处理措施",prop:"solution"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{value:m.getSolutionDisplay(m.errorCodeForm.solution),readonly:"",placeholder:"根据故障码自动判断"},null,8,["value"])]),_:1})]),_:1}),(0,r.bF)(W,{span:12},{default:(0,r.k6)(()=>[(0,r.bF)(R,{label:"技术排查方案",prop:"tech_solution"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:m.errorCodeForm.tech_solution,"onUpdate:modelValue":l[21]||(l[21]=e=>m.errorCodeForm.tech_solution=e),type:"textarea",rows:2},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,r.bF)(R,{label:"解释",prop:"explanation"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:m.errorCodeForm.explanation,"onUpdate:modelValue":l[22]||(l[22]=e=>m.errorCodeForm.explanation=e),type:"textarea",rows:3},null,8,["modelValue"])]),_:1}),(0,r.bF)(E,{gutter:20},{default:(0,r.k6)(()=>[(0,r.bF)(W,{span:8},{default:(0,r.k6)(()=>[(0,r.bF)(R,{label:"专家模式",prop:"for_expert"},{default:(0,r.k6)(()=>[(0,r.bF)(U,{modelValue:m.errorCodeForm.for_expert,"onUpdate:modelValue":l[23]||(l[23]=e=>m.errorCodeForm.for_expert=e)},{default:(0,r.k6)(()=>[(0,r.bF)(A,{label:!0},{default:(0,r.k6)(()=>[...l[40]||(l[40]=[(0,r.eW)("TRUE",-1)])]),_:1}),(0,r.bF)(A,{label:!1},{default:(0,r.k6)(()=>[...l[41]||(l[41]=[(0,r.eW)("FALSE",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,r.bF)(W,{span:8},{default:(0,r.k6)(()=>[(0,r.bF)(R,{label:"初学者模式",prop:"for_novice"},{default:(0,r.k6)(()=>[(0,r.bF)(U,{modelValue:m.errorCodeForm.for_novice,"onUpdate:modelValue":l[24]||(l[24]=e=>m.errorCodeForm.for_novice=e)},{default:(0,r.k6)(()=>[(0,r.bF)(A,{label:!0},{default:(0,r.k6)(()=>[...l[42]||(l[42]=[(0,r.eW)("TRUE",-1)])]),_:1}),(0,r.bF)(A,{label:!1},{default:(0,r.k6)(()=>[...l[43]||(l[43]=[(0,r.eW)("FALSE",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,r.bF)(W,{span:8},{default:(0,r.k6)(()=>[(0,r.bF)(R,{label:"相关日志",prop:"related_log"},{default:(0,r.k6)(()=>[(0,r.bF)(U,{modelValue:m.errorCodeForm.related_log,"onUpdate:modelValue":l[25]||(l[25]=e=>m.errorCodeForm.related_log=e)},{default:(0,r.k6)(()=>[(0,r.bF)(A,{label:!0},{default:(0,r.k6)(()=>[...l[44]||(l[44]=[(0,r.eW)("TRUE",-1)])]),_:1}),(0,r.bF)(A,{label:!1},{default:(0,r.k6)(()=>[...l[45]||(l[45]=[(0,r.eW)("FALSE",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),(0,r.bF)(R,{label:"停止上报方法",prop:"stop_report"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:m.errorCodeForm.stop_report,"onUpdate:modelValue":l[26]||(l[26]=e=>m.errorCodeForm.stop_report=e)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"]),(0,r.bF)(q,{modelValue:m.showQueryDialog,"onUpdate:modelValue":l[31]||(l[31]=e=>m.showQueryDialog=e),title:"故障码查询",width:"600px","close-on-click-modal":!1},{footer:(0,r.k6)(()=>[(0,r.Lk)("span",p,[(0,r.bF)(f,{onClick:l[30]||(l[30]=e=>m.showQueryDialog=!1)},{default:(0,r.k6)(()=>[...l[49]||(l[49]=[(0,r.eW)("关闭",-1)])]),_:1})])]),default:(0,r.k6)(()=>[(0,r.bF)(L,{model:m.queryForm,"label-width":"140px"},{default:(0,r.k6)(()=>[(0,r.bF)(R,{label:"完整故障码"},{default:(0,r.k6)(()=>[(0,r.bF)(g,{modelValue:m.queryForm.fullCode,"onUpdate:modelValue":l[29]||(l[29]=e=>m.queryForm.fullCode=e),placeholder:"例如 141010A 或 0X010A（可含子系统前缀）",clearable:""},null,8,["modelValue"])]),_:1}),(0,r.bF)(R,null,{default:(0,r.k6)(()=>[(0,r.bF)(f,{type:"primary",loading:m.queryLoading,onClick:m.handleQuery},{default:(0,r.k6)(()=>[...l[47]||(l[47]=[(0,r.eW)("查询",-1)])]),_:1},8,["loading","onClick"]),(0,r.bF)(f,{onClick:m.resetQuery},{default:(0,r.k6)(()=>[...l[48]||(l[48]=[(0,r.eW)("重置",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"]),m.queryResult?((0,r.uX)(),(0,r.Wv)(V,{key:0,class:"mt-2"},{default:(0,r.k6)(()=>[(0,r.bF)(Q,{column:1,border:"",title:"结果信息"},{default:(0,r.k6)(()=>[(0,r.bF)(D,{label:"解释"},{default:(0,r.k6)(()=>[(0,r.eW)((0,o.v_)(m.buildPrefixedExplanation(m.queryResult,m.foundRecord)),1)]),_:1})]),_:1}),(0,r.bF)(K),(0,r.bF)(Q,{column:1,border:"",title:"参数含义"},{default:(0,r.k6)(()=>[(0,r.bF)(D,{label:"参数1"},{default:(0,r.k6)(()=>[(0,r.eW)((0,o.v_)(m.foundRecord?.param1||"-"),1)]),_:1}),(0,r.bF)(D,{label:"参数2"},{default:(0,r.k6)(()=>[(0,r.eW)((0,o.v_)(m.foundRecord?.param2||"-"),1)]),_:1}),(0,r.bF)(D,{label:"参数3"},{default:(0,r.k6)(()=>[(0,r.eW)((0,o.v_)(m.foundRecord?.param3||"-"),1)]),_:1}),(0,r.bF)(D,{label:"参数4"},{default:(0,r.k6)(()=>[(0,r.eW)((0,o.v_)(m.foundRecord?.param4||"-"),1)]),_:1})]),_:1}),(0,r.bF)(K),(0,r.bF)(Q,{column:1,border:"",title:"更多信息"},{default:(0,r.k6)(()=>[(0,r.bF)(D,{label:"详细信息"},{default:(0,r.k6)(()=>[(0,r.eW)((0,o.v_)(m.foundRecord?.detail||"-"),1)]),_:1}),(0,r.bF)(D,{label:"检查方法"},{default:(0,r.k6)(()=>[(0,r.eW)((0,o.v_)(m.foundRecord?.method||"-"),1)]),_:1}),(0,r.bF)(D,{label:"技术排查方案"},{default:(0,r.k6)(()=>[(0,r.eW)((0,o.v_)(m.foundRecord?.tech_solution||"-"),1)]),_:1}),(0,r.bF)(D,{label:"故障分类"},{default:(0,r.k6)(()=>[(0,r.eW)((0,o.v_)(m.foundRecord?.category||"-"),1)]),_:1})]),_:1})]),_:1})):(0,r.Q3)("",!0)]),_:1},8,["modelValue"])])}var b=a(953),c=a(6278),_=a(163),F=a(7918),g=a(8548),f=a(5495),h={name:"ErrorCodes",components:{Search:g.Search,Plus:g.Plus,ExplanationCell:{name:"ExplanationCell",props:{text:{type:String,default:""},always:{type:Boolean,default:!1}},setup(e){const l=(0,b.KR)(null),a=(0,b.KR)(!1);let o=null;const t=()=>{const e=l.value;e&&(a.value=e.scrollWidth-e.clientWidth>1)},u=()=>{t()};return(0,r.sV)(()=>{t(),"ResizeObserver"in window?(o=new ResizeObserver(()=>t()),l.value&&o.observe(l.value)):window.addEventListener("resize",t)}),(0,r.xo)(()=>{o&&l.value&&o.unobserve(l.value),o&&o.disconnect(),o=null,window.removeEventListener("resize",t)}),()=>(0,r.h)((0,r.g2)("el-tooltip"),{content:e.text,placement:"top",effect:"dark",popperClass:"explanation-tooltip dark",teleported:!0,showAfter:120,disabled:""===(e.text??"")||!e.always&&!a.value},{default:()=>(0,r.h)("span",{ref:l,class:"explanation-ellipsis",style:"display:inline-block;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;",onMouseenter:u},e.text)})}}},setup(){const e=(0,c.Pj)(),l=(0,b.KR)(!1),a=(0,b.KR)(!1),o=(0,b.KR)(!1),t=(0,b.KR)(!1),u=(0,b.KR)(null),d=(0,b.KR)(""),n=(0,b.KR)(1),s=(0,b.KR)(10),i=(0,b.KR)(null),p=(0,b.KR)(!1),m=(0,b.Kh)({fullCode:""}),g=(0,b.KR)(null),h=(0,b.KR)(null),k=(0,b.KR)(!1),v=(0,b.KR)(!1),C=(0,b.Kh)({subsystem:"",code:"",is_axis_error:!1,is_arm_error:!1,short_message:"",short_message_en:"",user_hint:"",user_hint_en:"",operation:"",operation_en:"",detail:"",method:"",param1:"",param2:"",param3:"",param4:"",solution:"",for_expert:!0,for_novice:!0,related_log:!1,stop_report:"",level:"",tech_solution:"",explanation:"",category:""}),y=(0,r.EW)(()=>{const e={subsystem:[{required:!0,message:"请选择子系统",trigger:"change"}],code:[{required:!0,message:"请输入故障码",trigger:"blur"},{pattern:/^0X[0-9A-F]{3}[ABCDE]$/,message:"故障码格式不正确，必须以0X开头+16进制的故障码（最后一位表示等级分类）",trigger:"blur"}],detail:[{required:!0,message:"请输入详细信息",trigger:"blur"}],method:[{required:!0,message:"请输入检测方法",trigger:"blur"}],param1:[{required:!0,message:"请输入参数1",trigger:"blur"}],param2:[{required:!0,message:"请输入参数2",trigger:"blur"}],param3:[{required:!0,message:"请输入参数3",trigger:"blur"}],param4:[{required:!0,message:"请输入参数4",trigger:"blur"}],category:[{required:!0,message:"请选择故障分类",trigger:"change"}]},l=C.operation&&""!==C.operation.trim();e.short_message=[{required:!l,message:"精简提示信息和操作信息不能都为空",trigger:"blur"}],e.user_hint=[{required:!l,message:"用户提示信息和操作信息不能都为空",trigger:"blur"}],e.operation=[{required:!(C.short_message&&""!==C.short_message.trim())&&!(C.user_hint&&""!==C.user_hint.trim()),message:"精简提示信息、用户提示信息和操作信息至少需要填写两项",trigger:"blur"}];const a=C.operation_en&&""!==C.operation_en.trim();return e.short_message_en=[{required:!a,message:"英文精简提示信息和英文操作信息不能都为空",trigger:"blur"}],e.user_hint_en=[{required:!a,message:"英文用户提示信息和英文操作信息不能都为空",trigger:"blur"}],e.operation_en=[{required:!(C.short_message_en&&""!==C.short_message_en.trim())&&!(C.user_hint_en&&""!==C.user_hint_en.trim()),message:"英文精简提示信息、英文用户提示信息和英文操作信息至少需要填写两项",trigger:"blur"}],e}),V=e=>{if(!e)return{level:"无",solution:"tips"};const l=e.match(/^0X([0-9A-F]{3})([ABCDE])$/);if(!l)return{level:"无",solution:"tips"};const[,a,r]=l;let o="无";switch(r){case"A":o="高级";break;case"B":o="中级";break;case"C":o="低级";break;default:o="无";break}let t="tips";switch(r){case"A":t="recoverable";break;case"B":t="recoverable";break;case"C":t="ignorable";break;case"D":t="tips";break;case"E":t="log";break}return{level:o,solution:t}},w=()=>{const{level:e,solution:l}=V(C.code);C.level=e,C.solution=l},x=e=>{const l={recoverable:"可恢复故障",unrecoverable:"不可恢复故障",ignorable:"可忽略故障",tips:"提示信息",log:"日志记录"};return l[e]||e},R=(0,r.EW)(()=>e.getters["errorCodes/errorCodesList"]),W=(0,r.EW)(()=>e.getters["errorCodes/totalCount"]),E=(0,r.EW)(()=>"admin"===e.getters["auth/userRole"]||"expert"===e.getters["auth/userRole"]),S=(0,r.EW)(()=>"admin"===e.getters["auth/userRole"]||"expert"===e.getters["auth/userRole"]),A=(0,r.EW)(()=>"admin"===e.getters["auth/userRole"]||"expert"===e.getters["auth/userRole"]),U=(0,r.EW)(()=>{const e=C.subsystem;return"1"===e||"8"===e||"3"===e||"9"===e||"5"===e||"A"===e}),L=(0,r.EW)(()=>{const e=C.subsystem;return"1"===e||"3"===e||"5"===e}),q=(0,r.EW)(()=>{const e=C.subsystem;return"8"===e||"9"===e||"A"===e}),D=async()=>{try{l.value=!0,await e.dispatch("errorCodes/fetchErrorCodes",{page:n.value,limit:s.value,keyword:d.value})}catch(a){_.nk.error("加载故障码失败")}finally{l.value=!1}},Q=()=>{n.value=1,D()},K=e=>{s.value=e,n.value=1,D()},X=e=>{n.value=e,D()},T=()=>{Object.keys(C).forEach(e=>{"boolean"===typeof C[e]?C[e]="for_expert"===e||"for_novice"===e:C[e]=""}),u.value=null,k.value=!1,v.value=!1,i.value&&i.value.clearValidate()},z=()=>{T(),o.value=!0},B=()=>{t.value=!0},P=e=>{u.value=e,Object.keys(C).forEach(l=>{void 0!==e[l]&&(C[l]=e[l])}),k.value=!1,v.value=!1,o.value=!0},$=async l=>{try{await F.s.confirm(`确定要删除故障码 "${l.code}" 吗？`,"删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await e.dispatch("errorCodes/deleteErrorCode",l.id),_.nk.success("删除成功"),D()}catch(a){"cancel"!==a&&_.nk.error("删除失败")}},j=()=>u.value?L.value?"更新本地故障码":q.value?"更新远程故障码":"编辑故障码":L.value?"创建本地故障码":q.value?"创建远程故障码":"添加故障码",O=e=>{if(!e)return"";const l=String(e).trim().toUpperCase();if(l.length>=5){const e=l.slice(-4);if(/^[0-9A-F]{3}[A-E]$/.test(e))return"0X"+e}return!l.startsWith("0X")&&/^[0-9A-F]{3}[A-E]$/.test(l)?"0X"+l:l},I=async()=>{const e=m.fullCode?.trim();if(e){p.value=!0,g.value=null,h.value=null;try{const a={code:e},r=await f.A.explanations.preview(a);g.value=r.data;let o=g.value?.subsystem||null;if(!o&&e.length>=5){const l=e.charAt(0);/^[1-9A]$/.test(l)&&(o=l)}const t=O(e);if(o)try{const e=await f.A.errorCodes.getByCodeAndSubsystem(t,o);h.value=e?.data?.errorCode||null}catch(l){h.value=null}}catch(a){_.nk.error(a?.response?.data?.message||"查询失败")}finally{p.value=!1}}else _.nk.warning("请输入完整故障码")},M=()=>{m.fullCode="",g.value=null,h.value=null},N=(e,l)=>{if(!e)return"-";const a=e?.prefix||"",r=[l?.user_hint,l?.operation].filter(Boolean).join(" "),o=r||"-";return a?`${a} ${o}`:o},G=()=>{const e={1:"08：远程运动控制软件",3:"09：远程医生控制台软件",5:"0A：远程驱动器软件"};return e[C.subsystem]||""},H=()=>{const e={8:"01：运动控制软件",9:"03：医生控制台软件",A:"05：驱动器软件"};return e[C.subsystem]||""},J=()=>u.value?"更新":"创建",Y=()=>{k.value=!1,v.value=!1},Z=e=>{const l={1:"8",8:"1",3:"9",9:"3",5:"A",A:"5"};return l[e]},ee=async()=>{try{await i.value.validate(),a.value=!0;const l=[];if(u.value?l.push(e.dispatch("errorCodes/updateErrorCode",{id:u.value.id,data:C})):l.push(e.dispatch("errorCodes/createErrorCode",C)),k.value&&L.value){const a=Z(C.subsystem),r={...C,subsystem:a};u.value?l.push(e.dispatch("errorCodes/updateErrorCodeByCode",{code:C.code,subsystem:a,data:r})):l.push(e.dispatch("errorCodes/createErrorCode",r))}if(v.value&&q.value){const a=Z(C.subsystem),r={...C,subsystem:a};u.value?l.push(e.dispatch("errorCodes/updateErrorCodeByCode",{code:C.code,subsystem:a,data:r})):l.push(e.dispatch("errorCodes/createErrorCode",r))}await Promise.all(l);const r=u.value?"更新":"创建";_.nk.success(`${r}成功`),o.value=!1,T(),D()}catch(l){l.response&&l.response.data&&l.response.data.errors?_.nk.error(l.response.data.errors.join(", ")):_.nk.error("保存失败")}finally{a.value=!1}};return(0,r.wB)([()=>C.short_message,()=>C.user_hint,()=>C.operation,()=>C.short_message_en,()=>C.user_hint_en,()=>C.operation_en],()=>{i.value&&i.value.clearValidate(["short_message","user_hint","operation","short_message_en","user_hint_en","operation_en"])}),(0,r.sV)(()=>{D()}),{loading:l,saving:a,showAddDialog:o,showQueryDialog:t,editingErrorCode:u,searchQuery:d,currentPage:n,pageSize:s,errorCodeFormRef:i,queryLoading:p,queryForm:m,queryResult:g,foundRecord:h,errorCodeForm:C,rules:y,errorCodes:R,total:W,canCreate:E,canUpdate:S,canDelete:A,syncToRemote:k,syncToLocal:v,showSyncOption:U,isLocalSubsystem:L,isRemoteSubsystem:q,handleSearch:Q,handleSizeChange:K,handleCurrentChange:X,handleAdd:z,openQueryDialog:B,handleEdit:P,handleDelete:$,handleSave:ee,handleCodeChange:w,getSolutionDisplay:x,buildPrefixedExplanation:N,handleQuery:I,resetQuery:M,getDialogTitle:j,getRemoteSubsystemLabel:G,getLocalSubsystemLabel:H,handleSubsystemChange:Y,getSaveButtonText:J}}},k=a(6262);const v=(0,k.A)(h,[["render",m],["__scopeId","data-v-47d4cf51"]]);var C=v}}]);
//# sourceMappingURL=762.9641eb2d.js.map