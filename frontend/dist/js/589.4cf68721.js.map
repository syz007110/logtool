{"version":3,"file":"js/589.4cf68721.js","mappings":"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","sources":["webpack://logtool-frontend/./src/views/Logs.vue","webpack://logtool-frontend/./src/views/Logs.vue?e192"],"sourcesContent":["<template>\r\n  <div class=\"logs-container\">\r\n    <!-- 上传区域 -->\r\n    <el-card class=\"upload-card\">\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <span>日志上传</span>\r\n        </div>\r\n      </template>\r\n      \r\n      <!-- 总体进度条 -->\r\n      <div v-if=\"uploading\" class=\"overall-progress\">\r\n        <el-progress \r\n          :percentage=\"overallProgress\" \r\n          :status=\"overallProgress >= 100 ? 'success' : ''\"\r\n          :stroke-width=\"12\"\r\n          :show-text=\"true\"\r\n          :format=\"progressFormat\"\r\n        />\r\n        <div class=\"progress-stages\">\r\n          <span class=\"stage\" :class=\"{ active: overallProgress >= 0, completed: overallProgress >= 30 }\">\r\n            文件上传\r\n          </span>\r\n          <span class=\"stage\" :class=\"{ active: overallProgress >= 30, completed: overallProgress >= 60 }\">\r\n            解密处理\r\n          </span>\r\n          <span class=\"stage\" :class=\"{ active: overallProgress >= 60, completed: overallProgress >= 100 }\">\r\n            解析完成\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <el-upload\r\n        ref=\"uploadRef\"\r\n        :action=\"uploadUrl\"\r\n        :headers=\"uploadHeaders\"\r\n        :before-upload=\"beforeUpload\"\r\n        :on-success=\"onUploadSuccess\"\r\n        :on-error=\"onUploadError\"\r\n        :on-exceed=\"onExceed\"\r\n        :on-change=\"onFileChange\"\r\n        :on-remove=\"onFileRemove\"\r\n        :on-progress=\"onUploadProgress\"\r\n        :auto-upload=\"false\"\r\n        :show-file-list=\"false\"\r\n        :multiple=\"true\"\r\n        :limit=\"50\"\r\n        accept=\".medbot\"\r\n        drag\r\n        name=\"file\"\r\n        :disabled=\"uploading\"\r\n      >\r\n        <el-icon class=\"el-icon--upload\"><upload-filled /></el-icon>\r\n        <div class=\"el-upload__text\">\r\n          将文件拖到此处，或<em>点击上传</em>\r\n        </div>\r\n        <template #tip>\r\n          <div class=\"el-upload__tip\">\r\n            <div v-if=\"!uploading\">\r\n              支持上传 .medbot 文件，最多50个文件，总大小不超过200MB，上传后将自动解密并解析\r\n            </div>\r\n            <div v-else class=\"parsing-tip\">\r\n              <el-icon class=\"is-loading\"><Refresh /></el-icon>\r\n              正在解析中，请勿刷新页面...\r\n            </div>\r\n          </div>\r\n        </template>\r\n      </el-upload>\r\n      \r\n      <!-- 自定义文件列表 -->\r\n      <div v-if=\"uploadFileList.length > 0\" class=\"custom-file-list\">\r\n        <div class=\"file-list-header\">\r\n          <span>已选择的文件 ({{ uploadFileList.length }})</span>\r\n          <el-button type=\"text\" size=\"small\" @click=\"clearUpload\" :disabled=\"uploading\">\r\n            清空\r\n          </el-button>\r\n        </div>\r\n        <div class=\"file-items\">\r\n          <div \r\n            v-for=\"(file, index) in uploadFileList\" \r\n            :key=\"index\" \r\n            class=\"file-item\"\r\n          >\r\n            <el-icon><Document /></el-icon>\r\n            <span class=\"file-name\">{{ file.name || file.originalname }}</span>\r\n            <span class=\"file-size\">{{ formatFileSize(file.size || file.raw?.size || 0) }}</span>\r\n            <el-button \r\n              type=\"text\" \r\n              size=\"small\" \r\n              @click=\"removeFile(index)\"\r\n              :disabled=\"uploading\"\r\n            >\r\n              <el-icon><Delete /></el-icon>\r\n            </el-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <!-- 密钥输入区域 -->\r\n      <div class=\"key-input-section\">\r\n        <div class=\"key-input-row\">\r\n          <el-input\r\n            v-model=\"decryptKey\"\r\n            placeholder=\"请输入解密密钥（MAC地址格式，如：00-01-05-77-6a-09）\"\r\n            style=\"width: 300px;\"\r\n            clearable\r\n            @blur=\"validateKeyFormat\"\r\n          >\r\n            <template #prefix>\r\n              <el-icon><Key /></el-icon>\r\n            </template>\r\n          </el-input>\r\n          \r\n          <el-button \r\n            type=\"primary\" \r\n            plain \r\n            @click=\"autoFillDeviceId\"\r\n            :disabled=\"!decryptKey.trim()\"\r\n          >\r\n            自动填充设备编号\r\n          </el-button>\r\n          \r\n          <span class=\"key-separator\">或</span>\r\n          \r\n          <el-upload\r\n            ref=\"keyUploadRef\"\r\n            :auto-upload=\"false\"\r\n            :show-file-list=\"false\"\r\n            accept=\".txt\"\r\n            :before-upload=\"beforeKeyUpload\"\r\n            :on-change=\"onKeyFileChange\"\r\n          >\r\n            <el-button type=\"primary\" plain>\r\n              <el-icon><Upload /></el-icon>\r\n              上传密钥文件\r\n            </el-button>\r\n          </el-upload>\r\n        </div>\r\n        \r\n        <div v-if=\"keyFileName\" class=\"key-file-info\">\r\n          <el-tag type=\"success\" size=\"small\">\r\n            <el-icon><Document /></el-icon>\r\n            {{ keyFileName }}\r\n          </el-tag>\r\n        </div>\r\n        \r\n        <div v-if=\"keyError\" class=\"key-error\">\r\n          <el-tag type=\"danger\" size=\"small\">\r\n            {{ keyError }}\r\n          </el-tag>\r\n        </div>\r\n      </div>\r\n      \r\n      <!-- 设备编号输入区域 -->\r\n      <div class=\"device-input-section\">\r\n        <div class=\"device-input-row\">\r\n          <el-input\r\n            v-model=\"deviceId\"\r\n            placeholder=\"设备编号（格式：数字或字母组合，例：4371-01、ABC-12，默认为0000-00）\"\r\n            style=\"width: 300px;\"\r\n            clearable\r\n            @blur=\"validateDeviceIdFormat\"\r\n          >\r\n            <template #prefix>\r\n              <el-icon><Monitor /></el-icon>\r\n            </template>\r\n          </el-input>\r\n          \r\n          <el-button \r\n            type=\"primary\" \r\n            plain \r\n            @click=\"autoFillKey\"\r\n            :disabled=\"!deviceId.trim()\"\r\n          >\r\n            自动填充密钥\r\n          </el-button>\r\n        </div>\r\n        \r\n        <div v-if=\"deviceIdError\" class=\"device-error\">\r\n          <el-tag type=\"danger\" size=\"small\">\r\n            {{ deviceIdError }}\r\n          </el-tag>\r\n        </div>\r\n      </div>\r\n      \r\n      <div class=\"upload-actions\">\r\n        <el-button \r\n          type=\"primary\" \r\n          @click=\"submitUpload\" \r\n          :loading=\"uploading\"\r\n          :disabled=\"uploading || !decryptKey.trim() || uploadFileList.length === 0\"\r\n        >\r\n          {{ uploading ? '解析中...' : '上传并解析' }}\r\n        </el-button>\r\n      </div>\r\n    </el-card>\r\n    \r\n    <!-- 日志列表 -->\r\n    <el-card class=\"list-card\">\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <span>日志列表</span>\r\n          <div class=\"header-actions\">\r\n            <!-- 批量操作区域 -->\r\n            <div v-if=\"selectedLogs.length > 0\" class=\"batch-operations\">\r\n              <!-- 批量操作按钮组 -->\r\n              <div class=\"batch-actions\">\r\n                <el-button \r\n                  type=\"primary\" \r\n                  size=\"small\" \r\n                  @click=\"handleBatchAnalyze\"\r\n                  :disabled=\"!canBatchOperate || !isSameDevice\"\r\n                  :title=\"deviceCheckMessage\"\r\n                >\r\n                  <el-icon><Monitor /></el-icon>\r\n                  批量分析 ({{ selectedLogs.length }})\r\n                </el-button>\r\n                \r\n                <el-button \r\n                  type=\"success\" \r\n                  size=\"small\" \r\n                  @click=\"handleBatchDownload\"\r\n                  :disabled=\"!canBatchOperate\"\r\n                >\r\n                  <el-icon><Download /></el-icon>\r\n                  批量下载 ({{ selectedLogs.length }})\r\n                </el-button>\r\n                \r\n                <el-button \r\n                  type=\"danger\" \r\n                  size=\"small\" \r\n                  @click=\"handleBatchDelete\"\r\n                  :disabled=\"!canBatchDelete\"\r\n                >\r\n                  <el-icon><Delete /></el-icon>\r\n                  批量删除 ({{ selectedLogs.length }})\r\n                </el-button>\r\n                <el-tooltip \r\n                  content=\"普通用户只能删除自己上传的日志\" \r\n                  placement=\"top\" \r\n                  v-if=\"userRole === 3\"\r\n                >\r\n                  <el-icon class=\"info-icon\"><InfoFilled /></el-icon>\r\n                </el-tooltip>\r\n                \r\n                <el-button \r\n                  type=\"info\" \r\n                  size=\"small\" \r\n                  @click=\"clearSelection\"\r\n                >\r\n                  取消选择\r\n                </el-button>\r\n              </div>\r\n              \r\n              <!-- 设备检测提示 -->\r\n              <div v-if=\"deviceCheckMessage\" class=\"device-check-tip\">\r\n                <el-tag type=\"warning\" size=\"small\">\r\n                  <el-icon><Warning /></el-icon>\r\n                  <span class=\"device-message\">{{ deviceCheckMessage }}</span>\r\n                </el-tag>\r\n              </div>\r\n            </div>\r\n            \r\n            <!-- 搜索和刷新区域 -->\r\n            <div class=\"search-section\">\r\n              <el-input\r\n                v-model=\"filterDeviceId\"\r\n                placeholder=\"按设备编号筛选\"\r\n                class=\"search-input\"\r\n                clearable\r\n                @keyup.enter=\"loadLogs\"\r\n              >\r\n                <template #prefix>\r\n                  <el-icon><Search /></el-icon>\r\n                </template>\r\n              </el-input>\r\n              <el-button type=\"primary\" size=\"small\" @click=\"loadLogs\">\r\n                <el-icon><Refresh /></el-icon>\r\n                刷新\r\n              </el-button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </template>\r\n      \r\n      <el-table\r\n        :data=\"logs\"\r\n        :loading=\"loading\"\r\n        style=\"width: 100%\"\r\n        v-loading=\"loading\"\r\n        @selection-change=\"handleSelectionChange\"\r\n      >\r\n        <el-table-column type=\"selection\" width=\"55\" />\r\n        <el-table-column prop=\"original_name\" label=\"原始文件名\" width=\"200\" />\r\n        <el-table-column prop=\"device_id\" label=\"设备编号\" width=\"120\" />\r\n        <el-table-column prop=\"uploader_id\" label=\"用户ID\" width=\"80\" />\r\n        <el-table-column prop=\"upload_time\" label=\"上传时间\" width=\"150\">\r\n          <template #default=\"{ row }\">\r\n            {{ formatDate(row.upload_time) }}\r\n          </template>\r\n        </el-table-column>\r\n        \r\n        <el-table-column label=\"状态\" width=\"120\" align=\"center\">\r\n          <template #default=\"{ row }\">\r\n            <el-tag :type=\"getStatusType(row.status)\" size=\"small\">\r\n              {{ getStatusText(row.status) }}\r\n            </el-tag>\r\n            <div v-if=\"!canOperate(row)\" class=\"status-tip\">\r\n              <el-icon><Warning /></el-icon>\r\n              <span>处理中，请稍候</span>\r\n            </div>\r\n          </template>\r\n        </el-table-column>\r\n        \r\n        <el-table-column label=\"操作\" width=\"240\" fixed=\"right\">\r\n          <template #default=\"{ row }\">\r\n            <el-button \r\n              size=\"small\" \r\n              type=\"primary\"\r\n              @click=\"goToLogAnalysis(row)\"\r\n              :disabled=\"!canOperate(row)\"\r\n            >\r\n              分析\r\n            </el-button>\r\n            \r\n            <el-button \r\n              size=\"small\" \r\n              type=\"success\"\r\n              @click=\"handleDownload(row)\"\r\n              :disabled=\"!canOperate(row)\"\r\n            >\r\n              下载\r\n            </el-button>\r\n            \r\n            <el-button \r\n              size=\"small\" \r\n              type=\"danger\" \r\n              @click=\"handleDelete(row)\"\r\n              v-if=\"canDeleteLog(row)\"\r\n              :disabled=\"!canOperate(row)\"\r\n            >\r\n              删除\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      \r\n      <!-- 分页 -->\r\n      <div class=\"pagination-wrapper\">\r\n        <el-pagination\r\n          :current-page=\"currentPage\"\r\n          :page-size=\"pageSize\"\r\n          :page-sizes=\"[10, 20, 50, 100]\"\r\n          :total=\"total\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n        />\r\n      </div>\r\n    </el-card>\r\n\r\n    <!-- 日志分析弹窗 -->\r\n    <el-dialog v-model=\"showEntriesDialog\" title=\"日志分析\" width=\"900px\">\r\n      <el-table :data=\"logEntries\" style=\"width: 100%\">\r\n        <el-table-column prop=\"timestamp\" label=\"时间戳\" width=\"180\" />\r\n        <el-table-column prop=\"error_code\" label=\"故障码\" width=\"100\" />\r\n        <el-table-column prop=\"param1\" label=\"参数1\" width=\"100\" />\r\n        <el-table-column prop=\"param2\" label=\"参数2\" width=\"100\" />\r\n        <el-table-column prop=\"param3\" label=\"参数3\" width=\"100\" />\r\n        <el-table-column prop=\"param4\" label=\"参数4\" width=\"100\" />\r\n        <el-table-column prop=\"explanation\" label=\"日志解释\" />\r\n      </el-table>\r\n    </el-dialog>\r\n\r\n\r\n\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, computed, onMounted, nextTick } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRouter } from 'vue-router'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\nimport { Search, Monitor, Refresh, Upload, Key, Document, UploadFilled, Delete, Warning, InfoFilled } from '@element-plus/icons-vue'\r\n\r\nexport default {\r\n  name: 'Logs',\r\n  setup() {\r\n    const store = useStore()\r\n    const router = useRouter()\r\n    \r\n    // 响应式数据\r\n    const loading = ref(false)\r\n    const uploading = ref(false)\r\n    const overallProgress = ref(0) // 总体进度\r\n    const uploadRef = ref(null)\r\n    const keyUploadRef = ref(null)\r\n    const currentPage = ref(1)\r\n    const pageSize = ref(20)\r\n    const decryptKey = ref('') // 密钥输入\r\n    const keyFileName = ref('') // 密钥文件名\r\n    const deviceId = ref('') // 设备编号\r\n    const filterDeviceId = ref('') // 筛选设备编号\r\n    const uploadFileList = ref([]) // 手动跟踪上传文件列表\r\n    const keyError = ref('') // 密钥格式错误提示\r\n    const deviceIdError = ref('') // 设备编号格式错误提示\r\n    \r\n    // 批量操作相关数据\r\n    const selectedLogs = ref([]) // 选中的日志\r\n    \r\n\r\n    \r\n    // 计算属性\r\n    const logs = computed(() => store.getters['logs/logsList'])\r\n    const total = computed(() => store.getters['logs/totalCount'])\r\n    const uploadUrl = computed(() => '/api/logs/upload')\r\n    const uploadHeaders = computed(() => ({\r\n      Authorization: `Bearer ${store.state.auth.token}`,\r\n      'X-Decrypt-Key': decryptKey.value, // 添加密钥到请求头\r\n      'X-Device-ID': deviceId.value // 添加设备编号到请求头\r\n    }))\r\n    \r\n    // 权限相关计算属性\r\n    const userRole = computed(() => store.state.auth.user?.role_id)\r\n    const userId = computed(() => store.state.auth.user?.id)\r\n    \r\n    // 批量操作相关计算属性\r\n    const canBatchOperate = computed(() => {\r\n      return selectedLogs.value.length > 0 && selectedLogs.value.every(log => canOperate(log))\r\n    })\r\n    \r\n    // 检查选中的日志是否属于同一设备\r\n    const isSameDevice = computed(() => {\r\n      if (selectedLogs.value.length === 0) return true\r\n      const firstDeviceId = selectedLogs.value[0].device_id\r\n      return selectedLogs.value.every(log => log.device_id === firstDeviceId)\r\n    })\r\n    \r\n    // 获取设备检测提示信息\r\n    const deviceCheckMessage = computed(() => {\r\n      if (selectedLogs.value.length === 0) return ''\r\n      if (!isSameDevice.value) {\r\n        const deviceIds = [...new Set(selectedLogs.value.map(log => log.device_id))]\r\n        return `选中日志包含不同的设备: ${deviceIds.join(', ')}`\r\n      }\r\n      return ''\r\n    })\r\n    \r\n    const canBatchDelete = computed(() => {\r\n      return selectedLogs.value.length > 0 && selectedLogs.value.every(log => canDeleteLog(log))\r\n    })\r\n    \r\n    // 检查是否可以删除日志\r\n    const canDeleteLog = (log) => {\r\n      \r\n      // 管理员可以删除任何日志\r\n      if (userRole.value === 1) return true\r\n      // 专家可以删除任何日志\r\n      if (userRole.value === 2) return true\r\n      // 普通用户只能删除自己上传的日志\r\n      if (userRole.value === 3) {\r\n        return log.uploader_id === userId.value\r\n      }\r\n      return false\r\n    }\r\n    \r\n    // 方法\r\n    const loadLogs = async () => {\r\n      try {\r\n        loading.value = true\r\n        await store.dispatch('logs/fetchLogs', {\r\n          page: currentPage.value,\r\n          limit: pageSize.value,\r\n          device_id: filterDeviceId.value || undefined\r\n        })\r\n      } catch (error) {\r\n        ElMessage.error('加载日志失败')\r\n      } finally {\r\n        loading.value = false\r\n      }\r\n    }\r\n    \r\n\r\n    \r\n    const handleSizeChange = (size) => {\r\n      pageSize.value = size\r\n      currentPage.value = 1\r\n      loadLogs()\r\n    }\r\n    \r\n    const handleCurrentChange = (page) => {\r\n      currentPage.value = page\r\n      loadLogs()\r\n    }\r\n    \r\n    const submitUpload = () => {\r\n      if (!decryptKey.value.trim()) {\r\n        ElMessage.error('请输入解密密钥或上传密钥文件')\r\n        return\r\n      }\r\n      \r\n      // 验证密钥格式\r\n      const macRegex = /^([0-9A-Fa-f]{2}-){5}[0-9A-Fa-f]{2}$/\r\n      if (!macRegex.test(decryptKey.value)) {\r\n        ElMessage.error('密钥格式不正确，应为MAC地址格式（如：00-01-05-77-6a-09）')\r\n        return\r\n      }\r\n      \r\n      // 检查设备编号是否输入\r\n      if (!deviceId.value.trim()) {\r\n        ElMessage.warning('请输入设备编号，或使用默认值0000-00')\r\n        return\r\n      }\r\n      \r\n      // 验证设备编号格式 - 允许数字+字母组合\r\n      if (deviceId.value && deviceId.value !== '0000-00') {\r\n        const deviceIdRegex = /^[0-9A-Za-z]+-[0-9A-Za-z]+$/\r\n        if (!deviceIdRegex.test(deviceId.value)) {\r\n          ElMessage.error('设备编号格式不正确，应为数字或字母组合格式（如：4371-01、ABC-12、123-XY）')\r\n          return\r\n        }\r\n      } else {\r\n        // 如果没有输入设备编号，弹窗提示\r\n        ElMessage.warning('请输入设备编号，或使用默认值0000-00')\r\n        return\r\n      }\r\n      \r\n      if (!uploadRef.value) {\r\n        ElMessage.error('上传组件未初始化')\r\n        return\r\n      }\r\n      \r\n      // 使用手动跟踪的文件列表\r\n      if (uploadFileList.value.length === 0) {\r\n        ElMessage.error('请选择要上传的文件')\r\n        return\r\n      }\r\n      \r\n      if (uploadFileList.value.length > 50) {\r\n        ElMessage.error('最多只能上传50个文件')\r\n        return\r\n      }\r\n      \r\n      const totalSize = uploadFileList.value.reduce((sum, f) => sum + (f.size || f.raw?.size || 0), 0)\r\n      if (totalSize / 1024 / 1024 > 200) {\r\n        ElMessage.error('总文件大小不能超过200MB')\r\n        return\r\n      }\r\n      \r\n      uploadRef.value.submit()\r\n    }\r\n    \r\n    const beforeUpload = (file) => {\r\n      const isMedbotFile = file.name.endsWith('.medbot')\r\n      const isLt200M = file.size / 1024 / 1024 < 200\r\n      \r\n      if (!isMedbotFile) {\r\n        ElMessage.error('只能上传 .medbot 文件!')\r\n        return false\r\n      }\r\n      if (!isLt200M) {\r\n        ElMessage.error('单个文件大小不能超过200MB!')\r\n        return false\r\n      }\r\n      \r\n      if (!decryptKey.value.trim()) {\r\n        ElMessage.error('请输入解密密钥或上传密钥文件!')\r\n        return false\r\n      }\r\n      \r\n      return true\r\n    }\r\n    \r\n    const beforeKeyUpload = (file) => {\r\n      const isTxtFile = file.name.endsWith('.txt')\r\n      const isSystemInfoFile = file.name === 'systemInfo.txt'\r\n      const isLt1M = file.size / 1024 / 1024 < 1\r\n      \r\n      if (!isTxtFile) {\r\n        ElMessage.error('密钥文件必须是 .txt 格式!')\r\n        return false\r\n      }\r\n      if (!isSystemInfoFile) {\r\n        ElMessage.error('密钥文件名必须是 systemInfo.txt!')\r\n        return false\r\n      }\r\n      if (!isLt1M) {\r\n        ElMessage.error('密钥文件大小不能超过1MB!')\r\n        return false\r\n      }\r\n      return false // 阻止自动上传\r\n    }\r\n    \r\n    const onKeyFileChange = (file) => {\r\n      const reader = new FileReader()\r\n      reader.onload = (e) => {\r\n        const content = e.target.result.trim()\r\n        \r\n        // 验证文件内容是否为MAC地址格式\r\n        const macRegex = /^([0-9A-Fa-f]{2}-){5}[0-9A-Fa-f]{2}$/\r\n        if (!macRegex.test(content)) {\r\n          ElMessage.error('密钥文件内容格式不正确，应为MAC地址格式（如：00-01-05-77-6a-09）')\r\n          return\r\n        }\r\n        \r\n        decryptKey.value = content\r\n        keyFileName.value = file.name\r\n        keyError.value = '' // 清除错误提示\r\n        ElMessage.success('密钥文件读取成功')\r\n      }\r\n      reader.readAsText(file.raw)\r\n    }\r\n    \r\n    const clearUpload = () => {\r\n      if (uploadRef.value) {\r\n        uploadRef.value.clearFiles()\r\n      }\r\n      if (keyUploadRef.value) {\r\n        keyUploadRef.value.clearFiles()\r\n      }\r\n      uploadFileList.value = []\r\n      decryptKey.value = ''\r\n      keyFileName.value = ''\r\n      deviceId.value = ''\r\n      keyError.value = ''\r\n      deviceIdError.value = ''\r\n      // 重置上传状态和进度\r\n      uploading.value = false\r\n      overallProgress.value = 0\r\n    }\r\n\r\n    // 进度格式化方法\r\n    const progressFormat = (percentage) => {\r\n      if (percentage < 30) {\r\n        return `文件上传中 ${percentage}%`\r\n      } else if (percentage < 60) {\r\n        return `解密处理中 ${percentage}%`\r\n      } else if (percentage < 100) {\r\n        return `解析处理中 ${percentage}%`\r\n      } else {\r\n        return `处理完成 ${percentage}%`\r\n      }\r\n    }\r\n\r\n    // 防止页面刷新导致解析中断\r\n    const preventRefresh = () => {\r\n      if (uploading.value) {\r\n        return '解析正在进行中，刷新页面可能导致解析失败。确定要离开吗？'\r\n      }\r\n    }\r\n\r\n    // 监听页面刷新事件\r\n    onMounted(() => {\r\n      window.addEventListener('beforeunload', preventRefresh)\r\n    })\r\n    \r\n    const onUploadProgress = (event, file, fileList) => {\r\n      // 上传进度处理，显示文件上传阶段（占总进度的30%）\r\n      const uploadProgress = Math.floor(event.percent * 0.3) // 上传占30%\r\n      overallProgress.value = uploadProgress\r\n      \r\n    }\r\n\r\n    const onUploadSuccess = (response, file, fileList) => {\r\n      // 上传成功，开始解密和解析阶段\r\n      \r\n      \r\n      // 更新手动跟踪的文件列表\r\n      uploadFileList.value = fileList\r\n      \r\n      // 检查是否所有文件都上传完成\r\n      if (fileList.length === 0) {\r\n        // 所有文件上传完成，开始解密和解析阶段\r\n        uploading.value = true\r\n        ElMessage.success('文件上传完成，正在解密和解析中...')\r\n        \r\n        // 模拟解密和解析进度（占总进度的70%）\r\n        let decryptProgress = 30 // 从30%开始（上传已完成）\r\n        let parseProgress = 0\r\n        \r\n        // 解密阶段（30% -> 60%）\r\n        const decryptInterval = setInterval(() => {\r\n          if (decryptProgress < 60) {\r\n            decryptProgress += 2\r\n            overallProgress.value = decryptProgress\r\n    \r\n          } else {\r\n            clearInterval(decryptInterval)\r\n            // 开始解析阶段\r\n            startParsePhase()\r\n          }\r\n        }, 100)\r\n        \r\n        // 解析阶段（60% -> 100%）\r\n        const startParsePhase = () => {\r\n          const parseInterval = setInterval(() => {\r\n            if (parseProgress < 40) {\r\n              parseProgress += 1\r\n              overallProgress.value = 60 + parseProgress\r\n      \r\n            } else {\r\n              clearInterval(parseInterval)\r\n              // 解析完成\r\n              finishProcessing()\r\n            }\r\n          }, 200)\r\n        }\r\n        \r\n        // 完成处理\r\n        const finishProcessing = async () => {\r\n          try {\r\n            await loadLogs()\r\n            // 检查是否所有日志都已解析完成\r\n            const allParsed = logs.value.every(log => log.status === 'parsed')\r\n            if (allParsed) {\r\n              overallProgress.value = 100\r\n              uploading.value = false\r\n              // 显示具体的文件名\r\n              const uploadedFiles = uploadFileList.value.map(f => f.name || f.originalname).join(', ')\r\n              ElMessage.success(`${uploadedFiles} 上传成功，解析完成`)\r\n              // 清空表单\r\n              clearUpload()\r\n            } else {\r\n              // 如果后端解析还未完成，继续等待\r\n              setTimeout(finishProcessing, 1000)\r\n            }\r\n          } catch (error) {\r\n            uploading.value = false\r\n            overallProgress.value = 0\r\n            ElMessage.error('检查解析状态失败')\r\n            clearUpload()\r\n          }\r\n        }\r\n        \r\n        // 开始解密阶段\r\n        setTimeout(() => {\r\n          // 解密阶段开始\r\n        }, 500)\r\n      } else {\r\n        ElMessage.success(`文件 ${file.name} 上传成功，正在处理中...`)\r\n      }\r\n    }\r\n    \r\n    const onUploadError = (error) => {\r\n      ElMessage.error('上传失败: ' + (error.message || '未知错误'))\r\n    }\r\n    \r\n    const onExceed = (files, fileList) => {\r\n      ElMessage.error('最多只能上传50个文件!')\r\n    }\r\n    \r\n    const onFileChange = (file, fileList) => {\r\n      uploadFileList.value = fileList\r\n    }\r\n    \r\n    const onFileRemove = (file, fileList) => {\r\n      uploadFileList.value = fileList\r\n    }\r\n\r\n    // 删除单个文件\r\n    const removeFile = (index) => {\r\n      uploadFileList.value.splice(index, 1)\r\n    }\r\n    \r\n    const handleParse = async (row) => {\r\n      try {\r\n        row.parsing = true\r\n        await store.dispatch('logs/parseLog', row.id)\r\n        ElMessage.success('解析成功')\r\n        loadLogs()\r\n      } catch (error) {\r\n        ElMessage.error('解析失败')\r\n      } finally {\r\n        row.parsing = false\r\n      }\r\n    }\r\n    \r\n    const handleDownload = async (row) => {\r\n      try {\r\n        const response = await store.dispatch('logs/downloadLog', row.id)\r\n        \r\n        // 创建下载链接\r\n        const blob = new Blob([response.data])\r\n        const url = window.URL.createObjectURL(blob)\r\n        const link = document.createElement('a')\r\n        link.href = url\r\n        link.download = row.filename\r\n        link.click()\r\n        window.URL.revokeObjectURL(url)\r\n        \r\n        ElMessage.success('下载成功')\r\n      } catch (error) {\r\n        ElMessage.error('下载失败')\r\n      }\r\n    }\r\n    \r\n    const handleDelete = async (row) => {\r\n      try {\r\n        await ElMessageBox.confirm('确定要删除这个日志文件吗？', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        })\r\n        \r\n        await store.dispatch('logs/deleteLog', row.id)\r\n        ElMessage.success('删除成功')\r\n        loadLogs()\r\n      } catch (error) {\r\n        if (error !== 'cancel') {\r\n          ElMessage.error('删除失败')\r\n        }\r\n      }\r\n    }\r\n\r\n    // 跳转到日志分析页面\r\n    const goToLogAnalysis = (row) => {\r\n      // 在新页面中打开日志分析\r\n      const routeData = router.resolve(`/analysis/${row.id}`)\r\n      window.open(routeData.href, '_blank')\r\n    }\r\n    \r\n    const formatFileSize = (bytes) => {\r\n      if (bytes === 0) return '0 B'\r\n      const k = 1024\r\n      const sizes = ['B', 'KB', 'MB', 'GB']\r\n      const i = Math.floor(Math.log(bytes) / Math.log(k))\r\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\r\n    }\r\n    \r\n    const formatDate = (dateString) => {\r\n      if (!dateString) return '-'\r\n      return new Date(dateString).toLocaleString('zh-CN')\r\n    }\r\n    \r\n    const getStatusType = (status) => {\r\n      const typeMap = {\r\n        uploading: 'warning',\r\n        decrypting: 'warning',\r\n        parsing: 'warning',\r\n        parsed: 'success',\r\n        failed: 'danger'\r\n      }\r\n      return typeMap[status] || 'info'\r\n    }\r\n    \r\n    const getStatusText = (status) => {\r\n      const textMap = {\r\n        uploading: '上传中',\r\n        decrypting: '解密中',\r\n        parsing: '解析中',\r\n        parsed: '完成',\r\n        failed: '解析失败'\r\n      }\r\n      return textMap[status] || status\r\n    }\r\n    \r\n        // 批量操作相关方法\r\n    const handleSelectionChange = (selection) => {\r\n      selectedLogs.value = selection\r\n      // 保存选中的日志到sessionStorage，供手术统计页面使用\r\n      try {\r\n        sessionStorage.setItem('selectedLogs', JSON.stringify(selection))\r\n      } catch (error) {\r\n        console.warn('保存选中日志到sessionStorage失败:', error)\r\n      }\r\n    }\r\n    \r\n    const clearSelection = () => {\r\n      selectedLogs.value = []\r\n    }\r\n    \r\n    // 批量分析\r\n    const handleBatchAnalyze = () => {\r\n      const logIds = selectedLogs.value.map(log => log.id).join(',')\r\n      // 在新页面中打开批量分析\r\n      const routeData = router.resolve(`/batch-analysis/${logIds}`)\r\n      window.open(routeData.href, '_blank')\r\n    }\r\n    \r\n    // 批量下载\r\n    const handleBatchDownload = async () => {\r\n      try {\r\n        ElMessage.info('正在打包文件，请稍候...')\r\n        \r\n        const logIds = selectedLogs.value.map(log => log.id)\r\n        const response = await store.dispatch('logs/batchDownloadLogs', logIds)\r\n        \r\n        // 创建下载链接\r\n        const blob = new Blob([response.data])\r\n        const url = window.URL.createObjectURL(blob)\r\n        const link = document.createElement('a')\r\n        link.href = url\r\n        \r\n        // 生成ZIP文件名\r\n        const timestamp = new Date().toISOString().replace(/[:.]/g, '-')\r\n        link.download = `logs_batch_${timestamp}.zip`\r\n        \r\n        link.click()\r\n        window.URL.revokeObjectURL(url)\r\n        \r\n        ElMessage.success('批量下载完成')\r\n      } catch (error) {\r\n        console.error('批量下载失败:', error)\r\n        const errorMessage = error.response?.data?.message || error.message || '批量下载失败'\r\n        ElMessage.error(errorMessage)\r\n      }\r\n    }\r\n    \r\n    // 批量删除\r\n    const handleBatchDelete = async () => {\r\n      try {\r\n        await ElMessageBox.confirm(\r\n          `确定要删除选中的 ${selectedLogs.value.length} 个日志文件吗？此操作不可恢复！`, \r\n          '批量删除确认', \r\n          {\r\n            confirmButtonText: '确定删除',\r\n            cancelButtonText: '取消',\r\n            type: 'warning'\r\n          }\r\n        )\r\n        \r\n        ElMessage.info('开始批量删除...')\r\n        \r\n        // 保存选中的日志数据，避免在验证过程中被清空\r\n        const selectedLogsData = [...selectedLogs.value]\r\n        const logIds = selectedLogsData.map(log => parseInt(log.id)).filter(id => !isNaN(id))\r\n        \r\n        if (logIds.length === 0) {\r\n          ElMessage.error('选中的日志ID格式不正确')\r\n          return\r\n        }\r\n        \r\n\r\n        \r\n        // 执行批量删除\r\n        let response;\r\n        try {\r\n          response = await store.dispatch('logs/batchDeleteLogs', logIds)\r\n        } catch (apiError) {\r\n          console.error('批量删除失败:', apiError)\r\n          const errorMessage = apiError.response?.data?.message || apiError.message || '批量删除失败'\r\n          ElMessage.error(errorMessage)\r\n          return\r\n        }\r\n        \r\n        // 检查响应中的失败信息\r\n        if (response.data.failCount > 0) {\r\n          ElMessage.warning(`批量删除完成，成功 ${response.data.successCount} 个，失败 ${response.data.failCount} 个`)\r\n          if (response.data.failedLogs && response.data.failedLogs.length > 0) {\r\n            console.error('删除失败的日志:', response.data.failedLogs)\r\n          }\r\n        } else {\r\n          ElMessage.success(response.data.message)\r\n        }\r\n        \r\n        loadLogs() // 重新加载日志列表\r\n        clearSelection() // 清空选择\r\n      } catch (error) {\r\n        if (error !== 'cancel') {\r\n          console.error('批量删除错误:', error)\r\n          console.error('错误详情:', {\r\n            name: error.name,\r\n            message: error.message,\r\n            code: error.code,\r\n            response: error.response?.data,\r\n            status: error.response?.status,\r\n            statusText: error.response?.statusText,\r\n            config: {\r\n              url: error.config?.url,\r\n              method: error.config?.method,\r\n              data: error.config?.data\r\n            }\r\n          })\r\n          \r\n          let errorMessage = '批量删除失败'\r\n          if (error.response?.data?.message) {\r\n            errorMessage = error.response.data.message\r\n          } else if (error.message) {\r\n            errorMessage = error.message\r\n          }\r\n          \r\n          ElMessage.error(errorMessage)\r\n        }\r\n      }\r\n    }\r\n    \r\n\r\n    \r\n\r\n    \r\n    // 格式化时间戳\r\n    const formatTimestamp = (timestamp) => {\r\n      if (!timestamp) return '-'\r\n      const date = new Date(timestamp)\r\n      const year = date.getFullYear()\r\n      const month = String(date.getMonth() + 1).padStart(2, '0')\r\n      const day = String(date.getDate()).padStart(2, '0')\r\n      const hours = String(date.getHours()).padStart(2, '0')\r\n      const minutes = String(date.getMinutes()).padStart(2, '0')\r\n      const seconds = String(date.getSeconds()).padStart(2, '0')\r\n      return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`\r\n    }\r\n\r\n    // 检查是否可以操作日志（只有完成状态才能操作）\r\n    const canOperate = (log) => {\r\n      return log.status === 'parsed'\r\n    }\r\n    \r\n\r\n    \r\n\r\n    \r\n    // 自动填充密钥\r\n    const autoFillKey = async () => {\r\n      try {\r\n        const response = await store.dispatch('logs/autoFillKey', deviceId.value)\r\n        if (response.data.key) {\r\n          decryptKey.value = response.data.key\r\n          ElMessage.success('已自动填充密钥')\r\n        } else {\r\n          ElMessage.warning('未找到该设备编号对应的密钥')\r\n        }\r\n      } catch (error) {\r\n        console.error('自动填充密钥错误:', error)\r\n        const errorMessage = error.response?.data?.message || error.message || '自动填充密钥失败'\r\n        ElMessage.error(errorMessage)\r\n      }\r\n    }\r\n\r\n    // 验证密钥格式\r\n    const validateKeyFormat = () => {\r\n      const macRegex = /^([0-9A-Fa-f]{2}-){5}[0-9A-Fa-f]{2}$/\r\n      if (decryptKey.value && !macRegex.test(decryptKey.value)) {\r\n        keyError.value = '请输入有效的MAC地址格式密钥 (如: 00-01-05-77-6a-09)'\r\n      } else {\r\n        keyError.value = ''\r\n      }\r\n    }\r\n\r\n    // 自动填充设备编号\r\n    const autoFillDeviceId = async () => {\r\n      try {\r\n        const response = await store.dispatch('logs/autoFillDeviceId', decryptKey.value)\r\n        if (response.data.device_id) {\r\n          deviceId.value = response.data.device_id\r\n          ElMessage.success('已自动填充设备编号')\r\n        } else {\r\n          ElMessage.warning('未找到该密钥对应的设备编号')\r\n        }\r\n      } catch (error) {\r\n        console.error('自动填充设备编号错误:', error)\r\n        const errorMessage = error.response?.data?.message || error.message || '自动填充设备编号失败'\r\n        ElMessage.error(errorMessage)\r\n      }\r\n    }\r\n\r\n    // 验证设备编号格式\r\n    const validateDeviceIdFormat = () => {\r\n      const deviceIdRegex = /^[0-9A-Za-z]+-[0-9A-Za-z]+$/\r\n      if (deviceId.value && !deviceIdRegex.test(deviceId.value)) {\r\n        deviceIdError.value = '请输入有效的设备编号格式 (如: 4371-01、ABC-12、123-XY)'\r\n      } else {\r\n        deviceIdError.value = ''\r\n      }\r\n    }\r\n    \r\n    // 生命周期\r\n    onMounted(() => {\r\n      loadLogs()\r\n    })\r\n    \r\n    return {\r\n      loading,\r\n      uploading,\r\n      overallProgress,\r\n      progressFormat,\r\n      uploadRef,\r\n      currentPage,\r\n      pageSize,\r\n      logs,\r\n      total,\r\n      uploadUrl,\r\n      uploadHeaders,\r\n      loadLogs,\r\n      handleSizeChange,\r\n      handleCurrentChange,\r\n      beforeUpload,\r\n      submitUpload,\r\n      clearUpload,\r\n      onUploadSuccess,\r\n      onUploadError,\r\n      onExceed,\r\n      onFileChange,\r\n      onFileRemove,\r\n      removeFile,\r\n      handleParse,\r\n      handleDownload,\r\n      handleDelete,\r\n      formatFileSize,\r\n      formatDate,\r\n      getStatusType,\r\n      getStatusText,\r\n      goToLogAnalysis,\r\n      decryptKey,\r\n      keyUploadRef,\r\n      keyFileName,\r\n      deviceId,\r\n      filterDeviceId,\r\n      uploadFileList,\r\n      beforeKeyUpload,\r\n      onKeyFileChange,\r\n      canDeleteLog,\r\n      canOperate,\r\n      keyError,\r\n      deviceIdError,\r\n      autoFillKey,\r\n      validateKeyFormat,\r\n      autoFillDeviceId,\r\n      validateDeviceIdFormat,\r\n      \r\n      // 批量操作相关\r\n      selectedLogs,\r\n      canBatchOperate,\r\n      canBatchDelete,\r\n      isSameDevice,\r\n      deviceCheckMessage,\r\n      handleSelectionChange,\r\n      clearSelection,\r\n      handleBatchAnalyze,\r\n      handleBatchDownload,\r\n      handleBatchDelete\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.logs-container {\r\n  height: 100%;\r\n}\r\n\r\n.upload-card {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: flex-start;\r\n}\r\n\r\n.header-actions {\r\n  display: flex;\r\n  align-items: flex-start;\r\n  gap: 20px;\r\n  flex-wrap: wrap;\r\n  min-width: 0;\r\n}\r\n\r\n.upload-actions {\r\n  margin-top: 20px;\r\n  display: flex;\r\n  gap: 10px;\r\n}\r\n\r\n.key-input-section {\r\n  margin-top: 15px;\r\n}\r\n\r\n.key-input-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 15px;\r\n}\r\n\r\n.key-separator {\r\n  color: #666;\r\n  font-size: 14px;\r\n}\r\n\r\n.key-file-info {\r\n  margin-top: 10px;\r\n}\r\n\r\n.key-error {\r\n  margin-top: 10px;\r\n}\r\n\r\n.device-input-section {\r\n  margin-top: 15px;\r\n}\r\n\r\n.device-input-row {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 15px;\r\n}\r\n\r\n.device-error {\r\n  margin-top: 10px;\r\n}\r\n\r\n.list-card {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.pagination-wrapper {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 20px;\r\n}\r\n\r\n.parsing-tip {\r\n  color: #e6a23c;\r\n  font-weight: 500;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n}\r\n\r\n.parsing-tip .el-icon {\r\n  animation: rotating 2s linear infinite;\r\n}\r\n\r\n@keyframes rotating {\r\n  from {\r\n    transform: rotate(0deg);\r\n  }\r\n  to {\r\n    transform: rotate(360deg);\r\n  }\r\n}\r\n\r\n.overall-progress {\r\n  margin-bottom: 20px;\r\n  padding: 20px;\r\n  background-color: #f8f9fa;\r\n  border-radius: 8px;\r\n  border: 1px solid #e9ecef;\r\n}\r\n\r\n.progress-stages {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-top: 15px;\r\n  padding: 0 10px;\r\n}\r\n\r\n.stage {\r\n  font-size: 12px;\r\n  color: #909399;\r\n  padding: 4px 8px;\r\n  border-radius: 4px;\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.stage.active {\r\n  color: #409eff;\r\n  background-color: #ecf5ff;\r\n  font-weight: 500;\r\n}\r\n\r\n.stage.completed {\r\n  color: #67c23a;\r\n  background-color: #f0f9ff;\r\n  font-weight: 500;\r\n}\r\n\r\n.custom-file-list {\r\n  margin-top: 15px;\r\n  border: 1px solid #e4e7ed;\r\n  border-radius: 6px;\r\n  overflow: hidden;\r\n}\r\n\r\n.file-list-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding: 10px 15px;\r\n  background-color: #f5f7fa;\r\n  border-bottom: 1px solid #e4e7ed;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n}\r\n\r\n.file-items {\r\n  max-height: 200px;\r\n  overflow-y: auto;\r\n}\r\n\r\n.file-item {\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 8px 15px;\r\n  border-bottom: 1px solid #f0f0f0;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.file-item:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n.file-item:hover {\r\n  background-color: #f5f7fa;\r\n}\r\n\r\n.file-item .el-icon {\r\n  margin-right: 8px;\r\n  color: #909399;\r\n}\r\n\r\n.file-name {\r\n  flex: 1;\r\n  margin-right: 10px;\r\n  font-size: 14px;\r\n  color: #303133;\r\n  overflow: hidden;\r\n  text-overflow: ellipsis;\r\n  white-space: nowrap;\r\n}\r\n\r\n.file-size {\r\n  margin-right: 10px;\r\n  font-size: 12px;\r\n  color: #909399;\r\n}\r\n\r\n.status-tip {\r\n  margin-top: 4px;\r\n  font-size: 11px;\r\n  color: #e6a23c;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 4px;\r\n}\r\n\r\n.status-tip .el-icon {\r\n  font-size: 12px;\r\n}\r\n\r\n/* 批量操作样式 */\r\n.batch-operations {\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 8px;\r\n  min-width: 0;\r\n  flex: 1;\r\n}\r\n\r\n/* 搜索区域样式 */\r\n.search-section {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-left: auto;\r\n  flex-shrink: 0;\r\n  gap: 10px;\r\n}\r\n\r\n.search-input {\r\n  width: 200px;\r\n}\r\n\r\n.batch-actions {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 10px;\r\n  padding: 8px 12px;\r\n  background-color: #f0f9ff;\r\n  border: 1px solid #b3d8ff;\r\n  border-radius: 6px;\r\n  flex-wrap: wrap;\r\n  min-width: 0;\r\n}\r\n\r\n.device-check-tip {\r\n  margin-left: 0;\r\n}\r\n\r\n.device-check-tip .el-tag {\r\n  display: flex;\r\n  align-items: flex-start;\r\n  gap: 4px;\r\n  font-size: 12px;\r\n  max-width: 300px;\r\n  white-space: normal;\r\n  word-wrap: break-word;\r\n  line-height: 1.4;\r\n}\r\n\r\n.device-message {\r\n  white-space: normal;\r\n  word-wrap: break-word;\r\n}\r\n\r\n.info-icon {\r\n  color: #909399;\r\n  margin-left: 4px;\r\n  cursor: help;\r\n  font-size: 14px;\r\n}\r\n\r\n/* 响应式布局 */\r\n@media (max-width: 1024px) {\r\n  .header-actions {\r\n    gap: 15px;\r\n  }\r\n  \r\n  .batch-actions {\r\n    gap: 8px;\r\n  }\r\n  \r\n  .batch-actions .el-button {\r\n    font-size: 12px;\r\n    padding: 6px 10px;\r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .card-header {\r\n    flex-direction: column;\r\n    align-items: stretch;\r\n    gap: 15px;\r\n  }\r\n  \r\n  .header-actions {\r\n    flex-direction: column;\r\n    gap: 15px;\r\n  }\r\n  \r\n  .search-section {\r\n    margin-left: 0;\r\n    justify-content: flex-start;\r\n  }\r\n  \r\n  .batch-actions {\r\n    justify-content: flex-start;\r\n  }\r\n  \r\n  .batch-actions .el-button {\r\n    flex: 1;\r\n    min-width: 120px;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .batch-actions {\r\n    flex-direction: column;\r\n    gap: 8px;\r\n  }\r\n  \r\n  .batch-actions .el-button {\r\n    width: 100%;\r\n  }\r\n  \r\n  .search-section {\r\n    flex-direction: column;\r\n    gap: 10px;\r\n  }\r\n  \r\n  .search-section .search-input {\r\n    width: 100% !important;\r\n  }\r\n}\r\n\r\n</style> ","import { render } from \"./Logs.vue?vue&type=template&id=525b3581&scoped=true\"\nimport script from \"./Logs.vue?vue&type=script&lang=js\"\nexport * from \"./Logs.vue?vue&type=script&lang=js\"\n\nimport \"./Logs.vue?vue&type=style&index=0&id=525b3581&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-525b3581\"]])\n\nexport default __exports__"],"names":["class","header","percentage","overallProgress","status","format","progressFormat","completed","ref","action","uploadUrl","headers","uploadHeaders","beforeUpload","onUploadSuccess","onUploadError","onExceed","onFileChange","onFileRemove","onUploadProgress","multiple","limit","accept","drag","name","disabled","uploading","tip","uploadFileList","length","type","size","clearUpload","file","index","key","originalname","formatFileSize","raw","removeFile","decryptKey","placeholder","style","clearable","validateKeyFormat","prefix","plain","autoFillDeviceId","trim","beforeKeyUpload","onKeyFileChange","keyFileName","keyError","deviceId","validateDeviceIdFormat","autoFillKey","deviceIdError","submitUpload","loading","selectedLogs","handleBatchAnalyze","canBatchOperate","isSameDevice","title","deviceCheckMessage","handleBatchDownload","handleBatchDelete","canBatchDelete","userRole","content","placement","clearSelection","filterDeviceId","loadLogs","data","logs","handleSelectionChange","width","prop","label","default","row","formatDate","upload_time","align","getStatusType","getStatusText","canOperate","fixed","goToLogAnalysis","handleDownload","canDeleteLog","handleDelete","currentPage","pageSize","total","layout","handleSizeChange","handleCurrentChange","showEntriesDialog","logEntries","setup","store","router","uploadRef","keyUploadRef","getters","Authorization","state","auth","token","value","user","role_id","userId","id","every","log","firstDeviceId","device_id","deviceIds","Set","map","join","uploader_id","async","dispatch","page","undefined","error","macRegex","test","warning","deviceIdRegex","totalSize","reduce","sum","f","submit","isMedbotFile","endsWith","isLt200M","isTxtFile","isSystemInfoFile","isLt1M","reader","FileReader","onload","e","target","result","success","readAsText","clearFiles","preventRefresh","window","addEventListener","response","fileList","decryptProgress","parseProgress","decryptInterval","setInterval","clearInterval","startParsePhase","parseInterval","finishProcessing","allParsed","uploadedFiles","setTimeout","message","files","splice","handleParse","parsing","blob","Blob","url","URL","createObjectURL","link","document","createElement","href","download","filename","click","revokeObjectURL","confirm","confirmButtonText","cancelButtonText","routeData","resolve","open","bytes","k","sizes","i","Math","floor","parseFloat","pow","toFixed","dateString","Date","toLocaleString","typeMap","decrypting","parsed","failed","textMap","selection","sessionStorage","setItem","JSON","stringify","console","warn","logIds","info","timestamp","toISOString","replace","errorMessage","selectedLogsData","parseInt","filter","isNaN","apiError","failCount","successCount","failedLogs","code","statusText","config","method","__exports__","render"],"sourceRoot":""}