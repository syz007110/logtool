{"version":3,"file":"js/153.65baccb7.js","mappings":"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","sources":["webpack://logtool-frontend/./src/views/Logs.vue","webpack://logtool-frontend/./src/views/Logs.vue?e192"],"sourcesContent":["<template>\n  <div class=\"logs-container\">\n    <!-- 上传区域 -->\n    <el-card class=\"upload-card\">\n      <template #header>\n        <div class=\"card-header\">\n          <span>日志上传</span>\n        </div>\n      </template>\n      \n      <!-- 总体进度条 -->\n      <div v-if=\"uploading\" class=\"overall-progress\">\n        <el-progress \n          :percentage=\"overallProgress\" \n          :status=\"overallProgress >= 100 ? 'success' : ''\"\n          :stroke-width=\"12\"\n          :show-text=\"true\"\n          :format=\"progressFormat\"\n        />\n        <div class=\"progress-stages\">\n          <span class=\"stage\" :class=\"{ active: overallProgress >= 0, completed: overallProgress >= 30 }\">\n            文件上传\n          </span>\n          <span class=\"stage\" :class=\"{ active: overallProgress >= 30, completed: overallProgress >= 60 }\">\n            解密处理\n          </span>\n          <span class=\"stage\" :class=\"{ active: overallProgress >= 60, completed: overallProgress >= 100 }\">\n            解析完成\n          </span>\n        </div>\n      </div>\n\n      <el-upload\n        ref=\"uploadRef\"\n        :action=\"uploadUrl\"\n        :headers=\"uploadHeaders\"\n        :before-upload=\"beforeUpload\"\n        :on-success=\"onUploadSuccess\"\n        :on-error=\"onUploadError\"\n        :on-exceed=\"onExceed\"\n        :on-change=\"onFileChange\"\n        :on-remove=\"onFileRemove\"\n        :on-progress=\"onUploadProgress\"\n        :auto-upload=\"false\"\n        :show-file-list=\"false\"\n        :multiple=\"true\"\n        :limit=\"50\"\n        accept=\".medbot\"\n        drag\n        name=\"file\"\n        :disabled=\"uploading\"\n      >\n        <el-icon class=\"el-icon--upload\"><upload-filled /></el-icon>\n        <div class=\"el-upload__text\">\n          将文件拖到此处，或<em>点击上传</em>\n        </div>\n        <template #tip>\n          <div class=\"el-upload__tip\">\n            <div v-if=\"!uploading\">\n              支持上传 .medbot 文件，最多50个文件，总大小不超过200MB，上传后将自动解密并解析\n            </div>\n            <div v-else class=\"parsing-tip\">\n              <el-icon class=\"is-loading\"><Refresh /></el-icon>\n              正在解析中，请勿刷新页面...\n            </div>\n          </div>\n        </template>\n      </el-upload>\n      \n      <!-- 自定义文件列表 -->\n      <div v-if=\"uploadFileList.length > 0\" class=\"custom-file-list\">\n        <div class=\"file-list-header\">\n          <span>已选择的文件 ({{ uploadFileList.length }})</span>\n          <el-button type=\"text\" size=\"small\" @click=\"clearUpload\" :disabled=\"uploading\">\n            清空\n          </el-button>\n        </div>\n        <div class=\"file-items\">\n          <div \n            v-for=\"(file, index) in uploadFileList\" \n            :key=\"index\" \n            class=\"file-item\"\n          >\n            <el-icon><Document /></el-icon>\n            <span class=\"file-name\">{{ file.name || file.originalname }}</span>\n            <span class=\"file-size\">{{ formatFileSize(file.size || file.raw?.size || 0) }}</span>\n            <el-button \n              type=\"text\" \n              size=\"small\" \n              @click=\"removeFile(index)\"\n              :disabled=\"uploading\"\n            >\n              <el-icon><Delete /></el-icon>\n            </el-button>\n          </div>\n        </div>\n      </div>\n      \n      <!-- 密钥输入区域 -->\n      <div class=\"key-input-section\">\n        <div class=\"key-input-row\">\n          <el-input\n            v-model=\"decryptKey\"\n            placeholder=\"请输入解密密钥（MAC地址格式，如：00-01-05-77-6a-09）\"\n            style=\"width: 300px;\"\n            clearable\n            @blur=\"validateKeyFormat\"\n          >\n            <template #prefix>\n              <el-icon><Key /></el-icon>\n            </template>\n          </el-input>\n          \n          <el-button \n            type=\"primary\" \n            plain \n            @click=\"autoFillDeviceId\"\n            :disabled=\"!decryptKey.trim()\"\n          >\n            自动填充设备编号\n          </el-button>\n          \n          <span class=\"key-separator\">或</span>\n          \n          <el-upload\n            ref=\"keyUploadRef\"\n            :auto-upload=\"false\"\n            :show-file-list=\"false\"\n            accept=\".txt\"\n            :before-upload=\"beforeKeyUpload\"\n            :on-change=\"onKeyFileChange\"\n          >\n            <el-button type=\"primary\" plain>\n              <el-icon><Upload /></el-icon>\n              上传密钥文件\n            </el-button>\n          </el-upload>\n        </div>\n        \n        <div v-if=\"keyFileName\" class=\"key-file-info\">\n          <el-tag type=\"success\" size=\"small\">\n            <el-icon><Document /></el-icon>\n            {{ keyFileName }}\n          </el-tag>\n        </div>\n        \n        <div v-if=\"keyError\" class=\"key-error\">\n          <el-tag type=\"danger\" size=\"small\">\n            {{ keyError }}\n          </el-tag>\n        </div>\n      </div>\n      \n      <!-- 设备编号输入区域 -->\n      <div class=\"device-input-section\">\n        <div class=\"device-input-row\">\n          <el-input\n            v-model=\"deviceId\"\n            placeholder=\"设备编号（格式：数字或字母组合，例：4371-01、ABC-12，默认为0000-00）\"\n            style=\"width: 300px;\"\n            clearable\n            @blur=\"validateDeviceIdFormat\"\n          >\n            <template #prefix>\n              <el-icon><Monitor /></el-icon>\n            </template>\n          </el-input>\n          \n          <el-button \n            type=\"primary\" \n            plain \n            @click=\"autoFillKey\"\n            :disabled=\"!deviceId.trim()\"\n          >\n            自动填充密钥\n          </el-button>\n        </div>\n        \n        <div v-if=\"deviceIdError\" class=\"device-error\">\n          <el-tag type=\"danger\" size=\"small\">\n            {{ deviceIdError }}\n          </el-tag>\n        </div>\n      </div>\n      \n      <div class=\"upload-actions\">\n        <el-button \n          type=\"primary\" \n          @click=\"submitUpload\" \n          :loading=\"uploading\"\n          :disabled=\"uploading || !decryptKey.trim() || uploadFileList.length === 0\"\n        >\n          {{ uploading ? '解析中...' : '上传并解析' }}\n        </el-button>\n      </div>\n    </el-card>\n    \n    <!-- 日志列表 -->\n    <el-card class=\"list-card\">\n      <template #header>\n        <div class=\"card-header\">\n          <span>日志列表</span>\n          <div class=\"header-actions\">\n            <!-- 批量操作按钮组 -->\n            <div v-if=\"selectedLogs.length > 0\" class=\"batch-actions\">\n              <el-button \n                type=\"primary\" \n                size=\"small\" \n                @click=\"handleBatchAnalyze\"\n                :disabled=\"!canBatchOperate\"\n              >\n                <el-icon><Monitor /></el-icon>\n                批量分析 ({{ selectedLogs.length }})\n              </el-button>\n              \n              <el-button \n                type=\"success\" \n                size=\"small\" \n                @click=\"handleBatchDownload\"\n                :disabled=\"!canBatchOperate\"\n              >\n                <el-icon><Download /></el-icon>\n                批量下载 ({{ selectedLogs.length }})\n              </el-button>\n              \n              <el-button \n                type=\"danger\" \n                size=\"small\" \n                @click=\"handleBatchDelete\"\n                :disabled=\"!canBatchDelete\"\n              >\n                <el-icon><Delete /></el-icon>\n                批量删除 ({{ selectedLogs.length }})\n              </el-button>\n              \n              <el-button \n                type=\"info\" \n                size=\"small\" \n                @click=\"clearSelection\"\n              >\n                取消选择\n              </el-button>\n            </div>\n            \n            <el-input\n              v-model=\"filterDeviceId\"\n              placeholder=\"按设备编号筛选\"\n              style=\"width: 200px; margin-right: 10px;\"\n              clearable\n              @keyup.enter=\"loadLogs\"\n            >\n              <template #prefix>\n                <el-icon><Search /></el-icon>\n              </template>\n            </el-input>\n            <el-button type=\"primary\" size=\"small\" @click=\"loadLogs\">\n              <el-icon><Refresh /></el-icon>\n              刷新\n            </el-button>\n          </div>\n        </div>\n      </template>\n      \n      <el-table\n        :data=\"logs\"\n        :loading=\"loading\"\n        style=\"width: 100%\"\n        v-loading=\"loading\"\n        @selection-change=\"handleSelectionChange\"\n      >\n        <el-table-column type=\"selection\" width=\"55\" />\n        <el-table-column prop=\"original_name\" label=\"原始文件名\" width=\"200\" />\n        <el-table-column prop=\"device_id\" label=\"设备编号\" width=\"120\" />\n        <el-table-column prop=\"uploader_id\" label=\"上传用户ID\" width=\"100\" />\n        <el-table-column prop=\"upload_time\" label=\"上传时间\" width=\"180\">\n          <template #default=\"{ row }\">\n            {{ formatDate(row.upload_time) }}\n          </template>\n        </el-table-column>\n        \n        <el-table-column label=\"状态\" width=\"120\" align=\"center\">\n          <template #default=\"{ row }\">\n            <el-tag :type=\"getStatusType(row.status)\" size=\"small\">\n              {{ getStatusText(row.status) }}\n            </el-tag>\n            <div v-if=\"!canOperate(row)\" class=\"status-tip\">\n              <el-icon><Warning /></el-icon>\n              <span>处理中，请稍候</span>\n            </div>\n          </template>\n        </el-table-column>\n        \n        <el-table-column label=\"操作\" width=\"240\" fixed=\"right\">\n          <template #default=\"{ row }\">\n            <el-button \n              size=\"small\" \n              type=\"primary\"\n              @click=\"goToLogAnalysis(row)\"\n              :disabled=\"!canOperate(row)\"\n            >\n              分析\n            </el-button>\n            \n            <el-button \n              size=\"small\" \n              type=\"success\"\n              @click=\"handleDownload(row)\"\n              :disabled=\"!canOperate(row)\"\n            >\n              下载\n            </el-button>\n            \n            <el-button \n              size=\"small\" \n              type=\"danger\" \n              @click=\"handleDelete(row)\"\n              v-if=\"canDeleteLog(row)\"\n              :disabled=\"!canOperate(row)\"\n            >\n              删除\n            </el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n      \n      <!-- 分页 -->\n      <div class=\"pagination-wrapper\">\n        <el-pagination\n          :current-page=\"currentPage\"\n          :page-size=\"pageSize\"\n          :page-sizes=\"[10, 20, 50, 100]\"\n          :total=\"total\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n        />\n      </div>\n    </el-card>\n\n    <!-- 日志分析弹窗 -->\n    <el-dialog v-model=\"showEntriesDialog\" title=\"日志分析\" width=\"900px\">\n      <el-table :data=\"logEntries\" style=\"width: 100%\">\n        <el-table-column prop=\"timestamp\" label=\"时间戳\" width=\"180\" />\n        <el-table-column prop=\"error_code\" label=\"故障码\" width=\"100\" />\n        <el-table-column prop=\"param1\" label=\"参数1\" width=\"100\" />\n        <el-table-column prop=\"param2\" label=\"参数2\" width=\"100\" />\n        <el-table-column prop=\"param3\" label=\"参数3\" width=\"100\" />\n        <el-table-column prop=\"param4\" label=\"参数4\" width=\"100\" />\n        <el-table-column prop=\"explanation\" label=\"日志解释\" />\n      </el-table>\n    </el-dialog>\n\n\n\n\n  </div>\n</template>\n\n<script>\nimport { ref, computed, onMounted, nextTick } from 'vue'\nimport { useStore } from 'vuex'\nimport { useRouter } from 'vue-router'\nimport { ElMessage, ElMessageBox } from 'element-plus'\nimport { Search, Monitor, Refresh, Upload, Key, Document, UploadFilled, Delete, Warning } from '@element-plus/icons-vue'\n\nexport default {\n  name: 'Logs',\n  setup() {\n    const store = useStore()\n    const router = useRouter()\n    \n    // 响应式数据\n    const loading = ref(false)\n    const uploading = ref(false)\n    const overallProgress = ref(0) // 总体进度\n    const uploadRef = ref(null)\n    const keyUploadRef = ref(null)\n    const currentPage = ref(1)\n    const pageSize = ref(20)\n    const decryptKey = ref('') // 密钥输入\n    const keyFileName = ref('') // 密钥文件名\n    const deviceId = ref('') // 设备编号\n    const filterDeviceId = ref('') // 筛选设备编号\n    const uploadFileList = ref([]) // 手动跟踪上传文件列表\n    const keyError = ref('') // 密钥格式错误提示\n    const deviceIdError = ref('') // 设备编号格式错误提示\n    \n    // 批量操作相关数据\n    const selectedLogs = ref([]) // 选中的日志\n    \n\n    \n    // 计算属性\n    const logs = computed(() => store.getters['logs/logsList'])\n    const total = computed(() => store.getters['logs/totalCount'])\n    const uploadUrl = computed(() => '/api/logs/upload')\n    const uploadHeaders = computed(() => ({\n      Authorization: `Bearer ${store.state.auth.token}`,\n      'X-Decrypt-Key': decryptKey.value, // 添加密钥到请求头\n      'X-Device-ID': deviceId.value // 添加设备编号到请求头\n    }))\n    \n    // 权限相关计算属性\n    const userRole = computed(() => store.state.auth.user?.role_id)\n    const userId = computed(() => store.state.auth.user?.id)\n    \n    // 批量操作相关计算属性\n    const canBatchOperate = computed(() => {\n      return selectedLogs.value.length > 0 && selectedLogs.value.every(log => canOperate(log))\n    })\n    \n    const canBatchDelete = computed(() => {\n      return selectedLogs.value.length > 0 && selectedLogs.value.every(log => canDeleteLog(log))\n    })\n    \n    // 检查是否可以删除日志\n    const canDeleteLog = (log) => {\n      \n      // 管理员可以删除任何日志\n      if (userRole.value === 1) return true\n      // 专家可以删除任何日志\n      if (userRole.value === 2) return true\n      // 普通用户只能删除自己上传的日志\n      if (userRole.value === 3) {\n        return log.uploader_id === userId.value\n      }\n      return false\n    }\n    \n    // 方法\n    const loadLogs = async () => {\n      try {\n        loading.value = true\n        await store.dispatch('logs/fetchLogs', {\n          page: currentPage.value,\n          limit: pageSize.value,\n          device_id: filterDeviceId.value || undefined\n        })\n      } catch (error) {\n        ElMessage.error('加载日志失败')\n      } finally {\n        loading.value = false\n      }\n    }\n    \n\n    \n    const handleSizeChange = (size) => {\n      pageSize.value = size\n      currentPage.value = 1\n      loadLogs()\n    }\n    \n    const handleCurrentChange = (page) => {\n      currentPage.value = page\n      loadLogs()\n    }\n    \n    const submitUpload = () => {\n      if (!decryptKey.value.trim()) {\n        ElMessage.error('请输入解密密钥或上传密钥文件')\n        return\n      }\n      \n      // 验证密钥格式\n      const macRegex = /^([0-9A-Fa-f]{2}-){5}[0-9A-Fa-f]{2}$/\n      if (!macRegex.test(decryptKey.value)) {\n        ElMessage.error('密钥格式不正确，应为MAC地址格式（如：00-01-05-77-6a-09）')\n        return\n      }\n      \n      // 检查设备编号是否输入\n      if (!deviceId.value.trim()) {\n        ElMessage.warning('请输入设备编号，或使用默认值0000-00')\n        return\n      }\n      \n      // 验证设备编号格式 - 允许数字+字母组合\n      if (deviceId.value && deviceId.value !== '0000-00') {\n        const deviceIdRegex = /^[0-9A-Za-z]+-[0-9A-Za-z]+$/\n        if (!deviceIdRegex.test(deviceId.value)) {\n          ElMessage.error('设备编号格式不正确，应为数字或字母组合格式（如：4371-01、ABC-12、123-XY）')\n          return\n        }\n      } else {\n        // 如果没有输入设备编号，弹窗提示\n        ElMessage.warning('请输入设备编号，或使用默认值0000-00')\n        return\n      }\n      \n      if (!uploadRef.value) {\n        ElMessage.error('上传组件未初始化')\n        return\n      }\n      \n      // 使用手动跟踪的文件列表\n      if (uploadFileList.value.length === 0) {\n        ElMessage.error('请选择要上传的文件')\n        return\n      }\n      \n      if (uploadFileList.value.length > 50) {\n        ElMessage.error('最多只能上传50个文件')\n        return\n      }\n      \n      const totalSize = uploadFileList.value.reduce((sum, f) => sum + (f.size || f.raw?.size || 0), 0)\n      if (totalSize / 1024 / 1024 > 200) {\n        ElMessage.error('总文件大小不能超过200MB')\n        return\n      }\n      \n      uploadRef.value.submit()\n    }\n    \n    const beforeUpload = (file) => {\n      const isMedbotFile = file.name.endsWith('.medbot')\n      const isLt200M = file.size / 1024 / 1024 < 200\n      \n      if (!isMedbotFile) {\n        ElMessage.error('只能上传 .medbot 文件!')\n        return false\n      }\n      if (!isLt200M) {\n        ElMessage.error('单个文件大小不能超过200MB!')\n        return false\n      }\n      \n      if (!decryptKey.value.trim()) {\n        ElMessage.error('请输入解密密钥或上传密钥文件!')\n        return false\n      }\n      \n      return true\n    }\n    \n    const beforeKeyUpload = (file) => {\n      const isTxtFile = file.name.endsWith('.txt')\n      const isSystemInfoFile = file.name === 'systemInfo.txt'\n      const isLt1M = file.size / 1024 / 1024 < 1\n      \n      if (!isTxtFile) {\n        ElMessage.error('密钥文件必须是 .txt 格式!')\n        return false\n      }\n      if (!isSystemInfoFile) {\n        ElMessage.error('密钥文件名必须是 systemInfo.txt!')\n        return false\n      }\n      if (!isLt1M) {\n        ElMessage.error('密钥文件大小不能超过1MB!')\n        return false\n      }\n      return false // 阻止自动上传\n    }\n    \n    const onKeyFileChange = (file) => {\n      const reader = new FileReader()\n      reader.onload = (e) => {\n        const content = e.target.result.trim()\n        \n        // 验证文件内容是否为MAC地址格式\n        const macRegex = /^([0-9A-Fa-f]{2}-){5}[0-9A-Fa-f]{2}$/\n        if (!macRegex.test(content)) {\n          ElMessage.error('密钥文件内容格式不正确，应为MAC地址格式（如：00-01-05-77-6a-09）')\n          return\n        }\n        \n        decryptKey.value = content\n        keyFileName.value = file.name\n        keyError.value = '' // 清除错误提示\n        ElMessage.success('密钥文件读取成功')\n      }\n      reader.readAsText(file.raw)\n    }\n    \n    const clearUpload = () => {\n      if (uploadRef.value) {\n        uploadRef.value.clearFiles()\n      }\n      if (keyUploadRef.value) {\n        keyUploadRef.value.clearFiles()\n      }\n      uploadFileList.value = []\n      decryptKey.value = ''\n      keyFileName.value = ''\n      deviceId.value = ''\n      keyError.value = ''\n      deviceIdError.value = ''\n      // 重置上传状态和进度\n      uploading.value = false\n      overallProgress.value = 0\n    }\n\n    // 进度格式化方法\n    const progressFormat = (percentage) => {\n      if (percentage < 30) {\n        return `文件上传中 ${percentage}%`\n      } else if (percentage < 60) {\n        return `解密处理中 ${percentage}%`\n      } else if (percentage < 100) {\n        return `解析处理中 ${percentage}%`\n      } else {\n        return `处理完成 ${percentage}%`\n      }\n    }\n\n    // 防止页面刷新导致解析中断\n    const preventRefresh = () => {\n      if (uploading.value) {\n        return '解析正在进行中，刷新页面可能导致解析失败。确定要离开吗？'\n      }\n    }\n\n    // 监听页面刷新事件\n    onMounted(() => {\n      window.addEventListener('beforeunload', preventRefresh)\n    })\n    \n    const onUploadProgress = (event, file, fileList) => {\n      // 上传进度处理，显示文件上传阶段（占总进度的30%）\n      const uploadProgress = Math.floor(event.percent * 0.3) // 上传占30%\n      overallProgress.value = uploadProgress\n      \n    }\n\n    const onUploadSuccess = (response, file, fileList) => {\n      // 上传成功，开始解密和解析阶段\n      \n      \n      // 更新手动跟踪的文件列表\n      uploadFileList.value = fileList\n      \n      // 检查是否所有文件都上传完成\n      if (fileList.length === 0) {\n        // 所有文件上传完成，开始解密和解析阶段\n        uploading.value = true\n        ElMessage.success('文件上传完成，正在解密和解析中...')\n        \n        // 模拟解密和解析进度（占总进度的70%）\n        let decryptProgress = 30 // 从30%开始（上传已完成）\n        let parseProgress = 0\n        \n        // 解密阶段（30% -> 60%）\n        const decryptInterval = setInterval(() => {\n          if (decryptProgress < 60) {\n            decryptProgress += 2\n            overallProgress.value = decryptProgress\n    \n          } else {\n            clearInterval(decryptInterval)\n            // 开始解析阶段\n            startParsePhase()\n          }\n        }, 100)\n        \n        // 解析阶段（60% -> 100%）\n        const startParsePhase = () => {\n          const parseInterval = setInterval(() => {\n            if (parseProgress < 40) {\n              parseProgress += 1\n              overallProgress.value = 60 + parseProgress\n      \n            } else {\n              clearInterval(parseInterval)\n              // 解析完成\n              finishProcessing()\n            }\n          }, 200)\n        }\n        \n        // 完成处理\n        const finishProcessing = async () => {\n          try {\n            await loadLogs()\n            // 检查是否所有日志都已解析完成\n            const allParsed = logs.value.every(log => log.status === 'parsed')\n            if (allParsed) {\n              overallProgress.value = 100\n              uploading.value = false\n              // 显示具体的文件名\n              const uploadedFiles = uploadFileList.value.map(f => f.name || f.originalname).join(', ')\n              ElMessage.success(`${uploadedFiles} 上传成功，解析完成`)\n              // 清空表单\n              clearUpload()\n            } else {\n              // 如果后端解析还未完成，继续等待\n              setTimeout(finishProcessing, 1000)\n            }\n          } catch (error) {\n            uploading.value = false\n            overallProgress.value = 0\n            ElMessage.error('检查解析状态失败')\n            clearUpload()\n          }\n        }\n        \n        // 开始解密阶段\n        setTimeout(() => {\n          // 解密阶段开始\n        }, 500)\n      } else {\n        ElMessage.success(`文件 ${file.name} 上传成功，正在处理中...`)\n      }\n    }\n    \n    const onUploadError = (error) => {\n      ElMessage.error('上传失败: ' + (error.message || '未知错误'))\n    }\n    \n    const onExceed = (files, fileList) => {\n      ElMessage.error('最多只能上传50个文件!')\n    }\n    \n    const onFileChange = (file, fileList) => {\n      uploadFileList.value = fileList\n    }\n    \n    const onFileRemove = (file, fileList) => {\n      uploadFileList.value = fileList\n    }\n\n    // 删除单个文件\n    const removeFile = (index) => {\n      uploadFileList.value.splice(index, 1)\n    }\n    \n    const handleParse = async (row) => {\n      try {\n        row.parsing = true\n        await store.dispatch('logs/parseLog', row.id)\n        ElMessage.success('解析成功')\n        loadLogs()\n      } catch (error) {\n        ElMessage.error('解析失败')\n      } finally {\n        row.parsing = false\n      }\n    }\n    \n    const handleDownload = async (row) => {\n      try {\n        const response = await store.dispatch('logs/downloadLog', row.id)\n        \n        // 创建下载链接\n        const blob = new Blob([response.data])\n        const url = window.URL.createObjectURL(blob)\n        const link = document.createElement('a')\n        link.href = url\n        link.download = row.filename\n        link.click()\n        window.URL.revokeObjectURL(url)\n        \n        ElMessage.success('下载成功')\n      } catch (error) {\n        ElMessage.error('下载失败')\n      }\n    }\n    \n    const handleDelete = async (row) => {\n      try {\n        await ElMessageBox.confirm('确定要删除这个日志文件吗？', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        })\n        \n        await store.dispatch('logs/deleteLog', row.id)\n        ElMessage.success('删除成功')\n        loadLogs()\n      } catch (error) {\n        if (error !== 'cancel') {\n          ElMessage.error('删除失败')\n        }\n      }\n    }\n\n    // 跳转到日志分析页面\n    const goToLogAnalysis = (row) => {\n      // 在新页面中打开日志分析\n      const routeData = router.resolve(`/analysis/${row.id}`)\n      window.open(routeData.href, '_blank')\n    }\n    \n    const formatFileSize = (bytes) => {\n      if (bytes === 0) return '0 B'\n      const k = 1024\n      const sizes = ['B', 'KB', 'MB', 'GB']\n      const i = Math.floor(Math.log(bytes) / Math.log(k))\n      return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\n    }\n    \n    const formatDate = (dateString) => {\n      if (!dateString) return '-'\n      return new Date(dateString).toLocaleString('zh-CN')\n    }\n    \n    const getStatusType = (status) => {\n      const typeMap = {\n        uploading: 'warning',\n        decrypting: 'warning',\n        parsing: 'warning',\n        parsed: 'success',\n        failed: 'danger'\n      }\n      return typeMap[status] || 'info'\n    }\n    \n    const getStatusText = (status) => {\n      const textMap = {\n        uploading: '上传中',\n        decrypting: '解密中',\n        parsing: '解析中',\n        parsed: '完成',\n        failed: '解析失败'\n      }\n      return textMap[status] || status\n    }\n    \n    // 批量操作相关方法\n    const handleSelectionChange = (selection) => {\n      selectedLogs.value = selection\n    }\n    \n    const clearSelection = () => {\n      selectedLogs.value = []\n    }\n    \n    // 批量分析\n    const handleBatchAnalyze = () => {\n      const logIds = selectedLogs.value.map(log => log.id).join(',')\n      // 在新页面中打开批量分析\n      const routeData = router.resolve(`/batch-analysis/${logIds}`)\n      window.open(routeData.href, '_blank')\n    }\n    \n    // 批量下载\n    const handleBatchDownload = async () => {\n      try {\n        ElMessage.info('开始批量下载...')\n        \n        for (const log of selectedLogs.value) {\n          try {\n            const response = await store.dispatch('logs/downloadLog', log.id)\n            \n            // 创建下载链接\n            const blob = new Blob([response.data])\n            const url = window.URL.createObjectURL(blob)\n            const link = document.createElement('a')\n            link.href = url\n            link.download = log.original_name.replace('.medbot', '_decrypted.txt')\n            link.click()\n            window.URL.revokeObjectURL(url)\n            \n            // 添加延迟避免浏览器阻止多个下载\n            await new Promise(resolve => setTimeout(resolve, 500))\n          } catch (error) {\n            console.error(`下载日志 ${log.original_name} 失败:`, error)\n            ElMessage.warning(`下载日志 ${log.original_name} 失败`)\n          }\n        }\n        \n        ElMessage.success('批量下载完成')\n      } catch (error) {\n        ElMessage.error('批量下载失败')\n      }\n    }\n    \n    // 批量删除\n    const handleBatchDelete = async () => {\n      try {\n        await ElMessageBox.confirm(\n          `确定要删除选中的 ${selectedLogs.value.length} 个日志文件吗？此操作不可恢复！`, \n          '批量删除确认', \n          {\n            confirmButtonText: '确定删除',\n            cancelButtonText: '取消',\n            type: 'warning'\n          }\n        )\n        \n        ElMessage.info('开始批量删除...')\n        \n        const logIds = selectedLogs.value.map(log => log.id)\n        const response = await store.dispatch('logs/batchDeleteLogs', logIds)\n        \n        ElMessage.success(response.data.message)\n        loadLogs() // 重新加载日志列表\n        clearSelection() // 清空选择\n      } catch (error) {\n        if (error !== 'cancel') {\n          ElMessage.error('批量删除失败')\n        }\n      }\n    }\n    \n\n    \n    // 格式化时间戳\n    const formatTimestamp = (timestamp) => {\n      if (!timestamp) return '-'\n      const date = new Date(timestamp)\n      const year = date.getFullYear()\n      const month = String(date.getMonth() + 1).padStart(2, '0')\n      const day = String(date.getDate()).padStart(2, '0')\n      const hours = String(date.getHours()).padStart(2, '0')\n      const minutes = String(date.getMinutes()).padStart(2, '0')\n      const seconds = String(date.getSeconds()).padStart(2, '0')\n      return `${year}-${month}-${day} ${hours}:${minutes}:${seconds}`\n    }\n\n    // 检查是否可以操作日志（只有完成状态才能操作）\n    const canOperate = (log) => {\n      return log.status === 'parsed'\n    }\n    \n\n    \n\n    \n    // 自动填充密钥\n    const autoFillKey = async () => {\n      try {\n        const response = await store.dispatch('logs/autoFillKey', deviceId.value)\n        if (response.data.key) {\n          decryptKey.value = response.data.key\n          ElMessage.success('已自动填充密钥')\n        } else {\n          ElMessage.warning('未找到该设备编号对应的密钥')\n        }\n      } catch (error) {\n        console.error('自动填充密钥错误:', error)\n        const errorMessage = error.response?.data?.message || error.message || '自动填充密钥失败'\n        ElMessage.error(errorMessage)\n      }\n    }\n\n    // 验证密钥格式\n    const validateKeyFormat = () => {\n      const macRegex = /^([0-9A-Fa-f]{2}-){5}[0-9A-Fa-f]{2}$/\n      if (decryptKey.value && !macRegex.test(decryptKey.value)) {\n        keyError.value = '请输入有效的MAC地址格式密钥 (如: 00-01-05-77-6a-09)'\n      } else {\n        keyError.value = ''\n      }\n    }\n\n    // 自动填充设备编号\n    const autoFillDeviceId = async () => {\n      try {\n        const response = await store.dispatch('logs/autoFillDeviceId', decryptKey.value)\n        if (response.data.device_id) {\n          deviceId.value = response.data.device_id\n          ElMessage.success('已自动填充设备编号')\n        } else {\n          ElMessage.warning('未找到该密钥对应的设备编号')\n        }\n      } catch (error) {\n        console.error('自动填充设备编号错误:', error)\n        const errorMessage = error.response?.data?.message || error.message || '自动填充设备编号失败'\n        ElMessage.error(errorMessage)\n      }\n    }\n\n    // 验证设备编号格式\n    const validateDeviceIdFormat = () => {\n      const deviceIdRegex = /^[0-9A-Za-z]+-[0-9A-Za-z]+$/\n      if (deviceId.value && !deviceIdRegex.test(deviceId.value)) {\n        deviceIdError.value = '请输入有效的设备编号格式 (如: 4371-01、ABC-12、123-XY)'\n      } else {\n        deviceIdError.value = ''\n      }\n    }\n    \n    // 生命周期\n    onMounted(() => {\n      loadLogs()\n    })\n    \n    return {\n      loading,\n      uploading,\n      overallProgress,\n      progressFormat,\n      uploadRef,\n      currentPage,\n      pageSize,\n      logs,\n      total,\n      uploadUrl,\n      uploadHeaders,\n      loadLogs,\n      handleSizeChange,\n      handleCurrentChange,\n      beforeUpload,\n      submitUpload,\n      clearUpload,\n      onUploadSuccess,\n      onUploadError,\n      onExceed,\n      onFileChange,\n      onFileRemove,\n      removeFile,\n      handleParse,\n      handleDownload,\n      handleDelete,\n      formatFileSize,\n      formatDate,\n      getStatusType,\n      getStatusText,\n      goToLogAnalysis,\n      decryptKey,\n      keyUploadRef,\n      keyFileName,\n      deviceId,\n      filterDeviceId,\n      uploadFileList,\n      beforeKeyUpload,\n      onKeyFileChange,\n      canDeleteLog,\n      canOperate,\n      keyError,\n      deviceIdError,\n      autoFillKey,\n      validateKeyFormat,\n      autoFillDeviceId,\n      validateDeviceIdFormat,\n      \n      // 批量操作相关\n      selectedLogs,\n      canBatchOperate,\n      canBatchDelete,\n      handleSelectionChange,\n      clearSelection,\n      handleBatchAnalyze,\n      handleBatchDownload,\n      handleBatchDelete\n    }\n  }\n}\n</script>\n\n<style scoped>\n.logs-container {\n  height: 100%;\n}\n\n.upload-card {\n  margin-bottom: 20px;\n}\n\n.card-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n}\n\n.header-actions {\n  display: flex;\n  align-items: center;\n}\n\n.upload-actions {\n  margin-top: 20px;\n  display: flex;\n  gap: 10px;\n}\n\n.key-input-section {\n  margin-top: 15px;\n}\n\n.key-input-row {\n  display: flex;\n  align-items: center;\n  gap: 15px;\n}\n\n.key-separator {\n  color: #666;\n  font-size: 14px;\n}\n\n.key-file-info {\n  margin-top: 10px;\n}\n\n.key-error {\n  margin-top: 10px;\n}\n\n.device-input-section {\n  margin-top: 15px;\n}\n\n.device-input-row {\n  display: flex;\n  align-items: center;\n  gap: 15px;\n}\n\n.device-error {\n  margin-top: 10px;\n}\n\n.list-card {\n  margin-bottom: 20px;\n}\n\n.pagination-wrapper {\n  display: flex;\n  justify-content: center;\n  margin-top: 20px;\n}\n\n.parsing-tip {\n  color: #e6a23c;\n  font-weight: 500;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n}\n\n.parsing-tip .el-icon {\n  animation: rotating 2s linear infinite;\n}\n\n@keyframes rotating {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n.overall-progress {\n  margin-bottom: 20px;\n  padding: 20px;\n  background-color: #f8f9fa;\n  border-radius: 8px;\n  border: 1px solid #e9ecef;\n}\n\n.progress-stages {\n  display: flex;\n  justify-content: space-between;\n  margin-top: 15px;\n  padding: 0 10px;\n}\n\n.stage {\n  font-size: 12px;\n  color: #909399;\n  padding: 4px 8px;\n  border-radius: 4px;\n  transition: all 0.3s ease;\n}\n\n.stage.active {\n  color: #409eff;\n  background-color: #ecf5ff;\n  font-weight: 500;\n}\n\n.stage.completed {\n  color: #67c23a;\n  background-color: #f0f9ff;\n  font-weight: 500;\n}\n\n.custom-file-list {\n  margin-top: 15px;\n  border: 1px solid #e4e7ed;\n  border-radius: 6px;\n  overflow: hidden;\n}\n\n.file-list-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 10px 15px;\n  background-color: #f5f7fa;\n  border-bottom: 1px solid #e4e7ed;\n  font-size: 14px;\n  font-weight: 500;\n}\n\n.file-items {\n  max-height: 200px;\n  overflow-y: auto;\n}\n\n.file-item {\n  display: flex;\n  align-items: center;\n  padding: 8px 15px;\n  border-bottom: 1px solid #f0f0f0;\n  transition: background-color 0.2s;\n}\n\n.file-item:last-child {\n  border-bottom: none;\n}\n\n.file-item:hover {\n  background-color: #f5f7fa;\n}\n\n.file-item .el-icon {\n  margin-right: 8px;\n  color: #909399;\n}\n\n.file-name {\n  flex: 1;\n  margin-right: 10px;\n  font-size: 14px;\n  color: #303133;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.file-size {\n  margin-right: 10px;\n  font-size: 12px;\n  color: #909399;\n}\n\n.status-tip {\n  margin-top: 4px;\n  font-size: 11px;\n  color: #e6a23c;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 4px;\n}\n\n.status-tip .el-icon {\n  font-size: 12px;\n}\n\n/* 批量操作样式 */\n.batch-actions {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  margin-right: 15px;\n  padding: 8px 12px;\n  background-color: #f0f9ff;\n  border: 1px solid #b3d8ff;\n  border-radius: 6px;\n}\n\n\n\n</style> ","import { render } from \"./Logs.vue?vue&type=template&id=6cf97f4f&scoped=true\"\nimport script from \"./Logs.vue?vue&type=script&lang=js\"\nexport * from \"./Logs.vue?vue&type=script&lang=js\"\n\nimport \"./Logs.vue?vue&type=style&index=0&id=6cf97f4f&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6cf97f4f\"]])\n\nexport default __exports__"],"names":["class","header","percentage","overallProgress","status","format","progressFormat","completed","ref","action","uploadUrl","headers","uploadHeaders","beforeUpload","onUploadSuccess","onUploadError","onExceed","onFileChange","onFileRemove","onUploadProgress","multiple","limit","accept","drag","name","disabled","uploading","tip","uploadFileList","length","type","size","clearUpload","file","index","key","originalname","formatFileSize","raw","removeFile","decryptKey","placeholder","style","clearable","validateKeyFormat","prefix","plain","autoFillDeviceId","trim","beforeKeyUpload","onKeyFileChange","keyFileName","keyError","deviceId","validateDeviceIdFormat","autoFillKey","deviceIdError","submitUpload","loading","selectedLogs","handleBatchAnalyze","canBatchOperate","handleBatchDownload","handleBatchDelete","canBatchDelete","clearSelection","filterDeviceId","loadLogs","data","logs","handleSelectionChange","width","prop","label","default","row","formatDate","upload_time","align","getStatusType","getStatusText","canOperate","fixed","goToLogAnalysis","handleDownload","canDeleteLog","handleDelete","currentPage","pageSize","total","layout","handleSizeChange","handleCurrentChange","showEntriesDialog","title","logEntries","setup","store","router","uploadRef","keyUploadRef","getters","Authorization","state","auth","token","value","userRole","user","role_id","userId","id","every","log","uploader_id","async","dispatch","page","device_id","undefined","error","macRegex","test","warning","deviceIdRegex","totalSize","reduce","sum","f","submit","isMedbotFile","endsWith","isLt200M","isTxtFile","isSystemInfoFile","isLt1M","reader","FileReader","onload","e","content","target","result","success","readAsText","clearFiles","preventRefresh","window","addEventListener","response","fileList","decryptProgress","parseProgress","decryptInterval","setInterval","clearInterval","startParsePhase","parseInterval","finishProcessing","allParsed","uploadedFiles","map","join","setTimeout","message","files","splice","handleParse","parsing","blob","Blob","url","URL","createObjectURL","link","document","createElement","href","download","filename","click","revokeObjectURL","confirm","confirmButtonText","cancelButtonText","routeData","resolve","open","bytes","k","sizes","i","Math","floor","parseFloat","pow","toFixed","dateString","Date","toLocaleString","typeMap","decrypting","parsed","failed","textMap","selection","logIds","info","original_name","replace","Promise","console","errorMessage","__exports__","render"],"sourceRoot":""}