{"version":3,"file":"js/638.b01dfc9c.js","mappings":"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","sources":["webpack://logtool-frontend/./src/views/History.vue","webpack://logtool-frontend/./src/views/History.vue?2c0e"],"sourcesContent":["<template>\r\n  <div class=\"history-container\">\r\n    <el-card>\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <span>历史记录</span>\r\n          <el-button type=\"primary\" size=\"small\" @click=\"loadHistory\">\r\n            <el-icon><Refresh /></el-icon>\r\n            刷新\r\n          </el-button>\r\n        </div>\r\n      </template>\r\n      \r\n      <el-table\r\n        :data=\"historyList\"\r\n        :loading=\"loading\"\r\n        style=\"width: 100%\"\r\n        v-loading=\"loading\"\r\n      >\r\n        <el-table-column prop=\"operation\" label=\"操作\" width=\"150\" />\r\n        <el-table-column prop=\"description\" label=\"描述\" show-overflow-tooltip />\r\n        <el-table-column prop=\"user\" label=\"用户\" width=\"120\" />\r\n        <el-table-column prop=\"time\" label=\"时间\" width=\"180\">\r\n          <template #default=\"{ row }\">\r\n            {{ formatDate(row.time) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"status\" label=\"状态\" width=\"100\">\r\n          <template #default=\"{ row }\">\r\n            <el-tag :type=\"getStatusType(row.status)\">\r\n              {{ getStatusText(row.status) }}\r\n            </el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        \r\n        <el-table-column label=\"详情\" width=\"100\" fixed=\"right\">\r\n          <template #default=\"{ row }\">\r\n            <el-button \r\n              size=\"small\" \r\n              type=\"primary\"\r\n              @click=\"showDetails(row)\"\r\n            >\r\n              查看\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      \r\n      <!-- 分页 -->\r\n      <div class=\"pagination-wrapper\">\r\n        <el-pagination\r\n          :current-page=\"currentPage\"\r\n          :page-size=\"pageSize\"\r\n          :page-sizes=\"[10, 20, 50, 100]\"\r\n          :total=\"total\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n        />\r\n      </div>\r\n    </el-card>\r\n    \r\n    <!-- 详情对话框 -->\r\n    <el-dialog\r\n      v-model=\"showDetailsDialog\"\r\n      title=\"操作详情\"\r\n      width=\"600px\"\r\n    >\r\n      <div v-if=\"selectedRecord\">\r\n        <el-descriptions :column=\"1\" border>\r\n          <el-descriptions-item label=\"操作\">{{ selectedRecord.operation }}</el-descriptions-item>\r\n          <el-descriptions-item label=\"描述\">{{ selectedRecord.description }}</el-descriptions-item>\r\n          <el-descriptions-item label=\"用户\">{{ selectedRecord.user }}</el-descriptions-item>\r\n          <el-descriptions-item label=\"时间\">{{ formatDate(selectedRecord.time) }}</el-descriptions-item>\r\n          <el-descriptions-item label=\"状态\">\r\n            <el-tag :type=\"getStatusType(selectedRecord.status)\">\r\n              {{ getStatusText(selectedRecord.status) }}\r\n            </el-tag>\r\n          </el-descriptions-item>\r\n          <el-descriptions-item label=\"IP地址\">{{ selectedRecord.ip || '-' }}</el-descriptions-item>\r\n          <el-descriptions-item label=\"用户代理\">{{ selectedRecord.userAgent || '-' }}</el-descriptions-item>\r\n        </el-descriptions>\r\n        \r\n        <div v-if=\"selectedRecord.details\" class=\"details-section\">\r\n          <h4>详细信息</h4>\r\n          <pre>{{ JSON.stringify(selectedRecord.details, null, 2) }}</pre>\r\n        </div>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted } from 'vue'\r\nimport { ElMessage } from 'element-plus'\r\n\r\nexport default {\r\n  name: 'History',\r\n  setup() {\r\n    // 响应式数据\r\n    const loading = ref(false)\r\n    const currentPage = ref(1)\r\n    const pageSize = ref(20)\r\n    const total = ref(0)\r\n    const historyList = ref([])\r\n    const showDetailsDialog = ref(false)\r\n    const selectedRecord = ref(null)\r\n    \r\n    // 模拟历史记录数据\r\n    const mockHistoryData = [\r\n      {\r\n        id: 1,\r\n        operation: '登录',\r\n        description: '用户登录系统',\r\n        user: 'admin',\r\n        time: new Date().toISOString(),\r\n        status: 'success',\r\n        ip: '192.168.1.100',\r\n        userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',\r\n        details: { loginMethod: 'password' }\r\n      },\r\n      {\r\n        id: 2,\r\n        operation: '上传日志',\r\n        description: '上传日志文件: system.log',\r\n        user: 'admin',\r\n        time: new Date(Date.now() - 3600000).toISOString(),\r\n        status: 'success',\r\n        ip: '192.168.1.100',\r\n        userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',\r\n        details: { filename: 'system.log', size: '2.5MB' }\r\n      },\r\n      {\r\n        id: 3,\r\n        operation: '解析日志',\r\n        description: '解析日志文件: system.log',\r\n        user: 'admin',\r\n        time: new Date(Date.now() - 1800000).toISOString(),\r\n        status: 'success',\r\n        ip: '192.168.1.100',\r\n        userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',\r\n        details: { parsedLines: 1500, errors: 5 }\r\n      },\r\n      {\r\n        id: 4,\r\n        operation: '添加故障码',\r\n        description: '添加故障码: E001',\r\n        user: 'expert',\r\n        time: new Date(Date.now() - 900000).toISOString(),\r\n        status: 'success',\r\n        ip: '192.168.1.101',\r\n        userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',\r\n        details: { code: 'E001', name: '系统错误' }\r\n      },\r\n      {\r\n        id: 5,\r\n        operation: '导出XML',\r\n        description: '导出故障码到XML文件',\r\n        user: 'user',\r\n        time: new Date(Date.now() - 300000).toISOString(),\r\n        status: 'success',\r\n        ip: '192.168.1.102',\r\n        userAgent: 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',\r\n        details: { exportedCount: 150 }\r\n      }\r\n    ]\r\n    \r\n    // 方法\r\n    const loadHistory = async () => {\r\n      try {\r\n        loading.value = true\r\n        \r\n        // 模拟API调用\r\n        await new Promise(resolve => setTimeout(resolve, 500))\r\n        \r\n        const start = (currentPage.value - 1) * pageSize.value\r\n        const end = start + pageSize.value\r\n        historyList.value = mockHistoryData.slice(start, end)\r\n        total.value = mockHistoryData.length\r\n      } catch (error) {\r\n        ElMessage.error('加载历史记录失败')\r\n      } finally {\r\n        loading.value = false\r\n      }\r\n    }\r\n    \r\n    const handleSizeChange = (size) => {\r\n      pageSize.value = size\r\n      currentPage.value = 1\r\n      loadHistory()\r\n    }\r\n    \r\n    const handleCurrentChange = (page) => {\r\n      currentPage.value = page\r\n      loadHistory()\r\n    }\r\n    \r\n    const showDetails = (row) => {\r\n      selectedRecord.value = row\r\n      showDetailsDialog.value = true\r\n    }\r\n    \r\n    const formatDate = (dateString) => {\r\n      if (!dateString) return '-'\r\n      return new Date(dateString).toLocaleString('zh-CN')\r\n    }\r\n    \r\n    const getStatusType = (status) => {\r\n      const typeMap = {\r\n        success: 'success',\r\n        failed: 'danger',\r\n        pending: 'warning'\r\n      }\r\n      return typeMap[status] || 'info'\r\n    }\r\n    \r\n    const getStatusText = (status) => {\r\n      const textMap = {\r\n        success: '成功',\r\n        failed: '失败',\r\n        pending: '进行中'\r\n      }\r\n      return textMap[status] || status\r\n    }\r\n    \r\n    // 生命周期\r\n    onMounted(() => {\r\n      loadHistory()\r\n    })\r\n    \r\n    return {\r\n      loading,\r\n      currentPage,\r\n      pageSize,\r\n      total,\r\n      historyList,\r\n      showDetailsDialog,\r\n      selectedRecord,\r\n      loadHistory,\r\n      handleSizeChange,\r\n      handleCurrentChange,\r\n      showDetails,\r\n      formatDate,\r\n      getStatusType,\r\n      getStatusText\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.history-container {\r\n  height: 100%;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.pagination-wrapper {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-top: 20px;\r\n}\r\n\r\n.details-section {\r\n  margin-top: 20px;\r\n}\r\n\r\n.details-section h4 {\r\n  margin-bottom: 10px;\r\n  color: #333;\r\n}\r\n\r\n.details-section pre {\r\n  background: #f5f5f5;\r\n  padding: 10px;\r\n  border-radius: 4px;\r\n  font-size: 12px;\r\n  overflow-x: auto;\r\n}\r\n</style> ","import { render } from \"./History.vue?vue&type=template&id=27bdbc78&scoped=true\"\nimport script from \"./History.vue?vue&type=script&lang=js\"\nexport * from \"./History.vue?vue&type=script&lang=js\"\n\nimport \"./History.vue?vue&type=style&index=0&id=27bdbc78&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-27bdbc78\"]])\n\nexport default __exports__"],"names":["class","header","type","size","loadHistory","data","historyList","loading","style","prop","label","width","default","row","formatDate","time","getStatusType","status","getStatusText","fixed","showDetails","currentPage","pageSize","total","layout","handleSizeChange","handleCurrentChange","showDetailsDialog","title","column","border","selectedRecord","operation","description","user","ip","userAgent","JSON","stringify","details","name","setup","mockHistoryData","id","Date","toISOString","loginMethod","now","filename","parsedLines","errors","code","exportedCount","async","value","Promise","resolve","setTimeout","start","end","slice","length","error","page","dateString","toLocaleString","typeMap","success","failed","pending","textMap","__exports__","render"],"sourceRoot":""}