# 数据库配置
DB_HOST=127.0.0.1
DB_PORT=3306
DB_USER=root
DB_PASSWORD=940927syz
DB_NAME=logtool

# JWT 密钥
JWT_SECRET=your_jwt_secret

# 其他配置
PORT=3000

# 队列配置
QUEUE_CONCURRENCY=3

# 队列分离配置
# 实时处理队列配置（用户请求）
REALTIME_QUEUE_CONCURRENCY=3
REALTIME_QUEUE_TIMEOUT_MS=300000

# 历史处理队列配置（自动上传）
HISTORICAL_QUEUE_CONCURRENCY=3
HISTORICAL_QUEUE_TIMEOUT_MS=600000

# 手术分析队列配置
SURGERY_QUEUE_CONCURRENCY=3
SURGERY_QUEUE_TIMEOUT_MS=600000

# 队列管理配置
QUEUE_MANAGER_ENABLED=true
QUEUE_STATUS_CHECK_INTERVAL=30000
QUEUE_CLEANUP_INTERVAL=3600000
QUEUE_MAX_RETENTION_HOURS=24

# 多进程集群配置（建议使用明确数字避免回退）
WORKER_PROCESSES=5
AUTO_RESTART_ENABLED=true
MAX_RESTART_ATTEMPTS=5
RESTART_DELAY=1000
HEARTBEAT_TIMEOUT=30000

# 队列调度配置
QUEUE_MAX_CONCURRENCY=10             # 被 userQueueManager 使用
QUEUE_SCHEDULER_INTERVAL=100         # 调度器检查间隔（毫秒）
QUEUE_MAX_ATTEMPTS=3                 # 最大重试次数
QUEUE_BACKOFF_DELAY=2000             # 重试延迟（毫秒）
# 队列超时时间配置（毫秒）
QUEUE_TIMEOUT_MS=300000              # 5分钟

# PostgreSQL配置
POSTGRES_USER=postgres
POSTGRES_PASSWORD=940927syz
POSTGRES_DB=logtool
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_SSL=false

# Redis缓存配置
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# 缓存功能配置（已使用）
CACHE_ENABLED=true
CACHE_TTL_SECONDS=300
CACHE_MAX_KEYS=500
SEARCH_CACHE_TTL_SECONDS=180

# 自动缓存清理配置（已使用）
AUTO_CACHE_CLEANUP=true
CACHE_CLEANUP_INTERVAL=300000
CACHE_METRICS_LIMIT=100
CACHE_ALERTS_LIMIT=50
CACHE_SEARCH_LIMIT=200

# 速率限制配置
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=30000
RATE_LIMIT_MAX_REQUESTS=50
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=false
RATE_LIMIT_SKIP_FAILED_REQUESTS=false

# 监控服务配置（已使用）
MONITOR_ENABLED=true
MONITOR_IGNORE_INITIAL=false
MONITOR_DEPTH=3
MONITOR_STABILITY_THRESHOLD=2000
MONITOR_POLL_INTERVAL=100

# 自动上传配置（已使用）
AUTO_UPLOAD_ENABLED=true
AUTO_UPLOAD_SCAN_INTERVAL=10000
AUTO_UPLOAD_MAX_RETRY=3
AUTO_UPLOAD_MAX_FILE_SIZE=209715200
AUTO_UPLOAD_BATCH_SIZE=10

# 后台任务批处理限流配置（已使用）
BACKGROUND_BATCH_SIZE=1  # 每批最多处理1个文件夹或压缩包（避免队列堵塞）
BACKGROUND_MAX_QUEUE_WAITING_TASKS=50  # 队列中最多等待50个任务（仅用队列长度限制）
BACKGROUND_BATCH_TIMEOUT=300000  # 批次超时时间（5分钟）
BACKGROUND_BATCH_CHECK_INTERVAL=10000  # 批次检查间隔（10秒）

MONITOR_DIRECTORIES=["D:/microport/任务/！！临时任务/log分析/test"]
# 压缩文件支持（已使用）
COMPRESSION_ENABLED=true
COMPRESSION_MAX_ARCHIVE_SIZE=1048576000  # 1GB
COMPRESSION_TEMP_CLEANUP_INTERVAL=3600000  # 1小时
COMPRESSION_MAX_TEMP_DIRS=50
COMPRESSION_REQUIRE_7ZIP=true
# 自定义临时目录基础路径（可选）
COMPRESSION_TEMP_DIR_BASE=D:/temp/logtool_extract

# 智能调度配置（已使用）
INTELLIGENT_SCHEDULER_ENABLED=true
PEAK_HOURS_START=8
PEAK_HOURS_END=1
OFF_PEAK_HOURS_START=2
OFF_PEAK_HOURS_END=7

# 进程分配配置（PEAK_USER_REQUEST_WORKERS 留空表示“其余全部”）
PEAK_HISTORY_LOG_WORKERS=1
PEAK_USER_REQUEST_WORKERS=
OFF_PEAK_HISTORY_LOG_WORKERS=0.5
OFF_PEAK_USER_REQUEST_WORKERS=0.5

# 监控系统配置（已使用）
MONITORING_STORAGE_ENABLED=true          # 启用监控数据存储
MONITORING_RETENTION_DAYS=7              # 历史数据保留天数
MONITORING_BATCH_SIZE=100                # 批量存储大小
MONITORING_FLUSH_INTERVAL=60000          # 数据刷新间隔(毫秒)

# 流式处理配置
USE_STREAM_PROCESSING=true              # 是否启用流式处理（true/false）
STREAM_BATCH_SIZE=5000                    # 流式处理每批行数
STREAM_INSERT_BATCH_SIZE=1000             # 流式处理每批插入数量
STREAM_LARGE_FILE_THRESHOLD=20000        # 大文件阈值（超过此数量自动使用流式处理）